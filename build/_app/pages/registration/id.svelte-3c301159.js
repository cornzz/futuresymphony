import{S as oe,i as ie,s as ne,e as I,t as v,j as D,k as X,c as N,a as j,g as y,d as m,l as B,b as P,f as h,F as E,h as F,n as w,o as q,p as k,J as W,u as le,m as G,X as se,a2 as H,Q as K,H as M,v as C,w as R,x as A,A as T,a3 as Y,a4 as Z,a0 as fe}from"../../chunks/vendor-21361551.js";import{R as ae,a as ue,I as Q,B as x}from"../../chunks/Button-1c35a8b4.js";import{b as ce,l as L}from"../../chunks/stores-d7cb5688.js";import"../../chunks/index-5525c3de.js";function ee(s,t,r){const e=s.slice();return e[17]=t[r],e}function _e(s){let t,r=s[7]("registration.notfound")+"",e,o,i,n=s[7]("error.goBack")+"",l;return{c(){t=I("div"),e=v(r),o=D(),i=I("a"),l=v(n),this.h()},l(c){t=N(c,"DIV",{class:!0});var f=j(t);e=y(f,r),o=B(f),i=N(f,"A",{href:!0,class:!0});var a=j(i);l=y(a,n),a.forEach(m),f.forEach(m),this.h()},h(){P(i,"href","/"),P(i,"class","link"),P(t,"class","center svelte-3a7dix")},m(c,f){h(c,t,f),E(t,e),E(t,o),E(t,i),E(i,l)},p(c,f){f&128&&r!==(r=c[7]("registration.notfound")+"")&&F(e,r),f&128&&n!==(n=c[7]("error.goBack")+"")&&F(l,n)},i:M,o:M,d(c){c&&m(t)}}}function pe(s){let t,r,e,o,i,n,l,c,f,a=!s[8]&&me(s);const d=[be,ge],b=[];function p(u,$){return u[4].length===0?0:1}r=p(s),e=b[r]=d[r](s);let _=s[5]&&re(s);function O(u){s[13](u)}function z(u){s[14](u)}let U={disabled:s[3],$$slots:{default:[Se]},$$scope:{ctx:s}};return s[0]!==void 0&&(U.dto=s[0]),s[6]!==void 0&&(U.changed=s[6]),n=new ue({props:U}),s[12](n),K.push(()=>Y(n,"dto",O)),K.push(()=>Y(n,"changed",z)),{c(){a&&a.c(),t=D(),e.c(),o=D(),_&&_.c(),i=D(),C(n.$$.fragment)},l(u){a&&a.l(u),t=B(u),e.l(u),o=B(u),_&&_.l(u),i=B(u),R(n.$$.fragment,u)},m(u,$){a&&a.m(u,$),h(u,t,$),b[r].m(u,$),h(u,o,$),_&&_.m(u,$),h(u,i,$),A(n,u,$),f=!0},p(u,$){u[8]||a.p(u,$);let g=r;r=p(u),r===g?b[r].p(u,$):(G(),w(b[g],1,1,()=>{b[g]=null}),q(),e=b[r],e?e.p(u,$):(e=b[r]=d[r](u),e.c()),k(e,1),e.m(o.parentNode,o)),u[5]?_?(_.p(u,$),$&32&&k(_,1)):(_=re(u),_.c(),k(_,1),_.m(i.parentNode,i)):_&&(G(),w(_,1,1,()=>{_=null}),q());const S={};$&8&&(S.disabled=u[3]),$&1048810&&(S.$$scope={dirty:$,ctx:u}),!l&&$&1&&(l=!0,S.dto=u[0],Z(()=>l=!1)),!c&&$&64&&(c=!0,S.changed=u[6],Z(()=>c=!1)),n.$set(S)},i(u){f||(k(a),k(e),k(_),k(n.$$.fragment,u),f=!0)},o(u){w(a),w(e),w(_),w(n.$$.fragment,u),f=!1},d(u){a&&a.d(u),u&&m(t),b[r].d(u),u&&m(o),_&&_.d(u),u&&m(i),s[12](null),T(n,u)}}}function me(s){let t,r;return t=new Q({props:{type:"info",$$slots:{default:[de]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){A(t,e,o),r=!0},p(e,o){const i={};o&1048704&&(i.$$scope={dirty:o,ctx:e}),t.$set(i)},i(e){r||(k(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){T(t,e)}}}function de(s){let t=s[7]("registration.editingAllowedUntil")+"",r,e,o=s[7]("registration.confirmationAfterDeadline")+"",i;return{c(){r=v(t),e=D(),i=v(o)},l(n){r=y(n,t),e=B(n),i=y(n,o)},m(n,l){h(n,r,l),h(n,e,l),h(n,i,l)},p(n,l){l&128&&t!==(t=n[7]("registration.editingAllowedUntil")+"")&&F(r,t),l&128&&o!==(o=n[7]("registration.confirmationAfterDeadline")+"")&&F(i,o)},d(n){n&&m(r),n&&m(e),n&&m(i)}}}function ge(s){let t,r;return t=new Q({props:{type:"warning",$$slots:{default:[$e]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){A(t,e,o),r=!0},p(e,o){const i={};o&1048720&&(i.$$scope={dirty:o,ctx:e}),t.$set(i)},i(e){r||(k(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){T(t,e)}}}function be(s){let t,r;return t=new Q({props:{type:"success",$$slots:{default:[he]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){A(t,e,o),r=!0},p(e,o){const i={};o&1048704&&(i.$$scope={dirty:o,ctx:e}),t.$set(i)},i(e){r||(k(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){T(t,e)}}}function te(s){let t,r=s[7](s[17])+"",e;return{c(){t=I("li"),e=v(r),this.h()},l(o){t=N(o,"LI",{class:!0});var i=j(t);e=y(i,r),i.forEach(m),this.h()},h(){P(t,"class","svelte-3a7dix")},m(o,i){h(o,t,i),E(t,e)},p(o,i){i&144&&r!==(r=o[7](o[17])+"")&&F(e,r)},d(o){o&&m(t)}}}function $e(s){let t=s[7]("registration.missingForComplete")+"",r,e,o,i=s[4],n=[];for(let l=0;l<i.length;l+=1)n[l]=te(ee(s,i,l));return{c(){r=v(t),e=D(),o=I("ul");for(let l=0;l<n.length;l+=1)n[l].c()},l(l){r=y(l,t),e=B(l),o=N(l,"UL",{});var c=j(o);for(let f=0;f<n.length;f+=1)n[f].l(c);c.forEach(m)},m(l,c){h(l,r,c),h(l,e,c),h(l,o,c);for(let f=0;f<n.length;f+=1)n[f].m(o,null)},p(l,c){if(c&128&&t!==(t=l[7]("registration.missingForComplete")+"")&&F(r,t),c&144){i=l[4];let f;for(f=0;f<i.length;f+=1){const a=ee(l,i,f);n[f]?n[f].p(a,c):(n[f]=te(a),n[f].c(),n[f].m(o,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=i.length}},d(l){l&&m(r),l&&m(e),l&&m(o),fe(n,l)}}}function he(s){let t=s[7]("registration.complete")+"",r;return{c(){r=v(t)},l(e){r=y(e,t)},m(e,o){h(e,r,o)},p(e,o){o&128&&t!==(t=e[7]("registration.complete")+"")&&F(r,t)},d(e){e&&m(r)}}}function re(s){let t,r;return t=new Q({props:{type:"error",$$slots:{default:[ke]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){A(t,e,o),r=!0},p(e,o){const i={};o&1048736&&(i.$$scope={dirty:o,ctx:e}),t.$set(i)},i(e){r||(k(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){T(t,e)}}}function ke(s){let t=s[7](s[5])+"",r;return{c(){r=v(t)},l(e){r=y(e,t)},m(e,o){h(e,r,o)},p(e,o){o&160&&t!==(t=e[7](e[5])+"")&&F(r,t)},d(e){e&&m(r)}}}function we(s){let t;return{c(){t=I("div")},l(r){t=N(r,"DIV",{}),j(t).forEach(m)},m(r,e){h(r,t,e)},p:M,i:M,o:M,d(r){r&&m(t)}}}function ve(s){let t,r;return t=new x({props:{type:"outline",$$slots:{default:[ye]},$$scope:{ctx:s}}}),t.$on("click",s[10]),{c(){C(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){A(t,e,o),r=!0},p(e,o){const i={};o&1048704&&(i.$$scope={dirty:o,ctx:e}),t.$set(i)},i(e){r||(k(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){T(t,e)}}}function ye(s){let t=s[7]("registration.form.cancel")+"",r;return{c(){r=v(t)},l(e){r=y(e,t)},m(e,o){h(e,r,o)},p(e,o){o&128&&t!==(t=e[7]("registration.form.cancel")+"")&&F(r,t)},d(e){e&&m(r)}}}function Fe(s){let t,r;return t=new x({props:{type:"primary",$$slots:{default:[Oe]},$$scope:{ctx:s}}}),t.$on("click",s[11]),{c(){C(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){A(t,e,o),r=!0},p(e,o){const i={};o&1048712&&(i.$$scope={dirty:o,ctx:e}),t.$set(i)},i(e){r||(k(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){T(t,e)}}}function Oe(s){let t=(s[3]?s[7]("registration.form.edit"):s[7]("registration.form.save"))+"",r;return{c(){r=v(t)},l(e){r=y(e,t)},m(e,o){h(e,r,o)},p(e,o){o&136&&t!==(t=(e[3]?e[7]("registration.form.edit"):e[7]("registration.form.save"))+"")&&F(r,t)},d(e){e&&m(r)}}}function Se(s){let t,r,e,o,i;const n=[ve,we],l=[];function c(a,d){return a[3]?1:0}t=c(s),r=l[t]=n[t](s);let f=!s[8]&&Fe(s);return{c(){r.c(),e=D(),f&&f.c(),o=X()},l(a){r.l(a),e=B(a),f&&f.l(a),o=X()},m(a,d){l[t].m(a,d),h(a,e,d),f&&f.m(a,d),h(a,o,d),i=!0},p(a,d){let b=t;t=c(a),t===b?l[t].p(a,d):(G(),w(l[b],1,1,()=>{l[b]=null}),q(),r=l[t],r?r.p(a,d):(r=l[t]=n[t](a),r.c()),k(r,1),r.m(e.parentNode,e)),a[8]||f.p(a,d)},i(a){i||(k(r),k(f),i=!0)},o(a){w(r),w(f),i=!1},d(a){l[t].d(a),a&&m(e),f&&f.d(a),a&&m(o)}}}function De(s){let t,r,e=s[7]("registration.yourRegistration")+"",o,i,n,l,c,f;const a=[pe,_e],d=[];function b(p,_){return p[0]?0:p[2]?1:-1}return~(n=b(s))&&(l=d[n]=a[n](s)),{c(){t=I("h1"),r=I("b"),o=v(e),i=D(),l&&l.c(),c=X(),this.h()},l(p){t=N(p,"H1",{class:!0});var _=j(t);r=N(_,"B",{});var O=j(r);o=y(O,e),O.forEach(m),_.forEach(m),i=B(p),l&&l.l(p),c=X(),this.h()},h(){P(t,"class","cover-heading")},m(p,_){h(p,t,_),E(t,r),E(r,o),h(p,i,_),~n&&d[n].m(p,_),h(p,c,_),f=!0},p(p,[_]){(!f||_&128)&&e!==(e=p[7]("registration.yourRegistration")+"")&&F(o,e);let O=n;n=b(p),n===O?~n&&d[n].p(p,_):(l&&(G(),w(d[O],1,1,()=>{d[O]=null}),q()),~n?(l=d[n],l?l.p(p,_):(l=d[n]=a[n](p),l.c()),k(l,1),l.m(c.parentNode,c)):l=null)},i(p){f||(k(l),f=!0)},o(p){w(l),f=!1},d(p){p&&m(t),p&&m(i),~n&&d[n].d(p),p&&m(c)}}}function Be(s,t,r){let e,o;W(s,L,g=>r(16,e=g)),W(s,se,g=>r(7,o=g));let{dto:i=null}=t;ce.set(!0);let n,l,c=!1,f=!1,a=[],d="",b=!1,p=new Date>new Date("Jun 30 2022 23:59:59 GMT+0200");async function _(){if(n.reportValidity("#firstName, #lastName, #email, #dateOfBirth, #country")){r(4,a=n.getInvalid()),console.log(`saving registration ${l}`),H(L,e=!0,e);let g=await fetch(new URL(`registration.php?key=${l}`,`${window.location.origin}/api/`).toString(),{method:"POST",body:JSON.stringify(i)});if(g.status===200){let V=new FormData;V.append("reg_key",l);for(let J of Object.entries(i.files))J[1]&&V.append(J[0],J[1][0]);if(g=await fetch(new URL(`files.php?key=${l}`,`${window.location.origin}/api/`).toString(),{method:"POST",body:V}),g.status===200)return r(0,i.files.idCopyFile=void 0,i),r(0,i.files.pieceDemoFile=void 0,i),r(0,i.files.pieceScoreFile=void 0,i),r(0,i.files.proofOfPaymentFile=void 0,i),r(5,d=""),r(6,b=!1),H(L,e=!1,e),!0}await g.text()==="Invalid form."?r(5,d="registration.form.error.invalidForm"):r(5,d="registration.form.error.errorOccurred"),H(L,e=!1,e)}return!1}le(async()=>{if(H(L,e=!0,e),l=window.location.search.substring(1),console.log(`loading registration ${l}`),l==="1")r(0,i=JSON.parse('{"reg_key":"1","firstName":"Ernst","lastName":"Haft","email":"ernsthaft@web.de","dateOfBirth":"2001-01-11","country":"AX","pieceTitle":"My piece","pieceDemo":"","pieceScore":"score.pdf","idCopy":"id.jpeg","instrumentation":[[true],[true],[true],[true],[true],[true],[true],[true,true],[false,true],[false],[true],[false],[true,true],[false],[false],[false],[false],[false],[true],[true,true,true,true,true,true],[true,true,true,true,false],[true,true,true,true],[true,false,false],[false,false]],"scoreConfirmations":[true,false,false],"proofOfPayment":"proof.pdf","files":{"idCopyFile":"undefined","pieceScoreFile":"undefined","pieceDemoFile":"undefined","proofOfPaymentFile":"undefined"}}'));else{const g=await fetch(new URL(`registration.php?key=${l}`,`${window.location.origin}/api/`).toString());if(g.status===200){let S=JSON.parse(await g.text());r(0,i=Object.assign(new ae,Object.fromEntries(Object.entries(S).filter(([V,J])=>J!==null))))}}H(L,e=!1,e),r(2,c=!0)});const O=()=>r(3,f=!0),z=async()=>{r(3,f=!f&&(!b||await _())),(f||d)&&document.getElementById("back").click(),f&&n.closeSubsections()};function U(g){K[g?"unshift":"push"](()=>{n=g,r(1,n)})}function u(g){i=g,r(0,i)}function $(g){b=g,r(6,b)}return s.$$set=g=>{"dto"in g&&r(0,i=g.dto)},s.$$.update=()=>{s.$$.dirty&2&&n&&(r(4,a=n.getInvalid()),r(3,f=!0))},[i,n,c,f,a,d,b,o,p,_,O,z,U,u,$]}class Ce extends oe{constructor(t){super();ie(this,t,Be,De,ne,{dto:0})}}export{Ce as default};
