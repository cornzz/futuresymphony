import{S as pe,i as ce,s as ge,e as z,b as h,u as Q,t as R,d as X,f as v,g as k,H as O,o as de,ad as te,k as q,a as S,l as K,m as G,c as T,n as Z,F as re,E as Ie,G as C,K as be,L as ie,p as U,q as D,J as ke,r as L,Q as ne,N as V,$ as J,v as B,w as H,x as M,a0 as W,A as P,a6 as le,a7 as oe}from"../../chunks/index-5b3145ec.js";import{I as ye,a as ee}from"../../chunks/selectData-cc17e31a.js";import{R as Ne,a as Se}from"../../chunks/RegistrationForm-deafc4a0.js";import{B as we}from"../../chunks/Button-0276f9ef.js";import{l as j,e as he,M as $e,X as ve,d as Te}from"../../chunks/stores-360d0bab.js";import{f as se}from"../../chunks/index-03e0140e.js";import{M as Ue}from"../../chunks/MetaTags-271be665.js";const De=!1;function Le(n){let e,r,t,i,s,a,u,f;const p=[Me,He],_=[];function b(d,o){return d[3]?1:0}return s=b(n),a=_[s]=p[s](n),{c(){e=q("div"),r=q("hr"),t=S(),i=q("div"),a.c(),this.h()},l(d){e=K(d,"DIV",{style:!0});var o=G(e);r=K(o,"HR",{}),t=T(o),i=K(o,"DIV",{class:!0});var g=G(i);a.l(g),g.forEach(k),o.forEach(k),this.h()},h(){Z(i,"class","resend svelte-86el36"),re(i,"success",n[3]),Ie(e,"overflow","hidden")},m(d,o){h(d,e,o),C(e,r),C(e,t),C(e,i),_[s].m(i,null),f=!0},p(d,o){let g=s;s=b(d),s===g?_[s].p(d,o):(Q(),R(_[g],1,1,()=>{_[g]=null}),X(),a=_[s],a?a.p(d,o):(a=_[s]=p[s](d),a.c()),v(a,1),a.m(i,null)),o&8&&re(i,"success",d[3])},i(d){f||(v(a),be(()=>{u||(u=ie(e,se,{},!0)),u.run(1)}),f=!0)},o(d){R(a),u||(u=ie(e,se,{},!1)),u.run(0),f=!1},d(d){d&&k(e),_[s].d(),d&&u&&u.end()}}}function Be(n){let e=n[6](`registration.resend.${n[1]}`)+"",r,t,i,s=n[6]("registration.resend.here")+"",a,u,f,p;return{c(){r=U(e),t=S(),i=q("span"),a=U(s),u=U("."),this.h()},l(_){r=D(_,e),t=T(_),i=K(_,"SPAN",{class:!0});var b=G(i);a=D(b,s),b.forEach(k),u=D(_,"."),this.h()},h(){Z(i,"class","link")},m(_,b){h(_,r,b),h(_,t,b),h(_,i,b),C(i,a),h(_,u,b),f||(p=ke(i,"click",n[11]),f=!0)},p(_,b){b&66&&e!==(e=_[6](`registration.resend.${_[1]}`)+"")&&L(r,e),b&64&&s!==(s=_[6]("registration.resend.here")+"")&&L(a,s)},i:ne,o:ne,d(_){_&&k(r),_&&k(t),_&&k(i),_&&k(u),f=!1,p()}}}function He(n){let e=n[6]("registration.resend.success")+"",r,t,i=n[6]("registration.resend.sendAgain")+"",s,a,u,f=n[6]("registration.resend.here")+"",p,_,b=n[4]>0?`(${Math.floor(n[4]/60)}:${("0"+n[4]%60).slice(-2)})`:"",d,o,g;return{c(){r=U(e),t=S(),s=U(i),a=S(),u=q("span"),p=U(f),_=U(`.
                `),d=U(b),this.h()},l(c){r=D(c,e),t=T(c),s=D(c,i),a=T(c),u=K(c,"SPAN",{class:!0});var m=G(u);p=D(m,f),m.forEach(k),_=D(c,`.
                `),d=D(c,b),this.h()},h(){Z(u,"class","link svelte-86el36"),re(u,"disabled",n[4]>0)},m(c,m){h(c,r,m),h(c,t,m),h(c,s,m),h(c,a,m),h(c,u,m),C(u,p),h(c,_,m),h(c,d,m),o||(g=ke(u,"click",n[14]),o=!0)},p(c,m){m&64&&e!==(e=c[6]("registration.resend.success")+"")&&L(r,e),m&64&&i!==(i=c[6]("registration.resend.sendAgain")+"")&&L(s,i),m&64&&f!==(f=c[6]("registration.resend.here")+"")&&L(p,f),m&16&&re(u,"disabled",c[4]>0),m&16&&b!==(b=c[4]>0?`(${Math.floor(c[4]/60)}:${("0"+c[4]%60).slice(-2)})`:"")&&L(d,b)},i:ne,o:ne,d(c){c&&k(r),c&&k(t),c&&k(s),c&&k(a),c&&k(u),c&&k(_),c&&k(d),o=!1,g()}}}function Me(n){let e,r=n[6]("registration.resend.enterYourEmail")+"",t,i,s,a,u,f,p,_;function b(o){n[12](o)}let d={type:"email",name:"resendEmail",placeholder:n[6]("registration.resend.yourEmail")};return n[0]!==void 0&&(d.value=n[0]),a=new ye({props:d}),V.push(()=>J(a,"value",b)),a.$on("keyup",n[13]),p=new we({props:{type:"primary",slim:!0,disabled:n[5],$$slots:{default:[Pe]},$$scope:{ctx:n}}}),p.$on("click",n[7]),{c(){e=q("span"),t=U(r),i=U(":"),s=S(),B(a.$$.fragment),f=S(),B(p.$$.fragment),this.h()},l(o){e=K(o,"SPAN",{class:!0});var g=G(e);t=D(g,r),i=D(g,":"),g.forEach(k),s=T(o),H(a.$$.fragment,o),f=T(o),H(p.$$.fragment,o),this.h()},h(){Z(e,"class","svelte-86el36")},m(o,g){h(o,e,g),C(e,t),C(e,i),h(o,s,g),M(a,o,g),h(o,f,g),M(p,o,g),_=!0},p(o,g){(!_||g&64)&&r!==(r=o[6]("registration.resend.enterYourEmail")+"")&&L(t,r);const c={};g&64&&(c.placeholder=o[6]("registration.resend.yourEmail")),!u&&g&1&&(u=!0,c.value=o[0],W(()=>u=!1)),a.$set(c);const m={};g&32&&(m.disabled=o[5]),g&524352&&(m.$$scope={dirty:g,ctx:o}),p.$set(m)},i(o){_||(v(a.$$.fragment,o),v(p.$$.fragment,o),_=!0)},o(o){R(a.$$.fragment,o),R(p.$$.fragment,o),_=!1},d(o){o&&k(e),o&&k(s),P(a,o),o&&k(f),P(p,o)}}}function Pe(n){let e=n[6]("registration.form.submit")+"",r;return{c(){r=U(e)},l(t){r=D(t,e)},m(t,i){h(t,r,i)},p(t,i){i&64&&e!==(e=t[6]("registration.form.submit")+"")&&L(r,e)},d(t){t&&k(r)}}}function Ve(n){let e,r,t,i;const s=[Be,Le],a=[];function u(f,p){return f[2]?1:0}return e=u(n),r=a[e]=s[e](n),{c(){r.c(),t=z()},l(f){r.l(f),t=z()},m(f,p){a[e].m(f,p),h(f,t,p),i=!0},p(f,[p]){let _=e;e=u(f),e===_?a[e].p(f,p):(Q(),R(a[_],1,1,()=>{a[_]=null}),X(),r=a[e],r?r.p(f,p):(r=a[e]=s[e](f),r.c()),v(r,1),r.m(t.parentNode,t))},i(f){i||(v(r),i=!0)},o(f){R(r),i=!1},d(f){a[e].d(f),f&&k(t)}}}function Fe(n,e,r){let t,i,s,a;O(n,j,l=>r(5,t=l)),O(n,he,l=>r(16,i=l)),O(n,$e,l=>r(17,s=l)),O(n,ve,l=>r(6,a=l));let{type:u}=e,{existingEmail:f=""}=e,{email:p=""}=e,{error:_}=e,{warning:b}=e,d=!1,o=!1,g=0,c;function m(l){r(4,g=new Date(new Date().getTime()+l).getTime()-new Date().getTime()),c=setInterval(()=>{g>0?r(4,g--,g):clearInterval(c)},1e3)}async function N(){r(8,_=""),r(9,b="");const l=document.getElementById("resendEmail");if(l&&l.reportValidity()||!l&&p){te(j,t=!0,t);let w=new URLSearchParams({email:p,lang:s});const Y=await fetch(new URL("base_registration.php?"+w,i));if(Y.ok)r(3,o=!0),m(5*60);else{let F=await Y.text();F==="Email not found."?r(8,_="registration.resend.notFound"):F==="Error sending confirmation email."?r(8,_="registration.form.error.emailError"):F==="Too many requests."?r(9,b="registration.resend.pleaseWait"):r(8,_="registration.form.error.errorOccurred"),r(3,o=!1)}te(j,t=!1,t)}}de(()=>r(0,p=f));const E=()=>r(2,d=!d);function A(l){p=l,r(0,p)}const I=l=>l.key==="Enter"&&N(),y=()=>g<=0&&N();return n.$$set=l=>{"type"in l&&r(1,u=l.type),"existingEmail"in l&&r(10,f=l.existingEmail),"email"in l&&r(0,p=l.email),"error"in l&&r(8,_=l.error),"warning"in l&&r(9,b=l.warning)},[p,u,d,o,g,t,a,N,_,b,f,E,A,I,y]}class Ee extends pe{constructor(e){super(),ce(this,e,Fe,Ve,ge,{type:1,existingEmail:10,email:0,error:8,warning:9})}}function Oe(n){let e,r;return e=new ee({props:{type:"info",$$slots:{default:[Ke]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,i){M(e,t,i),r=!0},p(t,i){const s={};i&33554994&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){R(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function qe(n){let e,r;return e=new ee({props:{type:"success",$$slots:{default:[Je]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,i){M(e,t,i),r=!0},p(t,i){const s={};i&33554995&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){R(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function Ke(n){let e,r=n[9]("registration.firstStep")+"",t,i=n[9]("registration.editingAllowedUntil")+"",s,a,u,f,p,_,b;function d(m){n[14](m)}function o(m){n[15](m)}function g(m){n[16](m)}let c={type:"alreadyRegistered"};return n[1]!==void 0&&(c.email=n[1]),n[5]!==void 0&&(c.error=n[5]),n[4]!==void 0&&(c.warning=n[4]),u=new Ee({props:c}),V.push(()=>J(u,"email",d)),V.push(()=>J(u,"error",o)),V.push(()=>J(u,"warning",g)),{c(){e=new le(!1),t=S(),s=U(i),a=S(),B(u.$$.fragment),this.h()},l(m){e=oe(m,!1),t=T(m),s=D(m,i),a=T(m),H(u.$$.fragment,m),this.h()},h(){e.a=t},m(m,N){e.m(r,m,N),h(m,t,N),h(m,s,N),h(m,a,N),M(u,m,N),b=!0},p(m,N){(!b||N&512)&&r!==(r=m[9]("registration.firstStep")+"")&&e.p(r),(!b||N&512)&&i!==(i=m[9]("registration.editingAllowedUntil")+"")&&L(s,i);const E={};!f&&N&2&&(f=!0,E.email=m[1],W(()=>f=!1)),!p&&N&32&&(p=!0,E.error=m[5],W(()=>p=!1)),!_&&N&16&&(_=!0,E.warning=m[4],W(()=>_=!1)),u.$set(E)},i(m){b||(v(u.$$.fragment,m),b=!0)},o(m){R(u.$$.fragment,m),b=!1},d(m){m&&e.d(),m&&k(t),m&&k(s),m&&k(a),P(u,m)}}}function Je(n){let e,r=n[9]("registration.success",{values:{email:n[0].email}})+"",t,i,s,a,u,f;function p(o){n[11](o)}function _(o){n[12](o)}function b(o){n[13](o)}let d={type:"didNotReceive",existingEmail:n[0].email};return n[1]!==void 0&&(d.email=n[1]),n[5]!==void 0&&(d.error=n[5]),n[4]!==void 0&&(d.warning=n[4]),i=new Ee({props:d}),V.push(()=>J(i,"email",p)),V.push(()=>J(i,"error",_)),V.push(()=>J(i,"warning",b)),{c(){e=new le(!1),t=S(),B(i.$$.fragment),this.h()},l(o){e=oe(o,!1),t=T(o),H(i.$$.fragment,o),this.h()},h(){e.a=t},m(o,g){e.m(r,o,g),h(o,t,g),M(i,o,g),f=!0},p(o,g){(!f||g&513)&&r!==(r=o[9]("registration.success",{values:{email:o[0].email}})+"")&&e.p(r);const c={};g&1&&(c.existingEmail=o[0].email),!s&&g&2&&(s=!0,c.email=o[1],W(()=>s=!1)),!a&&g&32&&(a=!0,c.error=o[5],W(()=>a=!1)),!u&&g&16&&(u=!0,c.warning=o[4],W(()=>u=!1)),i.$set(c)},i(o){f||(v(i.$$.fragment,o),f=!0)},o(o){R(i.$$.fragment,o),f=!1},d(o){o&&e.d(),o&&k(t),P(i,o)}}}function ae(n){let e,r,t,i;return r=new ee({props:{type:"warning",$$slots:{default:[We]},$$scope:{ctx:n}}}),{c(){e=q("div"),B(r.$$.fragment),this.h()},l(s){e=K(s,"DIV",{class:!0});var a=G(e);H(r.$$.fragment,a),a.forEach(k),this.h()},h(){Z(e,"class","blockedInfobox svelte-1iclxit")},m(s,a){h(s,e,a),M(r,e,null),i=!0},p(s,a){const u={};a&33554944&&(u.$$scope={dirty:a,ctx:s}),r.$set(u)},i(s){i||(v(r.$$.fragment,s),be(()=>{t||(t=ie(e,se,{},!0)),t.run(1)}),i=!0)},o(s){R(r.$$.fragment,s),t||(t=ie(e,se,{},!1)),t.run(0),i=!1},d(s){s&&k(e),P(r),s&&t&&t.end()}}}function We(n){let e,r=n[9]("registration.outlookBlocked")+"",t;return{c(){e=new le(!1),t=z(),this.h()},l(i){e=oe(i,!1),t=z(),this.h()},h(){e.a=t},m(i,s){e.m(r,i,s),h(i,t,s)},p(i,s){s&512&&r!==(r=i[9]("registration.outlookBlocked")+"")&&e.p(r)},d(i){i&&k(t),i&&e.d()}}}function ue(n){let e,r;return e=new ee({props:{type:"warning",$$slots:{default:[Ye]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,i){M(e,t,i),r=!0},p(t,i){const s={};i&33554960&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){R(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function Ye(n){let e=n[9](n[4])+"",r;return{c(){r=U(e)},l(t){r=D(t,e)},m(t,i){h(t,r,i)},p(t,i){i&528&&e!==(e=t[9](t[4])+"")&&L(r,e)},d(t){t&&k(r)}}}function _e(n){let e,r;return e=new ee({props:{type:"error",$$slots:{default:[Ce]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,i){M(e,t,i),r=!0},p(t,i){const s={};i&33554976&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){R(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function Ce(n){let e=n[9](n[5])+"",r;return{c(){r=U(e)},l(t){r=D(t,e)},m(t,i){h(t,r,i)},p(t,i){i&544&&e!==(e=t[9](t[5])+"")&&L(r,e)},d(t){t&&k(r)}}}function me(n){let e,r,t,i;function s(f){n[19](f)}function a(f){n[20](f)}let u={newRegistration:!0,$$slots:{default:[Qe]},$$scope:{ctx:n}};return n[0]!==void 0&&(u.dto=n[0]),n[3]!==void 0&&(u.regulationsAccepted=n[3]),e=new Ne({props:u}),n[18](e),V.push(()=>J(e,"dto",s)),V.push(()=>J(e,"regulationsAccepted",a)),{c(){B(e.$$.fragment)},l(f){H(e.$$.fragment,f)},m(f,p){M(e,f,p),i=!0},p(f,p){const _={};p&33555208&&(_.$$scope={dirty:p,ctx:f}),!r&&p&1&&(r=!0,_.dto=f[0],W(()=>r=!1)),!t&&p&8&&(t=!0,_.regulationsAccepted=f[3],W(()=>t=!1)),e.$set(_)},i(f){i||(v(e.$$.fragment,f),i=!0)},o(f){R(e.$$.fragment,f),i=!1},d(f){n[18](null),P(e,f)}}}function Ge(n){let e=n[9]("registration.form.submit")+"",r;return{c(){r=U(e)},l(t){r=D(t,e)},m(t,i){h(t,r,i)},p(t,i){i&512&&e!==(e=t[9]("registration.form.submit")+"")&&L(r,e)},d(t){t&&k(r)}}}function Qe(n){let e,r,t,i;return t=new we({props:{type:"primary",disabled:!n[3]||n[8],$$slots:{default:[Ge]},$$scope:{ctx:n}}}),t.$on("click",n[17]),{c(){e=q("div"),r=S(),B(t.$$.fragment)},l(s){e=K(s,"DIV",{}),G(e).forEach(k),r=T(s),H(t.$$.fragment,s)},m(s,a){h(s,e,a),h(s,r,a),M(t,s,a),i=!0},p(s,a){const u={};a&264&&(u.disabled=!s[3]||s[8]),a&33554944&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){i||(v(t.$$.fragment,s),i=!0)},o(s){R(t.$$.fragment,s),i=!1},d(s){s&&k(e),s&&k(r),P(t,s)}}}function Xe(n){let e,r,t,i=n[9]("registration.title")+"",s,a,u,f,p,_,b,d,o,g;e=new Ue({props:{title:n[9]("registration.meta.title"),description:n[9]("registration.meta.description")}});const c=[qe,Oe],m=[];function N(l,w){return l[6]?0:1}u=N(n),f=m[u]=c[u](n);let E=n[7]&&ae(n),A=n[4]&&ue(n),I=n[5]&&_e(n),y=!n[6]&&me(n);return{c(){B(e.$$.fragment),r=S(),t=q("h1"),s=U(i),a=S(),f.c(),p=S(),E&&E.c(),_=S(),A&&A.c(),b=S(),I&&I.c(),d=S(),y&&y.c(),o=z(),this.h()},l(l){H(e.$$.fragment,l),r=T(l),t=K(l,"H1",{class:!0});var w=G(t);s=D(w,i),w.forEach(k),a=T(l),f.l(l),p=T(l),E&&E.l(l),_=T(l),A&&A.l(l),b=T(l),I&&I.l(l),d=T(l),y&&y.l(l),o=z(),this.h()},h(){Z(t,"class","cover-heading")},m(l,w){M(e,l,w),h(l,r,w),h(l,t,w),C(t,s),h(l,a,w),m[u].m(l,w),h(l,p,w),E&&E.m(l,w),h(l,_,w),A&&A.m(l,w),h(l,b,w),I&&I.m(l,w),h(l,d,w),y&&y.m(l,w),h(l,o,w),g=!0},p(l,[w]){const Y={};w&512&&(Y.title=l[9]("registration.meta.title")),w&512&&(Y.description=l[9]("registration.meta.description")),e.$set(Y),(!g||w&512)&&i!==(i=l[9]("registration.title")+"")&&L(s,i);let F=u;u=N(l),u===F?m[u].p(l,w):(Q(),R(m[F],1,1,()=>{m[F]=null}),X(),f=m[u],f?f.p(l,w):(f=m[u]=c[u](l),f.c()),v(f,1),f.m(p.parentNode,p)),l[7]?E?(E.p(l,w),w&128&&v(E,1)):(E=ae(l),E.c(),v(E,1),E.m(_.parentNode,_)):E&&(Q(),R(E,1,1,()=>{E=null}),X()),l[4]?A?(A.p(l,w),w&16&&v(A,1)):(A=ue(l),A.c(),v(A,1),A.m(b.parentNode,b)):A&&(Q(),R(A,1,1,()=>{A=null}),X()),l[5]?I?(I.p(l,w),w&32&&v(I,1)):(I=_e(l),I.c(),v(I,1),I.m(d.parentNode,d)):I&&(Q(),R(I,1,1,()=>{I=null}),X()),l[6]?y&&(Q(),R(y,1,1,()=>{y=null}),X()):y?(y.p(l,w),w&64&&v(y,1)):(y=me(l),y.c(),v(y,1),y.m(o.parentNode,o))},i(l){g||(v(e.$$.fragment,l),v(f),v(E),v(A),v(I),v(y),g=!0)},o(l){R(e.$$.fragment,l),R(f),R(E),R(A),R(I),R(y),g=!1},d(l){P(e,l),l&&k(r),l&&k(t),l&&k(a),m[u].d(l),l&&k(p),E&&E.d(l),l&&k(_),A&&A.d(l),l&&k(b),I&&I.d(l),l&&k(d),y&&y.d(l),l&&k(o)}}}function je(n,e,r){let t,i,s,a,u,f;O(n,Te,$=>r(22,i=$)),O(n,j,$=>r(8,s=$)),O(n,he,$=>r(23,a=$)),O(n,$e,$=>r(24,u=$)),O(n,ve,$=>r(9,f=$));let{dto:p=new Se}=e,_,b=De,d="",o="",g=!1,c="",m;async function N(){if(r(5,o=""),r(4,d=""),_.reportValidity()){te(j,s=!0,s),r(0,p.lang=u,p);const $="base_registration.php"+(m?`?admin=${m}`:""),fe=await fetch(new URL($,a),{method:"POST",body:JSON.stringify(p)}),x=await fe.text();fe.ok&&x==="Registration successful."?(r(6,g=!0),localStorage.removeItem("newRegistrationDto")):x==="Email already used."?r(4,d="registration.form.error.emailUsed"):x==="Invalid form."?r(5,o="registration.form.error.invalidForm"):x==="Error sending confirmation email."?r(5,o="registration.form.error.emailError"):x==="Too many requests."?r(4,d="registration.form.error.pleaseWait"):r(5,o="registration.form.error.errorOccurred"),te(j,s=!1,s)}}de(()=>{m=localStorage.getItem("adminKey"),i&&!m&&(window.location.href="/#participants")});function E($){c=$,r(1,c)}function A($){o=$,r(5,o)}function I($){d=$,r(4,d)}function y($){c=$,r(1,c)}function l($){o=$,r(5,o)}function w($){d=$,r(4,d)}const Y=()=>N();function F($){V[$?"unshift":"push"](()=>{_=$,r(2,_)})}function Re($){p=$,r(0,p)}function Ae($){b=$,r(3,b)}return n.$$set=$=>{"dto"in $&&r(0,p=$.dto)},n.$$.update=()=>{n.$$.dirty&3&&r(7,t=[p.email,c].some($=>$.match(/outlook\.|live\.|hotmail\.|msn\.|passport\./)))},[p,c,_,b,d,o,g,t,s,f,N,E,A,I,y,l,w,Y,F,Re,Ae]}class nt extends pe{constructor(e){super(),ce(this,e,je,Xe,ge,{dto:0})}}export{nt as default};
