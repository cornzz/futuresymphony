import{S as x,i as ee,s as te,k as Y,f as d,n as g,o as U,p as b,d as _,J,u as ne,m as A,X as oe,a2 as D,Q as H,e as I,t as y,c as S,a as B,g as w,b as T,F as O,h as V,H as N,a3 as q,j as M,v as L,l as P,w as R,x as C,a4 as Q,A as F,a0 as re}from"../../chunks/vendor-d9d57f64.js";import{a as le,B as X,I as z}from"../../chunks/Button-39c9f27a.js";import{l as j,c as se}from"../../chunks/stores-b871fb0f.js";function G(s,e,t){const n=s.slice();return n[17]=e[t],n}function ie(s){let e,t,n,o=s[7]("error.goBack")+"",r;return{c(){e=I("div"),t=y(`Registration not found.
        `),n=I("a"),r=y(o),this.h()},l(a){e=S(a,"DIV",{class:!0});var l=B(e);t=w(l,`Registration not found.
        `),n=S(l,"A",{href:!0,class:!0});var f=B(n);r=w(f,o),f.forEach(_),l.forEach(_),this.h()},h(){T(n,"href","/"),T(n,"class","link"),T(e,"class","center svelte-1k59lku")},m(a,l){d(a,e,l),O(e,t),O(e,n),O(n,r)},p(a,l){l&128&&o!==(o=a[7]("error.goBack")+"")&&V(r,o)},i:N,o:N,d(a){a&&_(e)}}}function ae(s){let e,t,n,o,r,a,l;const f=[ce,fe],i=[];function u(c,m){return c[5].length===0?0:1}e=u(s),t=i[e]=f[e](s);function h(c){s[12](c)}function $(c){s[13](c)}let k={disabled:s[4],$$slots:{default:[be]},$$scope:{ctx:s}};return s[0]!==void 0&&(k.dto=s[0]),s[6]!==void 0&&(k.changed=s[6]),o=new le({props:k}),s[11](o),H.push(()=>q(o,"dto",h)),H.push(()=>q(o,"changed",$)),{c(){t.c(),n=M(),L(o.$$.fragment)},l(c){t.l(c),n=P(c),R(o.$$.fragment,c)},m(c,m){i[e].m(c,m),d(c,n,m),C(o,c,m),l=!0},p(c,m){let E=e;e=u(c),e===E?i[e].p(c,m):(A(),g(i[E],1,1,()=>{i[E]=null}),U(),t=i[e],t?t.p(c,m):(t=i[e]=f[e](c),t.c()),b(t,1),t.m(n.parentNode,n));const v={};m&16&&(v.disabled=c[4]),m&1048664&&(v.$$scope={dirty:m,ctx:c}),!r&&m&1&&(r=!0,v.dto=c[0],Q(()=>r=!1)),!a&&m&64&&(a=!0,v.changed=c[6],Q(()=>a=!1)),o.$set(v)},i(c){l||(b(t),b(o.$$.fragment,c),l=!0)},o(c){g(t),g(o.$$.fragment,c),l=!1},d(c){i[e].d(c),c&&_(n),s[11](null),F(o,c)}}}function fe(s){let e,t;return e=new z({props:{type:"warning",$$slots:{default:[ue]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(n){R(e.$$.fragment,n)},m(n,o){C(e,n,o),t=!0},p(n,o){const r={};o&1048608&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function ce(s){let e,t;return e=new z({props:{type:"success",$$slots:{default:[_e]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(n){R(e.$$.fragment,n)},m(n,o){C(e,n,o),t=!0},p(n,o){const r={};o&1048576&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function K(s){let e,t=s[17]+"",n;return{c(){e=I("li"),n=y(t)},l(o){e=S(o,"LI",{});var r=B(e);n=w(r,t),r.forEach(_)},m(o,r){d(o,e,r),O(e,n)},p(o,r){r&32&&t!==(t=o[17]+"")&&V(n,t)},d(o){o&&_(e)}}}function ue(s){let e,t,n=s[5],o=[];for(let r=0;r<n.length;r+=1)o[r]=K(G(s,n,r));return{c(){e=y(`Following fields are missing for your registration to be complete:
            `),t=I("ul");for(let r=0;r<o.length;r+=1)o[r].c()},l(r){e=w(r,`Following fields are missing for your registration to be complete:
            `),t=S(r,"UL",{});var a=B(t);for(let l=0;l<o.length;l+=1)o[l].l(a);a.forEach(_)},m(r,a){d(r,e,a),d(r,t,a);for(let l=0;l<o.length;l+=1)o[l].m(t,null)},p(r,a){if(a&32){n=r[5];let l;for(l=0;l<n.length;l+=1){const f=G(r,n,l);o[l]?o[l].p(f,a):(o[l]=K(f),o[l].c(),o[l].m(t,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(r){r&&_(e),r&&_(t),re(o,r)}}}function _e(s){let e;return{c(){e=y("Your registration is complete!")},l(t){e=w(t,"Your registration is complete!")},m(t,n){d(t,e,n)},d(t){t&&_(e)}}}function pe(s){let e;return{c(){e=I("div")},l(t){e=S(t,"DIV",{}),B(e).forEach(_)},m(t,n){d(t,e,n)},p:N,i:N,o:N,d(t){t&&_(e)}}}function me(s){let e,t;return e=new X({props:{type:"outline",$$slots:{default:[de]},$$scope:{ctx:s}}}),e.$on("click",s[9]),{c(){L(e.$$.fragment)},l(n){R(e.$$.fragment,n)},m(n,o){C(e,n,o),t=!0},p(n,o){const r={};o&1048576&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function de(s){let e;return{c(){e=y("Cancel")},l(t){e=w(t,"Cancel")},m(t,n){d(t,e,n)},d(t){t&&_(e)}}}function ge(s){let e=(s[3]?"Save":"Edit")+"",t;return{c(){t=y(e)},l(n){t=w(n,e)},m(n,o){d(n,t,o)},p(n,o){o&8&&e!==(e=(n[3]?"Save":"Edit")+"")&&V(t,e)},d(n){n&&_(t)}}}function be(s){let e,t,n,o,r;const a=[me,pe],l=[];function f(i,u){return i[3]?0:1}return e=f(s),t=l[e]=a[e](s),o=new X({props:{type:"primary",$$slots:{default:[ge]},$$scope:{ctx:s}}}),o.$on("click",s[10]),{c(){t.c(),n=M(),L(o.$$.fragment)},l(i){t.l(i),n=P(i),R(o.$$.fragment,i)},m(i,u){l[e].m(i,u),d(i,n,u),C(o,i,u),r=!0},p(i,u){let h=e;e=f(i),e===h?l[e].p(i,u):(A(),g(l[h],1,1,()=>{l[h]=null}),U(),t=l[e],t?t.p(i,u):(t=l[e]=a[e](i),t.c()),b(t,1),t.m(n.parentNode,n));const $={};u&1048584&&($.$$scope={dirty:u,ctx:i}),o.$set($)},i(i){r||(b(t),b(o.$$.fragment,i),r=!0)},o(i){g(t),g(o.$$.fragment,i),r=!1},d(i){l[e].d(i),i&&_(n),F(o,i)}}}function he(s){let e,t,n,o;const r=[ae,ie],a=[];function l(f,i){return f[0]?0:f[2]?1:-1}return~(e=l(s))&&(t=a[e]=r[e](s)),{c(){t&&t.c(),n=Y()},l(f){t&&t.l(f),n=Y()},m(f,i){~e&&a[e].m(f,i),d(f,n,i),o=!0},p(f,[i]){let u=e;e=l(f),e===u?~e&&a[e].p(f,i):(t&&(A(),g(a[u],1,1,()=>{a[u]=null}),U()),~e?(t=a[e],t?t.p(f,i):(t=a[e]=r[e](f),t.c()),b(t,1),t.m(n.parentNode,n)):t=null)},i(f){o||(b(t),o=!0)},o(f){g(t),o=!1},d(f){~e&&a[e].d(f),f&&_(n)}}}function ke(s,e,t){let n,o,r;J(s,j,p=>t(15,n=p)),J(s,se,p=>t(16,o=p)),J(s,oe,p=>t(7,r=p));let{dto:a=null}=e,l,f,i=!1,u=!1,h=!1,$=[],k=!1;async function c(){t(5,$=l.getInvalid()),console.log(`saving registration ${f}`),D(j,n=!0,n),await fetch(new URL("/api/registration.php",o).toString(),{method:"POST",body:JSON.stringify(a)}),D(j,n=!1,n),t(6,k=!1)}ne(()=>{D(j,n=!0,n),f=window.location.search.substring(1),console.log(`loading registration ${f}`),setTimeout(()=>{f==="1"&&t(0,a=JSON.parse('{"firstName":"Ernst","lastName":"Haft","email":"ernsthaft@web.de","dateOfBirth":"1990-01-01","country":"DE","idCopy":{"value":"","files": "undefined"}}')),D(j,n=!1,n),t(2,i=!0)},0)});const m=()=>{t(3,u=!1),t(4,h=!0)},E=()=>{t(3,u=!u),t(4,h=!u),!u&&k&&c()};function v(p){H[p?"unshift":"push"](()=>{l=p,t(1,l)})}function W(p){a=p,t(0,a)}function Z(p){k=p,t(6,k)}return s.$$set=p=>{"dto"in p&&t(0,a=p.dto)},s.$$.update=()=>{s.$$.dirty&2&&l&&(t(5,$=l.getInvalid()),t(4,h=!0))},[a,l,i,u,h,$,k,r,c,m,E,v,W,Z]}class we extends x{constructor(e){super();ee(this,e,ke,he,te,{dto:0})}}export{we as default};
