var ae=Object.defineProperty;var x=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var ee=(i,t,r)=>t in i?ae(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,te=(i,t)=>{for(var r in t||(t={}))ue.call(t,r)&&ee(i,r,t[r]);if(x)for(var r of x(t))ce.call(t,r)&&ee(i,r,t[r]);return i};import{S as _e,i as pe,s as me,e as E,t as y,j as S,k as Q,c as R,a as B,g as v,d as m,l as D,b as V,f as k,F as I,h as O,n as w,o as W,p as $,J as Y,u as de,m as X,X as ge,Q as re,ae as q,R as Z,H as z,v as j,w as C,x as L,A as U,af as le,ag as oe,a7 as be}from"../../chunks/vendor-675a0daa.js";import{b as he,R as ke,a as K}from"../../chunks/RegistrationForm-cc1b8f23.js";import{B as ie}from"../../chunks/Button-0ce6b286.js";import{b as $e,l as A,c as we}from"../../chunks/stores-03441eab.js";import"../../chunks/index-04e697e4.js";function ne(i,t,r){const e=i.slice();return e[19]=t[r],e}function ye(i){let t,r=i[9]("registration.notfound")+"",e,l,s,o=i[9]("error.goBack")+"",n;return{c(){t=E("div"),e=y(r),l=S(),s=E("a"),n=y(o),this.h()},l(c){t=R(c,"DIV",{class:!0});var f=B(t);e=v(f,r),l=D(f),s=R(f,"A",{href:!0,class:!0});var a=B(s);n=v(a,o),a.forEach(m),f.forEach(m),this.h()},h(){V(s,"href","/"),V(s,"class","link"),V(t,"class","center svelte-3a7dix")},m(c,f){k(c,t,f),I(t,e),I(t,l),I(t,s),I(s,n)},p(c,f){f&512&&r!==(r=c[9]("registration.notfound")+"")&&O(e,r),f&512&&o!==(o=c[9]("error.goBack")+"")&&O(n,o)},i:z,o:z,d(c){c&&m(t)}}}function ve(i){let t,r,e,l,s,o,n,c,f,a=!i[10]&&Oe(i);const d=[De,Se],g=[];function p(u,h){return u[4].length===0?0:1}r=p(i),e=g[r]=d[r](i);let _=i[5]&&fe(i);function F(u){i[15](u)}function G(u){i[16](u)}let P={disabled:i[3],$$slots:{default:[Ue]},$$scope:{ctx:i}};return i[0]!==void 0&&(P.dto=i[0]),i[6]!==void 0&&(P.changed=i[6]),o=new ke({props:P}),i[14](o),Z.push(()=>le(o,"dto",F)),Z.push(()=>le(o,"changed",G)),{c(){a&&a.c(),t=S(),e.c(),l=S(),_&&_.c(),s=S(),j(o.$$.fragment)},l(u){a&&a.l(u),t=D(u),e.l(u),l=D(u),_&&_.l(u),s=D(u),C(o.$$.fragment,u)},m(u,h){a&&a.m(u,h),k(u,t,h),g[r].m(u,h),k(u,l,h),_&&_.m(u,h),k(u,s,h),L(o,u,h),f=!0},p(u,h){u[10]||a.p(u,h);let T=r;r=p(u),r===T?g[r].p(u,h):(X(),w(g[T],1,1,()=>{g[T]=null}),W(),e=g[r],e?e.p(u,h):(e=g[r]=d[r](u),e.c()),$(e,1),e.m(l.parentNode,l)),u[5]?_?(_.p(u,h),h&32&&$(_,1)):(_=fe(u),_.c(),$(_,1),_.m(s.parentNode,s)):_&&(X(),w(_,1,1,()=>{_=null}),W());const N={};h&8&&(N.disabled=u[3]),h&4195307&&(N.$$scope={dirty:h,ctx:u}),!n&&h&1&&(n=!0,N.dto=u[0],oe(()=>n=!1)),!c&&h&64&&(c=!0,N.changed=u[6],oe(()=>c=!1)),o.$set(N)},i(u){f||($(a),$(e),$(_),$(o.$$.fragment,u),f=!0)},o(u){w(a),w(e),w(_),w(o.$$.fragment,u),f=!1},d(u){a&&a.d(u),u&&m(t),g[r].d(u),u&&m(l),_&&_.d(u),u&&m(s),i[14](null),U(o,u)}}}function Oe(i){let t,r;return t=new K({props:{type:"info",$$slots:{default:[Fe]},$$scope:{ctx:i}}}),{c(){j(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){L(t,e,l),r=!0},p(e,l){const s={};l&4194816&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){U(t,e)}}}function Fe(i){let t=i[9]("registration.editingAllowedUntil")+"",r,e,l=i[9]("registration.confirmationAfterDeadline")+"",s;return{c(){r=y(t),e=S(),s=y(l)},l(o){r=v(o,t),e=D(o),s=v(o,l)},m(o,n){k(o,r,n),k(o,e,n),k(o,s,n)},p(o,n){n&512&&t!==(t=o[9]("registration.editingAllowedUntil")+"")&&O(r,t),n&512&&l!==(l=o[9]("registration.confirmationAfterDeadline")+"")&&O(s,l)},d(o){o&&m(r),o&&m(e),o&&m(s)}}}function Se(i){let t,r;return t=new K({props:{type:"warning",$$slots:{default:[Ne]},$$scope:{ctx:i}}}),{c(){j(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){L(t,e,l),r=!0},p(e,l){const s={};l&4194832&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){U(t,e)}}}function De(i){let t,r;return t=new K({props:{type:"success",$$slots:{default:[Ee]},$$scope:{ctx:i}}}),{c(){j(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){L(t,e,l),r=!0},p(e,l){const s={};l&4194816&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){U(t,e)}}}function se(i){let t,r=i[9](i[19])+"",e;return{c(){t=E("li"),e=y(r),this.h()},l(l){t=R(l,"LI",{class:!0});var s=B(t);e=v(s,r),s.forEach(m),this.h()},h(){V(t,"class","svelte-3a7dix")},m(l,s){k(l,t,s),I(t,e)},p(l,s){s&528&&r!==(r=l[9](l[19])+"")&&O(e,r)},d(l){l&&m(t)}}}function Ne(i){let t=i[9]("registration.missingForComplete")+"",r,e,l,s=i[4],o=[];for(let n=0;n<s.length;n+=1)o[n]=se(ne(i,s,n));return{c(){r=y(t),e=S(),l=E("ul");for(let n=0;n<o.length;n+=1)o[n].c()},l(n){r=v(n,t),e=D(n),l=R(n,"UL",{});var c=B(l);for(let f=0;f<o.length;f+=1)o[f].l(c);c.forEach(m)},m(n,c){k(n,r,c),k(n,e,c),k(n,l,c);for(let f=0;f<o.length;f+=1)o[f].m(l,null)},p(n,c){if(c&512&&t!==(t=n[9]("registration.missingForComplete")+"")&&O(r,t),c&528){s=n[4];let f;for(f=0;f<s.length;f+=1){const a=ne(n,s,f);o[f]?o[f].p(a,c):(o[f]=se(a),o[f].c(),o[f].m(l,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=s.length}},d(n){n&&m(r),n&&m(e),n&&m(l),be(o,n)}}}function Ee(i){let t=i[9]("registration.complete")+"",r;return{c(){r=y(t)},l(e){r=v(e,t)},m(e,l){k(e,r,l)},p(e,l){l&512&&t!==(t=e[9]("registration.complete")+"")&&O(r,t)},d(e){e&&m(r)}}}function fe(i){let t,r;return t=new K({props:{type:"error",$$slots:{default:[Re]},$$scope:{ctx:i}}}),{c(){j(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){L(t,e,l),r=!0},p(e,l){const s={};l&4194848&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){U(t,e)}}}function Re(i){let t=i[9](...i[5])+"",r;return{c(){r=y(t)},l(e){r=v(e,t)},m(e,l){k(e,r,l)},p(e,l){l&544&&t!==(t=e[9](...e[5])+"")&&O(r,t)},d(e){e&&m(r)}}}function Be(i){let t;return{c(){t=E("div")},l(r){t=R(r,"DIV",{}),B(t).forEach(m)},m(r,e){k(r,t,e)},p:z,i:z,o:z,d(r){r&&m(t)}}}function Ie(i){let t,r;return t=new ie({props:{type:"outline",disabled:i[8],$$slots:{default:[je]},$$scope:{ctx:i}}}),t.$on("click",i[12]),{c(){j(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){L(t,e,l),r=!0},p(e,l){const s={};l&256&&(s.disabled=e[8]),l&4194816&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){U(t,e)}}}function je(i){let t=i[9]("registration.form.cancel")+"",r;return{c(){r=y(t)},l(e){r=v(e,t)},m(e,l){k(e,r,l)},p(e,l){l&512&&t!==(t=e[9]("registration.form.cancel")+"")&&O(r,t)},d(e){e&&m(r)}}}function Ce(i){let t,r;return t=new ie({props:{type:"primary",disabled:i[8],$$slots:{default:[Le]},$$scope:{ctx:i}}}),t.$on("click",i[13]),{c(){j(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){L(t,e,l),r=!0},p(e,l){const s={};l&256&&(s.disabled=e[8]),l&4194824&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){U(t,e)}}}function Le(i){let t=(i[3]?i[9]("registration.form.edit"):i[9]("registration.form.save"))+"",r;return{c(){r=y(t)},l(e){r=v(e,t)},m(e,l){k(e,r,l)},p(e,l){l&520&&t!==(t=(e[3]?e[9]("registration.form.edit"):e[9]("registration.form.save"))+"")&&O(r,t)},d(e){e&&m(r)}}}function Ue(i){let t,r,e,l,s;const o=[Ie,Be],n=[];function c(a,d){return a[3]?1:0}t=c(i),r=n[t]=o[t](i);let f=!i[10]&&Ce(i);return{c(){r.c(),e=S(),f&&f.c(),l=Q()},l(a){r.l(a),e=D(a),f&&f.l(a),l=Q()},m(a,d){n[t].m(a,d),k(a,e,d),f&&f.m(a,d),k(a,l,d),s=!0},p(a,d){let g=t;t=c(a),t===g?n[t].p(a,d):(X(),w(n[g],1,1,()=>{n[g]=null}),W(),r=n[t],r?r.p(a,d):(r=n[t]=o[t](a),r.c()),$(r,1),r.m(e.parentNode,e)),a[10]||f.p(a,d)},i(a){s||($(r),$(f),s=!0)},o(a){w(r),w(f),s=!1},d(a){n[t].d(a),a&&m(e),f&&f.d(a),a&&m(l)}}}function Je(i){let t,r,e=i[9]("registration.yourRegistration")+"",l,s,o,n,c,f;const a=[ve,ye],d=[];function g(p,_){return p[0]?0:p[2]?1:-1}return~(o=g(i))&&(n=d[o]=a[o](i)),{c(){t=E("h1"),r=E("b"),l=y(e),s=S(),n&&n.c(),c=Q(),this.h()},l(p){t=R(p,"H1",{class:!0});var _=B(t);r=R(_,"B",{});var F=B(r);l=v(F,e),F.forEach(m),_.forEach(m),s=D(p),n&&n.l(p),c=Q(),this.h()},h(){V(t,"class","cover-heading")},m(p,_){k(p,t,_),I(t,r),I(r,l),k(p,s,_),~o&&d[o].m(p,_),k(p,c,_),f=!0},p(p,[_]){(!f||_&512)&&e!==(e=p[9]("registration.yourRegistration")+"")&&O(l,e);let F=o;o=g(p),o===F?~o&&d[o].p(p,_):(n&&(X(),w(d[F],1,1,()=>{d[F]=null}),W()),~o?(n=d[o],n?n.p(p,_):(n=d[o]=a[o](p),n.c()),$(n,1),n.m(c.parentNode,c)):n=null)},i(p){f||($(n),f=!0)},o(p){w(n),f=!1},d(p){p&&m(t),p&&m(s),~o&&d[o].d(p),p&&m(c)}}}function Ae(i,t,r){let e,l,s;Y(i,A,b=>r(8,e=b)),Y(i,we,b=>r(18,l=b)),Y(i,ge,b=>r(9,s=b));let{dto:o=null}=t;$e.set(!0);let n,c,f=!1,a=!1,d=[],g=null,p=!1,_=null,F=new Date>new Date("Jun 30 2022 23:59:59 GMT+0200");async function G(){if(r(5,g=null),await re(),n.reportValidity("#firstName, #lastName, #email, #dateOfBirth, #country, #idCopy, #pieceScore, #pieceDemo, #proofOfPayment")){console.log(`saving registration ${c}`),q(A,e=!0,e);let b=await fetch(new URL("registration.php",l).toString(),{method:"POST",body:JSON.stringify(o)});if(b.status===200){let J=new FormData;J.append("reg_key",c);for(let M of Object.entries(o.files))M[1]&&J.append(M[0],M[1][0]);if(b=await fetch(new URL(`files.php?key=${c}`,l).toString(),{method:"POST",body:J}),b.status===200)return r(0,o.files.idCopyFile=void 0,o),r(0,o.files.pieceDemoFile=void 0,o),r(0,o.files.pieceScoreFile=void 0,o),r(0,o.files.proofOfPaymentFile=void 0,o),r(6,p=!1),q(A,e=!1,e),r(4,d=n.getInvalid()),!0}let H=await b.text();if(H==="Invalid form.")r(5,g=["registration.form.error.invalidForm",{}]);else if(H.startsWith("Invalid file type or size:")){let J=H.split(": ").pop();r(5,g=["registration.form.error.fileError",{values:{files:J}}])}else r(5,g=["registration.form.error.errorOccurred",{}]);q(A,e=!1,e)}return!1}de(async()=>{if(q(A,e=!0,e),c=window.location.search.substring(1),console.log(`loading registration ${c}`),c==="1")r(0,o=JSON.parse('{"reg_key":"1","firstName":"Ernst","lastName":"Haft","email":"ernsthaft@web.de","dateOfBirth":"2001-01-11","country":"DE","pieceTitle":"My piece","pieceDemo":"","pieceScore":"score.pdf","idCopy":"","instrumentation":[[true],[true],[true],[true],[true],[true],[true],[true,true],[false,true],[false],[true],[false],[true,true],[false],[false],[false],[false],[false],[true],[true,true,true,true,true,true],[true,true,true,true,false],[true,true,true,true],[true,false,false],[false,false]],"scoreConfirmations":[true,false,false],"proofOfPayment":"","files":{"idCopyFile":null,"pieceScoreFile":null,"pieceDemoFile":null,"proofOfPaymentFile":null}}'));else{const b=await fetch(new URL(`registration.php?key=${c}`,l).toString());if(b.status===200){let H=JSON.parse(await b.text());r(0,o=Object.assign(new he,Object.fromEntries(Object.entries(H).filter(([J,M])=>M!==null))))}}q(A,e=!1,e),r(2,f=!0),await re(),n&&(r(4,d=n.getInvalid()),r(3,a=!0))});const P=()=>{r(3,a=!0),r(5,g=null),r(0,o=te({},_))},u=async()=>{r(3,a=!a&&(!p||await G())),(a||g)&&document.getElementById("back").click(),a&&n.closeSubsections(),r(7,_=!a&&!g?JSON.parse(JSON.stringify(o)):_)};function h(b){Z[b?"unshift":"push"](()=>{n=b,r(1,n)})}function T(b){o=b,r(0,o)}function N(b){p=b,r(6,p)}return i.$$set=b=>{"dto"in b&&r(0,o=b.dto)},[o,n,f,a,d,g,p,_,e,s,F,G,P,u,h,T,N]}class ze extends _e{constructor(t){super();pe(this,t,Ae,Je,me,{dto:0})}}export{ze as default};
