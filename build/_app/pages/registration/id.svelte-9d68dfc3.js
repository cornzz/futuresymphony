import{S as ee,i as te,s as re,e as N,t as y,j as S,k as H,c as D,a as E,g as O,d as m,l as I,b as L,f as d,F as j,h as B,n as h,o as V,p as k,J as Q,u as le,m as P,X as oe,a2 as M,Q as X,H as U,v as A,w as R,x as C,A as J,a3 as z,a4 as K,a0 as ne}from"../../chunks/vendor-21361551.js";import{R as se,d as ie,a as fe,I as q,B as W}from"../../chunks/Button-81e9407f.js";import{b as ae,l as T}from"../../chunks/stores-d7cb5688.js";import"../../chunks/index-5525c3de.js";function Y(f,t,r){const e=f.slice();return e[16]=t[r],e}function ue(f){let t,r=f[6]("registration.notfound")+"",e,l,o,s=f[6]("error.goBack")+"",n;return{c(){t=N("div"),e=y(r),l=S(),o=N("a"),n=y(s),this.h()},l(c){t=D(c,"DIV",{class:!0});var i=E(t);e=O(i,r),l=I(i),o=D(i,"A",{href:!0,class:!0});var a=E(o);n=O(a,s),a.forEach(m),i.forEach(m),this.h()},h(){L(o,"href","/"),L(o,"class","link"),L(t,"class","center svelte-3a7dix")},m(c,i){d(c,t,i),j(t,e),j(t,l),j(t,o),j(o,n)},p(c,i){i&64&&r!==(r=c[6]("registration.notfound")+"")&&B(e,r),i&64&&s!==(s=c[6]("error.goBack")+"")&&B(n,s)},i:U,o:U,d(c){c&&m(t)}}}function ce(f){let t,r,e,l,o,s,n,c,i=!f[7]&&_e(f);const a=[ge,me],_=[];function w(u,b){return u[4].length===0?0:1}r=w(f),e=_[r]=a[r](f);function p(u){f[12](u)}function $(u){f[13](u)}let v={disabled:f[3],$$slots:{default:[ye]},$$scope:{ctx:f}};return f[0]!==void 0&&(v.dto=f[0]),f[5]!==void 0&&(v.changed=f[5]),o=new fe({props:v}),f[11](o),X.push(()=>z(o,"dto",p)),X.push(()=>z(o,"changed",$)),{c(){i&&i.c(),t=S(),e.c(),l=S(),A(o.$$.fragment)},l(u){i&&i.l(u),t=I(u),e.l(u),l=I(u),R(o.$$.fragment,u)},m(u,b){i&&i.m(u,b),d(u,t,b),_[r].m(u,b),d(u,l,b),C(o,u,b),c=!0},p(u,b){u[7]||i.p(u,b);let F=r;r=w(u),r===F?_[r].p(u,b):(P(),h(_[F],1,1,()=>{_[F]=null}),V(),e=_[r],e?e.p(u,b):(e=_[r]=a[r](u),e.c()),k(e,1),e.m(l.parentNode,l));const g={};b&8&&(g.disabled=u[3]),b&524394&&(g.$$scope={dirty:b,ctx:u}),!s&&b&1&&(s=!0,g.dto=u[0],K(()=>s=!1)),!n&&b&32&&(n=!0,g.changed=u[5],K(()=>n=!1)),o.$set(g)},i(u){c||(k(i),k(e),k(o.$$.fragment,u),c=!0)},o(u){h(i),h(e),h(o.$$.fragment,u),c=!1},d(u){i&&i.d(u),u&&m(t),_[r].d(u),u&&m(l),f[11](null),J(o,u)}}}function _e(f){let t,r;return t=new q({props:{type:"info",$$slots:{default:[pe]},$$scope:{ctx:f}}}),{c(){A(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,l){C(t,e,l),r=!0},p(e,l){const o={};l&524352&&(o.$$scope={dirty:l,ctx:e}),t.$set(o)},i(e){r||(k(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){J(t,e)}}}function pe(f){let t=f[6]("registration.editingAllowedUntil")+"",r,e,l=f[6]("registration.confirmationAfterDeadline")+"",o;return{c(){r=y(t),e=S(),o=y(l)},l(s){r=O(s,t),e=I(s),o=O(s,l)},m(s,n){d(s,r,n),d(s,e,n),d(s,o,n)},p(s,n){n&64&&t!==(t=s[6]("registration.editingAllowedUntil")+"")&&B(r,t),n&64&&l!==(l=s[6]("registration.confirmationAfterDeadline")+"")&&B(o,l)},d(s){s&&m(r),s&&m(e),s&&m(o)}}}function me(f){let t,r;return t=new q({props:{type:"warning",$$slots:{default:[de]},$$scope:{ctx:f}}}),{c(){A(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,l){C(t,e,l),r=!0},p(e,l){const o={};l&524368&&(o.$$scope={dirty:l,ctx:e}),t.$set(o)},i(e){r||(k(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){J(t,e)}}}function ge(f){let t,r;return t=new q({props:{type:"success",$$slots:{default:[be]},$$scope:{ctx:f}}}),{c(){A(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,l){C(t,e,l),r=!0},p(e,l){const o={};l&524352&&(o.$$scope={dirty:l,ctx:e}),t.$set(o)},i(e){r||(k(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){J(t,e)}}}function Z(f){let t,r=f[6](f[16])+"",e;return{c(){t=N("li"),e=y(r),this.h()},l(l){t=D(l,"LI",{class:!0});var o=E(t);e=O(o,r),o.forEach(m),this.h()},h(){L(t,"class","svelte-3a7dix")},m(l,o){d(l,t,o),j(t,e)},p(l,o){o&80&&r!==(r=l[6](l[16])+"")&&B(e,r)},d(l){l&&m(t)}}}function de(f){let t=f[6]("registration.missingForComplete")+"",r,e,l,o=f[4],s=[];for(let n=0;n<o.length;n+=1)s[n]=Z(Y(f,o,n));return{c(){r=y(t),e=S(),l=N("ul");for(let n=0;n<s.length;n+=1)s[n].c()},l(n){r=O(n,t),e=I(n),l=D(n,"UL",{});var c=E(l);for(let i=0;i<s.length;i+=1)s[i].l(c);c.forEach(m)},m(n,c){d(n,r,c),d(n,e,c),d(n,l,c);for(let i=0;i<s.length;i+=1)s[i].m(l,null)},p(n,c){if(c&64&&t!==(t=n[6]("registration.missingForComplete")+"")&&B(r,t),c&80){o=n[4];let i;for(i=0;i<o.length;i+=1){const a=Y(n,o,i);s[i]?s[i].p(a,c):(s[i]=Z(a),s[i].c(),s[i].m(l,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=o.length}},d(n){n&&m(r),n&&m(e),n&&m(l),ne(s,n)}}}function be(f){let t=f[6]("registration.complete")+"",r;return{c(){r=y(t)},l(e){r=O(e,t)},m(e,l){d(e,r,l)},p(e,l){l&64&&t!==(t=e[6]("registration.complete")+"")&&B(r,t)},d(e){e&&m(r)}}}function $e(f){let t;return{c(){t=N("div")},l(r){t=D(r,"DIV",{}),E(t).forEach(m)},m(r,e){d(r,t,e)},p:U,i:U,o:U,d(r){r&&m(t)}}}function he(f){let t,r;return t=new W({props:{type:"outline",$$slots:{default:[ke]},$$scope:{ctx:f}}}),t.$on("click",f[9]),{c(){A(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,l){C(t,e,l),r=!0},p(e,l){const o={};l&524352&&(o.$$scope={dirty:l,ctx:e}),t.$set(o)},i(e){r||(k(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){J(t,e)}}}function ke(f){let t=f[6]("registration.form.cancel")+"",r;return{c(){r=y(t)},l(e){r=O(e,t)},m(e,l){d(e,r,l)},p(e,l){l&64&&t!==(t=e[6]("registration.form.cancel")+"")&&B(r,t)},d(e){e&&m(r)}}}function ve(f){let t,r;return t=new W({props:{type:"primary",$$slots:{default:[we]},$$scope:{ctx:f}}}),t.$on("click",f[10]),{c(){A(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,l){C(t,e,l),r=!0},p(e,l){const o={};l&524360&&(o.$$scope={dirty:l,ctx:e}),t.$set(o)},i(e){r||(k(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){J(t,e)}}}function we(f){let t=(f[3]?f[6]("registration.form.edit"):f[6]("registration.form.save"))+"",r;return{c(){r=y(t)},l(e){r=O(e,t)},m(e,l){d(e,r,l)},p(e,l){l&72&&t!==(t=(e[3]?e[6]("registration.form.edit"):e[6]("registration.form.save"))+"")&&B(r,t)},d(e){e&&m(r)}}}function ye(f){let t,r,e,l,o;const s=[he,$e],n=[];function c(a,_){return a[3]?1:0}t=c(f),r=n[t]=s[t](f);let i=!f[7]&&ve(f);return{c(){r.c(),e=S(),i&&i.c(),l=H()},l(a){r.l(a),e=I(a),i&&i.l(a),l=H()},m(a,_){n[t].m(a,_),d(a,e,_),i&&i.m(a,_),d(a,l,_),o=!0},p(a,_){let w=t;t=c(a),t===w?n[t].p(a,_):(P(),h(n[w],1,1,()=>{n[w]=null}),V(),r=n[t],r?r.p(a,_):(r=n[t]=s[t](a),r.c()),k(r,1),r.m(e.parentNode,e)),a[7]||i.p(a,_)},i(a){o||(k(r),k(i),o=!0)},o(a){h(r),h(i),o=!1},d(a){n[t].d(a),a&&m(e),i&&i.d(a),a&&m(l)}}}function Oe(f){let t,r,e=f[6]("registration.yourRegistration")+"",l,o,s,n,c,i;const a=[ce,ue],_=[];function w(p,$){return p[0]?0:p[2]?1:-1}return~(s=w(f))&&(n=_[s]=a[s](f)),{c(){t=N("h1"),r=N("b"),l=y(e),o=S(),n&&n.c(),c=H(),this.h()},l(p){t=D(p,"H1",{class:!0});var $=E(t);r=D($,"B",{});var v=E(r);l=O(v,e),v.forEach(m),$.forEach(m),o=I(p),n&&n.l(p),c=H(),this.h()},h(){L(t,"class","cover-heading")},m(p,$){d(p,t,$),j(t,r),j(r,l),d(p,o,$),~s&&_[s].m(p,$),d(p,c,$),i=!0},p(p,[$]){(!i||$&64)&&e!==(e=p[6]("registration.yourRegistration")+"")&&B(l,e);let v=s;s=w(p),s===v?~s&&_[s].p(p,$):(n&&(P(),h(_[v],1,1,()=>{_[v]=null}),V()),~s?(n=_[s],n?n.p(p,$):(n=_[s]=a[s](p),n.c()),k(n,1),n.m(c.parentNode,c)):n=null)},i(p){i||(k(n),i=!0)},o(p){h(n),i=!1},d(p){p&&m(t),p&&m(o),~s&&_[s].d(p),p&&m(c)}}}function Be(f,t,r){let e,l;Q(f,T,g=>r(15,e=g)),Q(f,oe,g=>r(6,l=g));let{dto:o=null}=t;ae.set(!0);let s,n,c=!1,i=!1,a=[],_=!1,w=new Date>new Date("Jun 30 2022 23:59:59 GMT+0200");async function p(){if(s.reportValidity("#firstName, #lastName, #email, #dateOfBirth, #country")){r(4,a=s.getInvalid()),console.log(`saving registration ${n}: ${JSON.stringify(o)}`),M(T,e=!0,e);const g=await fetch(new URL(`registration.php?key=${n}`,`${window.location.origin}/api/`).toString(),{method:"POST",body:JSON.stringify(o)});return M(T,e=!1,e),r(5,_=!1),g.status===200}return!1}le(async()=>{if(M(T,e=!0,e),n=window.location.search.substring(1),console.log(`loading registration ${n}`),n==="1")r(0,o=JSON.parse('{"firstName":"Ernst","lastName":"Haft","email":"ernsthaft@web.de","dateOfBirth":"2001-01-11","country":"AX","scoreConfirmations":[true,false,false],"reg_key":"1","proofOfPayment":"proof.pdf","instrumentation":[[false],[false],[false],[false],[false],[false],[false],[true,false],[false,true],[false],[true],[false],[true,true],[false],[false],[false],[false],[false],[false],[true,true,true,true,false,false],[false,false,true,true,false],[true,true,true,true],[true,false,false],[false,false]],"pieceDemo":"","pieceScore":"score.pdf","idCopy":"id.jpeg","pieceTitle":"My piece"}'));else{const g=await fetch(new URL(`registration.php?key=${n}`,`${window.location.origin}/api/`).toString());if(g.status===200){let G=JSON.parse(await g.text());console.log(G),r(0,o=Object.assign(new se,Object.fromEntries(Object.entries(G).filter(([Ne,x])=>x!==null)))),console.log(o)}}M(T,e=!1,e),r(2,c=!0)});const $=()=>r(3,i=!0),v=async()=>{r(3,i=!i&&(!_||await p())),i&&document.getElementById("back").click(),i&&s.closeSubsections()};function u(g){X[g?"unshift":"push"](()=>{s=g,r(1,s)})}function b(g){o=g,r(0,o)}function F(g){_=g,r(5,_)}return f.$$set=g=>{"dto"in g&&r(0,o=g.dto)},f.$$.update=()=>{f.$$.dirty&2&&s&&(r(4,a=s.getInvalid()),r(3,i=!ie))},[o,s,c,i,a,_,l,w,p,$,v,u,b,F]}class je extends ee{constructor(t){super();te(this,t,Be,Oe,re,{dto:0})}}export{je as default};
