var ge=Object.defineProperty;var ee=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var te=(i,t,l)=>t in i?ge(i,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[t]=l,le=(i,t)=>{for(var l in t||(t={}))de.call(t,l)&&te(i,l,t[l]);if(ee)for(var l of ee(t))be.call(t,l)&&te(i,l,t[l]);return i};import{S as he,i as ke,s as $e,ai as we,v as I,j as S,e as P,t as F,k as H,w as j,l as O,c as J,a as V,g as D,d as p,b as Q,x as B,f as b,E as A,h as E,n as w,o as M,p as k,A as C,L as G,u as ye,m as K,X as ve,a0 as re,al as W,N as x,Q as X,a2 as ie,U as oe,ac as Se,ad as Fe,F as Oe,ag as De}from"../../chunks/vendor-e7083a84.js";import{a as Y}from"../../chunks/selectData-dfed3c08.js";import{a as Ee,R as Ne}from"../../chunks/RegistrationForm-ebd141b4.js";import{B as se}from"../../chunks/Button-3573b666.js";import{c as Re,l as q,e as Ie,d as je}from"../../chunks/stores-40c36b6c.js";import{h as Be}from"../../chunks/index-af7243a3.js";function ne(i,t,l){const e=i.slice();return e[21]=t[l],e}function Ce(i){let t,l=i[10]("registration.notfound")+"",e,r,a,c=i[10]("error.goBack")+"",o;return{c(){t=P("div"),e=F(l),r=S(),a=P("a"),o=F(c),this.h()},l(f){t=J(f,"DIV",{class:!0});var n=V(t);e=D(n,l),r=O(n),a=J(n,"A",{href:!0,class:!0});var s=V(a);o=D(s,c),s.forEach(p),n.forEach(p),this.h()},h(){Q(a,"href","/"),Q(a,"class","link"),Q(t,"class","center svelte-pts9xi")},m(f,n){b(f,t,n),A(t,e),A(t,r),A(t,a),A(a,o)},p(f,n){n&1024&&l!==(l=f[10]("registration.notfound")+"")&&E(e,l),n&1024&&c!==(c=f[10]("error.goBack")+"")&&E(o,c)},i:X,o:X,d(f){f&&p(t)}}}function Le(i){let t,l,e,r,a,c,o,f,n,s=!i[11]&&fe(i);const m=[Ae,Ue],d=[];function y(_,$){return _[4].length===0?0:1}l=y(i),e=d[l]=m[l](i);let u=i[5]&&ue(i);function h(_){i[17](_)}function v(_){i[18](_)}let N={disabled:i[3],$$slots:{default:[ze]},$$scope:{ctx:i}};return i[0]!==void 0&&(N.dto=i[0]),i[6]!==void 0&&(N.changed=i[6]),c=new Ne({props:N}),i[16](c),x.push(()=>ie(c,"dto",h)),x.push(()=>ie(c,"changed",v)),{c(){s&&s.c(),t=S(),e.c(),r=S(),u&&u.c(),a=S(),I(c.$$.fragment)},l(_){s&&s.l(_),t=O(_),e.l(_),r=O(_),u&&u.l(_),a=O(_),j(c.$$.fragment,_)},m(_,$){s&&s.m(_,$),b(_,t,$),d[l].m(_,$),b(_,r,$),u&&u.m(_,$),b(_,a,$),B(c,_,$),n=!0},p(_,$){_[11]?s&&(K(),w(s,1,1,()=>{s=null}),M()):s?(s.p(_,$),$&2048&&k(s,1)):(s=fe(_),s.c(),k(s,1),s.m(t.parentNode,t));let z=l;l=y(_),l===z?d[l].p(_,$):(K(),w(d[z],1,1,()=>{d[z]=null}),M(),e=d[l],e?e.p(_,$):(e=d[l]=m[l](_),e.c()),k(e,1),e.m(r.parentNode,r)),_[5]?u?(u.p(_,$),$&32&&k(u,1)):(u=ue(_),u.c(),k(u,1),u.m(a.parentNode,a)):u&&(K(),w(u,1,1,()=>{u=null}),M());const L={};$&8&&(L.disabled=_[3]),$&16781291&&(L.$$scope={dirty:$,ctx:_}),!o&&$&1&&(o=!0,L.dto=_[0],oe(()=>o=!1)),!f&&$&64&&(f=!0,L.changed=_[6],oe(()=>f=!1)),c.$set(L)},i(_){n||(k(s),k(e),k(u),k(c.$$.fragment,_),n=!0)},o(_){w(s),w(e),w(u),w(c.$$.fragment,_),n=!1},d(_){s&&s.d(_),_&&p(t),d[l].d(_),_&&p(r),u&&u.d(_),_&&p(a),i[16](null),C(c,_)}}}function fe(i){let t,l;return t=new Y({props:{type:"info",$$slots:{default:[Te]},$$scope:{ctx:i}}}),{c(){I(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,r){B(t,e,r),l=!0},p(e,r){const a={};r&16778240&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){l||(k(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function Te(i){let t=i[10]("registration.editingAllowedUntil")+"",l,e,r=i[10]("registration.confirmationAfterDeadline")+"",a,c,o,f=i[10]("registration.clickEdit")+"",n;return{c(){l=F(t),e=S(),a=F(r),c=S(),o=new Se,n=H(),this.h()},l(s){l=D(s,t),e=O(s),a=D(s,r),c=O(s),o=Fe(s),n=H(),this.h()},h(){o.a=n},m(s,m){b(s,l,m),b(s,e,m),b(s,a,m),b(s,c,m),o.m(f,s,m),b(s,n,m)},p(s,m){m&1024&&t!==(t=s[10]("registration.editingAllowedUntil")+"")&&E(l,t),m&1024&&r!==(r=s[10]("registration.confirmationAfterDeadline")+"")&&E(a,r),m&1024&&f!==(f=s[10]("registration.clickEdit")+"")&&o.p(f)},d(s){s&&p(l),s&&p(e),s&&p(a),s&&p(c),s&&p(n),s&&o.d()}}}function Ue(i){let t,l;return t=new Y({props:{type:"warning",$$slots:{default:[Pe]},$$scope:{ctx:i}}}),{c(){I(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,r){B(t,e,r),l=!0},p(e,r){const a={};r&16778258&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){l||(k(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function Ae(i){let t,l;return t=new Y({props:{type:"success",$$slots:{default:[He]},$$scope:{ctx:i}}}),{c(){I(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,r){B(t,e,r),l=!0},p(e,r){const a={};r&16778240&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){l||(k(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function ae(i){let t,l=i[10](i[21].labels[0].dataset.label)+"",e,r,a,c;function o(){return i[13](i[21])}return{c(){t=P("li"),e=F(l),r=S(),this.h()},l(f){t=J(f,"LI",{class:!0});var n=V(t);e=D(n,l),r=O(n),n.forEach(p),this.h()},h(){Q(t,"class","svelte-pts9xi")},m(f,n){b(f,t,n),A(t,e),A(t,r),a||(c=Oe(t,"click",o),a=!0)},p(f,n){i=f,n&1040&&l!==(l=i[10](i[21].labels[0].dataset.label)+"")&&E(e,l)},d(f){f&&p(t),a=!1,c()}}}function Pe(i){let t=i[10]("registration.missingForComplete")+"",l,e,r,a=i[4],c=[];for(let o=0;o<a.length;o+=1)c[o]=ae(ne(i,a,o));return{c(){l=F(t),e=S(),r=P("ul");for(let o=0;o<c.length;o+=1)c[o].c()},l(o){l=D(o,t),e=O(o),r=J(o,"UL",{});var f=V(r);for(let n=0;n<c.length;n+=1)c[n].l(f);f.forEach(p)},m(o,f){b(o,l,f),b(o,e,f),b(o,r,f);for(let n=0;n<c.length;n+=1)c[n].m(r,null)},p(o,f){if(f&1024&&t!==(t=o[10]("registration.missingForComplete")+"")&&E(l,t),f&1042){a=o[4];let n;for(n=0;n<a.length;n+=1){const s=ne(o,a,n);c[n]?c[n].p(s,f):(c[n]=ae(s),c[n].c(),c[n].m(r,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=a.length}},d(o){o&&p(l),o&&p(e),o&&p(r),De(c,o)}}}function He(i){let t=i[10]("registration.complete")+"",l;return{c(){l=F(t)},l(e){l=D(e,t)},m(e,r){b(e,l,r)},p(e,r){r&1024&&t!==(t=e[10]("registration.complete")+"")&&E(l,t)},d(e){e&&p(l)}}}function ue(i){let t,l;return t=new Y({props:{type:"error",$$slots:{default:[Je]},$$scope:{ctx:i}}}),{c(){I(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,r){B(t,e,r),l=!0},p(e,r){const a={};r&16778272&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){l||(k(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function Je(i){let t=i[10](...i[5])+"",l;return{c(){l=F(t)},l(e){l=D(e,t)},m(e,r){b(e,l,r)},p(e,r){r&1056&&t!==(t=e[10](...e[5])+"")&&E(l,t)},d(e){e&&p(l)}}}function Ve(i){let t;return{c(){t=P("div")},l(l){t=J(l,"DIV",{}),V(t).forEach(p)},m(l,e){b(l,t,e)},p:X,i:X,o:X,d(l){l&&p(t)}}}function Me(i){let t,l;return t=new se({props:{type:"outline",disabled:i[9],$$slots:{default:[Ke]},$$scope:{ctx:i}}}),t.$on("click",i[14]),{c(){I(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,r){B(t,e,r),l=!0},p(e,r){const a={};r&512&&(a.disabled=e[9]),r&16778240&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){l||(k(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function Ke(i){let t=i[10]("registration.form.cancel")+"",l;return{c(){l=F(t)},l(e){l=D(e,t)},m(e,r){b(e,l,r)},p(e,r){r&1024&&t!==(t=e[10]("registration.form.cancel")+"")&&E(l,t)},d(e){e&&p(l)}}}function ce(i){let t,l;return t=new se({props:{type:"primary",disabled:i[9],$$slots:{default:[qe]},$$scope:{ctx:i}}}),t.$on("click",i[15]),{c(){I(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,r){B(t,e,r),l=!0},p(e,r){const a={};r&512&&(a.disabled=e[9]),r&16778248&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){l||(k(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function qe(i){let t=(i[3]?i[10]("registration.form.edit"):i[10]("registration.form.save"))+"",l;return{c(){l=F(t)},l(e){l=D(e,t)},m(e,r){b(e,l,r)},p(e,r){r&1032&&t!==(t=(e[3]?e[10]("registration.form.edit"):e[10]("registration.form.save"))+"")&&E(l,t)},d(e){e&&p(l)}}}function ze(i){let t,l,e,r,a;const c=[Me,Ve],o=[];function f(s,m){return s[3]?1:0}t=f(i),l=o[t]=c[t](i);let n=(!i[11]||i[8])&&ce(i);return{c(){l.c(),e=S(),n&&n.c(),r=H()},l(s){l.l(s),e=O(s),n&&n.l(s),r=H()},m(s,m){o[t].m(s,m),b(s,e,m),n&&n.m(s,m),b(s,r,m),a=!0},p(s,m){let d=t;t=f(s),t===d?o[t].p(s,m):(K(),w(o[d],1,1,()=>{o[d]=null}),M(),l=o[t],l?l.p(s,m):(l=o[t]=c[t](s),l.c()),k(l,1),l.m(e.parentNode,e)),!s[11]||s[8]?n?(n.p(s,m),m&2304&&k(n,1)):(n=ce(s),n.c(),k(n,1),n.m(r.parentNode,r)):n&&(K(),w(n,1,1,()=>{n=null}),M())},i(s){a||(k(l),k(n),a=!0)},o(s){w(l),w(n),a=!1},d(s){o[t].d(s),s&&p(e),n&&n.d(s),s&&p(r)}}}function Qe(i){let t,l,e,r=i[10]("registration.yourRegistration")+"",a,c,o,f,n,s;t=new we({props:{title:i[10]("registration.meta.yourRegistrationTitle"),description:i[10]("registration.meta.description")}});const m=[Le,Ce],d=[];function y(u,h){return u[0]?0:u[2]?1:-1}return~(o=y(i))&&(f=d[o]=m[o](i)),{c(){I(t.$$.fragment),l=S(),e=P("h1"),a=F(r),c=S(),f&&f.c(),n=H(),this.h()},l(u){j(t.$$.fragment,u),l=O(u),e=J(u,"H1",{class:!0});var h=V(e);a=D(h,r),h.forEach(p),c=O(u),f&&f.l(u),n=H(),this.h()},h(){Q(e,"class","cover-heading")},m(u,h){B(t,u,h),b(u,l,h),b(u,e,h),A(e,a),b(u,c,h),~o&&d[o].m(u,h),b(u,n,h),s=!0},p(u,[h]){const v={};h&1024&&(v.title=u[10]("registration.meta.yourRegistrationTitle")),h&1024&&(v.description=u[10]("registration.meta.description")),t.$set(v),(!s||h&1024)&&r!==(r=u[10]("registration.yourRegistration")+"")&&E(a,r);let N=o;o=y(u),o===N?~o&&d[o].p(u,h):(f&&(K(),w(d[N],1,1,()=>{d[N]=null}),M()),~o?(f=d[o],f?f.p(u,h):(f=d[o]=m[o](u),f.c()),k(f,1),f.m(n.parentNode,n)):f=null)},i(u){s||(k(t.$$.fragment,u),k(f),s=!0)},o(u){w(t.$$.fragment,u),w(f),s=!1},d(u){C(t,u),u&&p(l),u&&p(e),u&&p(c),~o&&d[o].d(u),u&&p(n)}}}function We(i,t,l){let e,r,a,c;G(i,q,g=>l(9,e=g)),G(i,Ie,g=>l(20,r=g)),G(i,ve,g=>l(10,a=g)),G(i,je,g=>l(11,c=g));let{dto:o=null}=t;Re.set(!0);let f,n,s=!1,m=!1,d=[],y=null,u=!1,h=null,v;async function N(){if(l(5,y=null),await re(),f.reportValidity("#firstName, #lastName, #email, #dateOfBirth, #country, #idCopy, #pieceScore, #pieceDemo, #proofOfPayment")){console.log(`saving registration ${n}`),W(q,e=!0,e);const g="registration.php"+(v?`?admin=${v}`:"");let T=await fetch(new URL(g,r),{method:"POST",body:JSON.stringify(o)}),U=await T.text();if(T.ok&&U==="Registration successfully updated."){let R=new FormData;R.append("reg_key",n);for(let Z of Object.entries(o.files))Z[1]&&R.append(Z[0],Z[1][0]);const pe="files.php"+(v?`?admin=${v}`:"");if(T=await fetch(new URL(pe,r),{method:"POST",body:R}),U=await T.text(),T.ok&&U==="File upload successful.")return l(0,o.files.idCopyFile=void 0,o),l(0,o.files.pieceDemoFile=void 0,o),l(0,o.files.pieceScoreFile=void 0,o),l(0,o.files.proofOfPaymentFile=void 0,o),l(6,u=!1),W(q,e=!1,e),l(4,d=f.getInvalid()),!0}if(U==="Invalid form.")l(5,y=["registration.form.error.invalidForm",{}]);else if(U.startsWith("Invalid file type or size:")){const R=U.split(": ").pop();l(5,y=["registration.form.error.fileError",{values:{number:R.split(",").length,files:R}}])}else l(5,y=["registration.form.error.errorOccurred",{}]);W(q,e=!1,e)}return!1}ye(async()=>{if(W(q,e=!0,e),n=window.location.search.substring(1),console.log(`loading registration ${n}`),n==="1")l(0,o=JSON.parse('{"reg_key":"1","firstName":"Ernst","lastName":"Haft","email":"ernsthaft@web.de","dateOfBirth":"2001-01-11","country":"DE","pieceTitle":"My piece","pieceDemo":"","pieceScore":"score.pdf","idCopy":"","instrumentation":[[true],[true],[true],[true],[true],[true],[true],[true,true],[false,true],[false],[true],[false],[true,true],[false],[false],[false],[false],[false],[true],[true,true,true,true,true,true],[true,true,true,true,false],[true,true,true,true],[true,false,false],[false,false]],"scoreConfirmations":[true,false,false],"proofOfPayment":"","files":{"idCopyFile":null,"pieceScoreFile":null,"pieceDemoFile":null,"proofOfPaymentFile":null}}'));else{const g=await fetch(new URL(`registration.php?key=${n}`,r));if(g.ok){const T=await g.json();l(0,o=Object.assign(new Ee,Object.fromEntries(Object.entries(T).filter(([U,R])=>R!==null))))}}W(q,e=!1,e),l(2,s=!0),await re(),f&&(l(4,d=f.getInvalid()),l(3,m=!0)),l(8,v=localStorage.getItem("adminKey"))});const _=g=>{g.closest("#submissionSection")&&f.toggleSubsection("#submissionSection","open"),g.closest("#paymentSection")&&f.toggleSubsection("#paymentSection","open"),g.labels[0].scrollIntoView({behavior:"smooth",block:"center"}),Be(g.labels[0])},$=()=>{l(3,m=!0),l(5,y=null),l(0,o=le({},h))},z=async()=>{l(3,m=!m&&(!u||await N())),(m||y)&&document.getElementById("back").click(),m&&f.closeSubsections(),l(7,h=!m&&!y?JSON.parse(JSON.stringify(o)):h)};function L(g){x[g?"unshift":"push"](()=>{f=g,l(1,f)})}function _e(g){o=g,l(0,o)}function me(g){u=g,l(6,u)}return i.$$set=g=>{"dto"in g&&l(0,o=g.dto)},[o,f,s,m,d,y,u,h,v,e,a,c,N,_,$,z,L,_e,me]}class lt extends he{constructor(t){super();ke(this,t,We,Qe,$e,{dto:0})}}export{lt as default};
