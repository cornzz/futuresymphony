import{S as te,i as re,s as ie,k as K,f as h,m as J,n as R,o as W,p as v,d,J as C,M as ne,X as se,a5 as Q,e as P,j as T,c as U,l as y,a as O,b as z,E as Y,t as I,g as S,F as G,G as le,h as N,H as Z,R as H,a6 as M,v as D,w as j,x as B,a7 as V,A as F,a0 as ce,a8 as oe,a9 as fe}from"../../chunks/vendor-234d3165.js";import{I as ge,a as x,R as be,b as de}from"../../chunks/RegistrationForm-ad6a8df9.js";import{B as ae}from"../../chunks/Button-eb0ce04c.js";import{l as X}from"../../chunks/stores-1f5d331d.js";import"../../chunks/index-78e829ef.js";const $e=!1;function we(n){let t,r,e,i,o,_;const m=[ve,he],f=[];function u(s,a){return s[3]?1:0}return i=u(n),o=f[i]=m[i](n),{c(){t=P("hr"),r=T(),e=P("div"),o.c(),this.h()},l(s){t=U(s,"HR",{}),r=y(s),e=U(s,"DIV",{class:!0});var a=O(e);o.l(a),a.forEach(d),this.h()},h(){z(e,"class","resend svelte-rart3l"),Y(e,"success",n[3])},m(s,a){h(s,t,a),h(s,r,a),h(s,e,a),f[i].m(e,null),_=!0},p(s,a){let $=i;i=u(s),i===$?f[i].p(s,a):(J(),R(f[$],1,1,()=>{f[$]=null}),W(),o=f[i],o?o.p(s,a):(o=f[i]=m[i](s),o.c()),v(o,1),o.m(e,null)),a&8&&Y(e,"success",s[3])},i(s){_||(v(o),_=!0)},o(s){R(o),_=!1},d(s){s&&d(t),s&&d(r),s&&d(e),f[i].d()}}}function ke(n){let t=n[5](`registration.resend.${n[1]}`)+"",r,e,i,o=n[5]("registration.resend.here")+"",_,m,f,u;return{c(){r=I(t),e=T(),i=P("span"),_=I(o),m=I("."),this.h()},l(s){r=S(s,t),e=y(s),i=U(s,"SPAN",{class:!0});var a=O(i);_=S(a,o),a.forEach(d),m=S(s,"."),this.h()},h(){z(i,"class","link")},m(s,a){h(s,r,a),h(s,e,a),h(s,i,a),G(i,_),h(s,m,a),f||(u=le(i,"click",n[9]),f=!0)},p(s,a){a&34&&t!==(t=s[5](`registration.resend.${s[1]}`)+"")&&N(r,t),a&32&&o!==(o=s[5]("registration.resend.here")+"")&&N(_,o)},i:Z,o:Z,d(s){s&&d(r),s&&d(e),s&&d(i),s&&d(m),f=!1,u()}}}function he(n){let t=n[5]("registration.resend.success")+"",r,e,i=n[5]("registration.resend.sendAgain")+"",o,_,m,f=n[5]("registration.resend.here")+"",u,s,a=(n[4]>0?`(${Math.floor(n[4]/60)}:${("0"+n[4]%60).slice(-2)})`:"")+"",$,c,p;return{c(){r=I(t),e=T(),o=I(i),_=T(),m=P("span"),u=I(f),s=I(`.
            `),$=I(a),this.h()},l(g){r=S(g,t),e=y(g),o=S(g,i),_=y(g),m=U(g,"SPAN",{class:!0});var k=O(m);u=S(k,f),k.forEach(d),s=S(g,`.
            `),$=S(g,a),this.h()},h(){z(m,"class","link svelte-rart3l"),Y(m,"disabled",n[4]>0)},m(g,k){h(g,r,k),h(g,e,k),h(g,o,k),h(g,_,k),h(g,m,k),G(m,u),h(g,s,k),h(g,$,k),c||(p=le(m,"click",n[11]),c=!0)},p(g,k){k&32&&t!==(t=g[5]("registration.resend.success")+"")&&N(r,t),k&32&&i!==(i=g[5]("registration.resend.sendAgain")+"")&&N(o,i),k&32&&f!==(f=g[5]("registration.resend.here")+"")&&N(u,f),k&16&&Y(m,"disabled",g[4]>0),k&16&&a!==(a=(g[4]>0?`(${Math.floor(g[4]/60)}:${("0"+g[4]%60).slice(-2)})`:"")+"")&&N($,a)},i:Z,o:Z,d(g){g&&d(r),g&&d(e),g&&d(o),g&&d(_),g&&d(m),g&&d(s),g&&d($),c=!1,p()}}}function ve(n){let t,r=n[5]("registration.resend.yourEmail")+"",e,i,o,_,m,f,u,s;function a(c){n[10](c)}let $={type:"email",name:"resendEmail"};return n[0]!==void 0&&($.value=n[0]),_=new ge({props:$}),H.push(()=>M(_,"value",a)),u=new ae({props:{type:"primary",slim:!0,$$slots:{default:[Ee]},$$scope:{ctx:n}}}),u.$on("click",n[6]),{c(){t=P("span"),e=I(r),i=I(":"),o=T(),D(_.$$.fragment),f=T(),D(u.$$.fragment),this.h()},l(c){t=U(c,"SPAN",{class:!0});var p=O(t);e=S(p,r),i=S(p,":"),p.forEach(d),o=y(c),j(_.$$.fragment,c),f=y(c),j(u.$$.fragment,c),this.h()},h(){z(t,"class","svelte-rart3l")},m(c,p){h(c,t,p),G(t,e),G(t,i),h(c,o,p),B(_,c,p),h(c,f,p),B(u,c,p),s=!0},p(c,p){(!s||p&32)&&r!==(r=c[5]("registration.resend.yourEmail")+"")&&N(e,r);const g={};!m&&p&1&&(m=!0,g.value=c[0],V(()=>m=!1)),_.$set(g);const k={};p&65568&&(k.$$scope={dirty:p,ctx:c}),u.$set(k)},i(c){s||(v(_.$$.fragment,c),v(u.$$.fragment,c),s=!0)},o(c){R(_.$$.fragment,c),R(u.$$.fragment,c),s=!1},d(c){c&&d(t),c&&d(o),F(_,c),c&&d(f),F(u,c)}}}function Ee(n){let t=n[5]("registration.form.submit")+"",r;return{c(){r=I(t)},l(e){r=S(e,t)},m(e,i){h(e,r,i)},p(e,i){i&32&&t!==(t=e[5]("registration.form.submit")+"")&&N(r,t)},d(e){e&&d(r)}}}function Ae(n){let t,r,e,i;const o=[ke,we],_=[];function m(f,u){return f[2]?1:0}return t=m(n),r=_[t]=o[t](n),{c(){r.c(),e=K()},l(f){r.l(f),e=K()},m(f,u){_[t].m(f,u),h(f,e,u),i=!0},p(f,[u]){let s=t;t=m(f),t===s?_[t].p(f,u):(J(),R(_[s],1,1,()=>{_[s]=null}),W(),r=_[t],r?r.p(f,u):(r=_[t]=o[t](f),r.c()),v(r,1),r.m(e.parentNode,e))},i(f){i||(v(r),i=!0)},o(f){R(r),i=!1},d(f){_[t].d(f),f&&d(e)}}}function Re(n,t,r){let e,i,o;C(n,X,b=>r(13,e=b)),C(n,ne,b=>r(14,i=b)),C(n,se,b=>r(5,o=b));let{type:_}=t,{error:m}=t,{warning:f}=t,{email:u=""}=t,s=!1,a=!1,$=0,c;function p(b){r(4,$=new Date(new Date().getTime()+b).getTime()-new Date().getTime()),c=setInterval(()=>{$>0?r(4,$--,$):clearInterval(c)},1e3)}async function g(){r(7,m=""),r(8,f="");const b=document.getElementById("resendEmail");if(u||b&&b.reportValidity()){Q(X,e=!0,e);let A=new URLSearchParams({email:u,lang:i});const l=await fetch(new URL("new_registration.php?"+A,`${window.location.origin}/api/`).toString());if(l.status===200)r(3,a=!0),p(5*60);else{let w=await l.text();w==="Email not found."?r(7,m="registration.resend.notFound"):w==="Error sending confirmation email."?r(7,m="registration.form.error.emailError"):w==="Too many requests."?r(8,f="registration.resend.pleaseWait"):r(7,m="registration.form.error.errorOccurred"),r(3,a=!1)}Q(X,e=!1,e)}}const k=()=>r(2,s=!s);function q(b){u=b,r(0,u)}const E=()=>$<=0&&g();return n.$$set=b=>{"type"in b&&r(1,_=b.type),"error"in b&&r(7,m=b.error),"warning"in b&&r(8,f=b.warning),"email"in b&&r(0,u=b.email)},[u,_,s,a,$,o,g,m,f,k,q,E]}class ue extends te{constructor(t){super();re(this,t,Re,Ae,ie,{type:1,error:7,warning:8,email:0})}}function Ie(n){let t,r;return t=new x({props:{type:"info",$$slots:{default:[Te]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,i){B(t,e,i),r=!0},p(e,i){const o={};i&262232&&(o.$$scope={dirty:i,ctx:e}),t.$set(o)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){R(t.$$.fragment,e),r=!1},d(e){F(t,e)}}}function Se(n){let t,r;return t=new x({props:{type:"success",$$slots:{default:[ye]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,i){B(t,e,i),r=!0},p(e,i){const o={};i&262233&&(o.$$scope={dirty:i,ctx:e}),t.$set(o)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){R(t.$$.fragment,e),r=!1},d(e){F(t,e)}}}function Te(n){let t,r=n[6]("registration.firstStep")+"",e,i=n[6]("registration.editingAllowedUntil")+"",o,_,m,f,u,s;function a(p){n[10](p)}function $(p){n[11](p)}let c={type:"alreadyRegistered"};return n[4]!==void 0&&(c.error=n[4]),n[3]!==void 0&&(c.warning=n[3]),m=new ue({props:c}),H.push(()=>M(m,"error",a)),H.push(()=>M(m,"warning",$)),{c(){t=new oe,e=T(),o=I(i),_=T(),D(m.$$.fragment),this.h()},l(p){t=fe(p),e=y(p),o=S(p,i),_=y(p),j(m.$$.fragment,p),this.h()},h(){t.a=e},m(p,g){t.m(r,p,g),h(p,e,g),h(p,o,g),h(p,_,g),B(m,p,g),s=!0},p(p,g){(!s||g&64)&&r!==(r=p[6]("registration.firstStep")+"")&&t.p(r),(!s||g&64)&&i!==(i=p[6]("registration.editingAllowedUntil")+"")&&N(o,i);const k={};!f&&g&16&&(f=!0,k.error=p[4],V(()=>f=!1)),!u&&g&8&&(u=!0,k.warning=p[3],V(()=>u=!1)),m.$set(k)},i(p){s||(v(m.$$.fragment,p),s=!0)},o(p){R(m.$$.fragment,p),s=!1},d(p){p&&t.d(),p&&d(e),p&&d(o),p&&d(_),F(m,p)}}}function ye(n){let t,r=n[6]("registration.success",{values:{email:n[0].email}})+"",e,i,o,_,m;function f(a){n[8](a)}function u(a){n[9](a)}let s={type:"didNotReceive",email:n[0].email};return n[4]!==void 0&&(s.error=n[4]),n[3]!==void 0&&(s.warning=n[3]),i=new ue({props:s}),H.push(()=>M(i,"error",f)),H.push(()=>M(i,"warning",u)),{c(){t=new oe,e=T(),D(i.$$.fragment),this.h()},l(a){t=fe(a),e=y(a),j(i.$$.fragment,a),this.h()},h(){t.a=e},m(a,$){t.m(r,a,$),h(a,e,$),B(i,a,$),m=!0},p(a,$){(!m||$&65)&&r!==(r=a[6]("registration.success",{values:{email:a[0].email}})+"")&&t.p(r);const c={};$&1&&(c.email=a[0].email),!o&&$&16&&(o=!0,c.error=a[4],V(()=>o=!1)),!_&&$&8&&(_=!0,c.warning=a[3],V(()=>_=!1)),i.$set(c)},i(a){m||(v(i.$$.fragment,a),m=!0)},o(a){R(i.$$.fragment,a),m=!1},d(a){a&&t.d(),a&&d(e),F(i,a)}}}function _e(n){let t,r;return t=new x({props:{type:"warning",$$slots:{default:[Ne]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,i){B(t,e,i),r=!0},p(e,i){const o={};i&262216&&(o.$$scope={dirty:i,ctx:e}),t.$set(o)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){R(t.$$.fragment,e),r=!1},d(e){F(t,e)}}}function Ne(n){let t=n[6](n[3])+"",r;return{c(){r=I(t)},l(e){r=S(e,t)},m(e,i){h(e,r,i)},p(e,i){i&72&&t!==(t=e[6](e[3])+"")&&N(r,t)},d(e){e&&d(r)}}}function me(n){let t,r;return t=new x({props:{type:"error",$$slots:{default:[De]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,i){B(t,e,i),r=!0},p(e,i){const o={};i&262224&&(o.$$scope={dirty:i,ctx:e}),t.$set(o)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){R(t.$$.fragment,e),r=!1},d(e){F(t,e)}}}function De(n){let t=n[6](n[4])+"",r;return{c(){r=I(t)},l(e){r=S(e,t)},m(e,i){h(e,r,i)},p(e,i){i&80&&t!==(t=e[6](e[4])+"")&&N(r,t)},d(e){e&&d(r)}}}function pe(n){let t,r,e,i;function o(f){n[14](f)}function _(f){n[15](f)}let m={newRegistration:!0,$$slots:{default:[Be]},$$scope:{ctx:n}};return n[0]!==void 0&&(m.dto=n[0]),n[2]!==void 0&&(m.regulationsAccepted=n[2]),t=new be({props:m}),n[13](t),H.push(()=>M(t,"dto",o)),H.push(()=>M(t,"regulationsAccepted",_)),{c(){D(t.$$.fragment)},l(f){j(t.$$.fragment,f)},m(f,u){B(t,f,u),i=!0},p(f,u){const s={};u&262212&&(s.$$scope={dirty:u,ctx:f}),!r&&u&1&&(r=!0,s.dto=f[0],V(()=>r=!1)),!e&&u&4&&(e=!0,s.regulationsAccepted=f[2],V(()=>e=!1)),t.$set(s)},i(f){i||(v(t.$$.fragment,f),i=!0)},o(f){R(t.$$.fragment,f),i=!1},d(f){n[13](null),F(t,f)}}}function je(n){let t=n[6]("registration.form.submit")+"",r;return{c(){r=I(t)},l(e){r=S(e,t)},m(e,i){h(e,r,i)},p(e,i){i&64&&t!==(t=e[6]("registration.form.submit")+"")&&N(r,t)},d(e){e&&d(r)}}}function Be(n){let t,r,e,i;return e=new ae({props:{type:"primary",disabled:!n[2],$$slots:{default:[je]},$$scope:{ctx:n}}}),e.$on("click",n[12]),{c(){t=P("div"),r=T(),D(e.$$.fragment)},l(o){t=U(o,"DIV",{}),O(t).forEach(d),r=y(o),j(e.$$.fragment,o)},m(o,_){h(o,t,_),h(o,r,_),B(e,o,_),i=!0},p(o,_){const m={};_&4&&(m.disabled=!o[2]),_&262208&&(m.$$scope={dirty:_,ctx:o}),e.$set(m)},i(o){i||(v(e.$$.fragment,o),i=!0)},o(o){R(e.$$.fragment,o),i=!1},d(o){o&&d(t),o&&d(r),F(e,o)}}}function Fe(n){let t,r,e,i,o=n[6]("registration.title")+"",_,m,f,u,s,a,$,c,p;t=new ce({props:{title:n[6]("registration.meta.title"),description:n[6]("registration.meta.description")}});const g=[Se,Ie],k=[];function q(l,w){return l[5]?0:1}f=q(n),u=k[f]=g[f](n);let E=n[3]&&_e(n),b=n[4]&&me(n),A=!n[5]&&pe(n);return{c(){D(t.$$.fragment),r=T(),e=P("h1"),i=P("b"),_=I(o),m=T(),u.c(),s=T(),E&&E.c(),a=T(),b&&b.c(),$=T(),A&&A.c(),c=K(),this.h()},l(l){j(t.$$.fragment,l),r=y(l),e=U(l,"H1",{class:!0});var w=O(e);i=U(w,"B",{});var L=O(i);_=S(L,o),L.forEach(d),w.forEach(d),m=y(l),u.l(l),s=y(l),E&&E.l(l),a=y(l),b&&b.l(l),$=y(l),A&&A.l(l),c=K(),this.h()},h(){z(e,"class","cover-heading")},m(l,w){B(t,l,w),h(l,r,w),h(l,e,w),G(e,i),G(i,_),h(l,m,w),k[f].m(l,w),h(l,s,w),E&&E.m(l,w),h(l,a,w),b&&b.m(l,w),h(l,$,w),A&&A.m(l,w),h(l,c,w),p=!0},p(l,[w]){const L={};w&64&&(L.title=l[6]("registration.meta.title")),w&64&&(L.description=l[6]("registration.meta.description")),t.$set(L),(!p||w&64)&&o!==(o=l[6]("registration.title")+"")&&N(_,o);let ee=f;f=q(l),f===ee?k[f].p(l,w):(J(),R(k[ee],1,1,()=>{k[ee]=null}),W(),u=k[f],u?u.p(l,w):(u=k[f]=g[f](l),u.c()),v(u,1),u.m(s.parentNode,s)),l[3]?E?(E.p(l,w),w&8&&v(E,1)):(E=_e(l),E.c(),v(E,1),E.m(a.parentNode,a)):E&&(J(),R(E,1,1,()=>{E=null}),W()),l[4]?b?(b.p(l,w),w&16&&v(b,1)):(b=me(l),b.c(),v(b,1),b.m($.parentNode,$)):b&&(J(),R(b,1,1,()=>{b=null}),W()),l[5]?A&&(J(),R(A,1,1,()=>{A=null}),W()):A?(A.p(l,w),w&32&&v(A,1)):(A=pe(l),A.c(),v(A,1),A.m(c.parentNode,c))},i(l){p||(v(t.$$.fragment,l),v(u),v(E),v(b),v(A),p=!0)},o(l){R(t.$$.fragment,l),R(u),R(E),R(b),R(A),p=!1},d(l){F(t,l),l&&d(r),l&&d(e),l&&d(m),k[f].d(l),l&&d(s),E&&E.d(l),l&&d(a),b&&b.d(l),l&&d($),A&&A.d(l),l&&d(c)}}}function Pe(n,t,r){let e,i,o;C(n,X,l=>r(16,e=l)),C(n,ne,l=>r(17,i=l)),C(n,se,l=>r(6,o=l));let{dto:_=new de}=t,m,f=$e,u="",s="",a=!1;async function $(){if(r(4,s=""),r(3,u=""),m.reportValidity()){Q(X,e=!0,e),r(0,_.lang=i,_);const l=await fetch(new URL("new_registration.php",`${window.location.origin}/api/`).toString(),{method:"POST",body:JSON.stringify(_)});if(l.status===200)r(5,a=!0),localStorage.removeItem("newRegistrationDto");else{let w=await l.text();w==="Email already used."?r(3,u="registration.form.error.emailUsed"):w==="Invalid form."?r(4,s="registration.form.error.invalidForm"):w==="Error sending confirmation email."?r(4,s="registration.form.error.emailError"):w==="Too many requests."?r(3,u="registration.form.error.pleaseWait"):r(4,s="registration.form.error.errorOccurred")}Q(X,e=!1,e)}}function c(l){s=l,r(4,s)}function p(l){u=l,r(3,u)}function g(l){s=l,r(4,s)}function k(l){u=l,r(3,u)}const q=()=>$();function E(l){H[l?"unshift":"push"](()=>{m=l,r(1,m)})}function b(l){_=l,r(0,_)}function A(l){f=l,r(2,f)}return n.$$set=l=>{"dto"in l&&r(0,_=l.dto)},[_,m,f,u,s,a,o,$,c,p,g,k,q,E,b,A]}class qe extends te{constructor(t){super();re(this,t,Pe,Fe,ie,{dto:0})}}export{qe as default};
