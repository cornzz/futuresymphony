import{S as x,i as ee,s as te,e as E,t as v,j as J,k as M,c as I,a as B,g as y,d as m,l as A,b as O,f as b,F as R,h as U,n as k,o as T,p as $,J as V,u as oe,m as Y,X as ne,a2 as H,Q as q,H as N,a3 as P,v as L,w as C,x as F,a4 as Q,A as j,a0 as re}from"../../chunks/vendor-d9d57f64.js";import{a as le,B as X,I as z}from"../../chunks/Button-39c9f27a.js";import{l as D,c as se}from"../../chunks/stores-b871fb0f.js";function G(s,e,t){const o=s.slice();return o[17]=e[t],o}function ie(s){let e,t,o,n=s[7]("error.goBack")+"",l;return{c(){e=E("div"),t=v(`Registration not found.
        `),o=E("a"),l=v(n),this.h()},l(i){e=I(i,"DIV",{class:!0});var r=B(e);t=y(r,`Registration not found.
        `),o=I(r,"A",{href:!0,class:!0});var u=B(o);l=y(u,n),u.forEach(m),r.forEach(m),this.h()},h(){O(o,"href","/"),O(o,"class","link"),O(e,"class","center svelte-1k59lku")},m(i,r){b(i,e,r),R(e,t),R(e,o),R(o,l)},p(i,r){r&128&&n!==(n=i[7]("error.goBack")+"")&&U(l,n)},i:N,o:N,d(i){i&&m(e)}}}function ae(s){let e,t,o,n,l,i,r;const u=[ce,fe],f=[];function _(a,p){return a[5].length===0?0:1}e=_(s),t=f[e]=u[e](s);function d(a){s[12](a)}function h(a){s[13](a)}let c={disabled:s[4],$$slots:{default:[be]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.dto=s[0]),s[6]!==void 0&&(c.changed=s[6]),n=new le({props:c}),s[11](n),q.push(()=>P(n,"dto",d)),q.push(()=>P(n,"changed",h)),{c(){t.c(),o=J(),L(n.$$.fragment)},l(a){t.l(a),o=A(a),C(n.$$.fragment,a)},m(a,p){f[e].m(a,p),b(a,o,p),F(n,a,p),r=!0},p(a,p){let S=e;e=_(a),e===S?f[e].p(a,p):(Y(),k(f[S],1,1,()=>{f[S]=null}),T(),t=f[e],t?t.p(a,p):(t=f[e]=u[e](a),t.c()),$(t,1),t.m(o.parentNode,o));const w={};p&16&&(w.disabled=a[4]),p&1048664&&(w.$$scope={dirty:p,ctx:a}),!l&&p&1&&(l=!0,w.dto=a[0],Q(()=>l=!1)),!i&&p&64&&(i=!0,w.changed=a[6],Q(()=>i=!1)),n.$set(w)},i(a){r||($(t),$(n.$$.fragment,a),r=!0)},o(a){k(t),k(n.$$.fragment,a),r=!1},d(a){f[e].d(a),a&&m(o),s[11](null),j(n,a)}}}function fe(s){let e,t;return e=new z({props:{type:"warning",$$slots:{default:[ue]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(o){C(e.$$.fragment,o)},m(o,n){F(e,o,n),t=!0},p(o,n){const l={};n&1048608&&(l.$$scope={dirty:n,ctx:o}),e.$set(l)},i(o){t||($(e.$$.fragment,o),t=!0)},o(o){k(e.$$.fragment,o),t=!1},d(o){j(e,o)}}}function ce(s){let e,t;return e=new z({props:{type:"success",$$slots:{default:[_e]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(o){C(e.$$.fragment,o)},m(o,n){F(e,o,n),t=!0},p(o,n){const l={};n&1048576&&(l.$$scope={dirty:n,ctx:o}),e.$set(l)},i(o){t||($(e.$$.fragment,o),t=!0)},o(o){k(e.$$.fragment,o),t=!1},d(o){j(e,o)}}}function K(s){let e,t=s[17]+"",o;return{c(){e=E("li"),o=v(t)},l(n){e=I(n,"LI",{});var l=B(e);o=y(l,t),l.forEach(m)},m(n,l){b(n,e,l),R(e,o)},p(n,l){l&32&&t!==(t=n[17]+"")&&U(o,t)},d(n){n&&m(e)}}}function ue(s){let e,t,o=s[5],n=[];for(let l=0;l<o.length;l+=1)n[l]=K(G(s,o,l));return{c(){e=v(`Following fields are missing for your registration to be complete:
            `),t=E("ul");for(let l=0;l<n.length;l+=1)n[l].c()},l(l){e=y(l,`Following fields are missing for your registration to be complete:
            `),t=I(l,"UL",{});var i=B(t);for(let r=0;r<n.length;r+=1)n[r].l(i);i.forEach(m)},m(l,i){b(l,e,i),b(l,t,i);for(let r=0;r<n.length;r+=1)n[r].m(t,null)},p(l,i){if(i&32){o=l[5];let r;for(r=0;r<o.length;r+=1){const u=G(l,o,r);n[r]?n[r].p(u,i):(n[r]=K(u),n[r].c(),n[r].m(t,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=o.length}},d(l){l&&m(e),l&&m(t),re(n,l)}}}function _e(s){let e;return{c(){e=v("Your registration is complete!")},l(t){e=y(t,"Your registration is complete!")},m(t,o){b(t,e,o)},d(t){t&&m(e)}}}function pe(s){let e;return{c(){e=E("div")},l(t){e=I(t,"DIV",{}),B(e).forEach(m)},m(t,o){b(t,e,o)},p:N,i:N,o:N,d(t){t&&m(e)}}}function me(s){let e,t;return e=new X({props:{type:"outline",$$slots:{default:[de]},$$scope:{ctx:s}}}),e.$on("click",s[9]),{c(){L(e.$$.fragment)},l(o){C(e.$$.fragment,o)},m(o,n){F(e,o,n),t=!0},p(o,n){const l={};n&1048576&&(l.$$scope={dirty:n,ctx:o}),e.$set(l)},i(o){t||($(e.$$.fragment,o),t=!0)},o(o){k(e.$$.fragment,o),t=!1},d(o){j(e,o)}}}function de(s){let e;return{c(){e=v("Cancel")},l(t){e=y(t,"Cancel")},m(t,o){b(t,e,o)},d(t){t&&m(e)}}}function ge(s){let e=(s[3]?"Save":"Edit")+"",t;return{c(){t=v(e)},l(o){t=y(o,e)},m(o,n){b(o,t,n)},p(o,n){n&8&&e!==(e=(o[3]?"Save":"Edit")+"")&&U(t,e)},d(o){o&&m(t)}}}function be(s){let e,t,o,n,l;const i=[me,pe],r=[];function u(f,_){return f[3]?0:1}return e=u(s),t=r[e]=i[e](s),n=new X({props:{type:"primary",$$slots:{default:[ge]},$$scope:{ctx:s}}}),n.$on("click",s[10]),{c(){t.c(),o=J(),L(n.$$.fragment)},l(f){t.l(f),o=A(f),C(n.$$.fragment,f)},m(f,_){r[e].m(f,_),b(f,o,_),F(n,f,_),l=!0},p(f,_){let d=e;e=u(f),e===d?r[e].p(f,_):(Y(),k(r[d],1,1,()=>{r[d]=null}),T(),t=r[e],t?t.p(f,_):(t=r[e]=i[e](f),t.c()),$(t,1),t.m(o.parentNode,o));const h={};_&1048584&&(h.$$scope={dirty:_,ctx:f}),n.$set(h)},i(f){l||($(t),$(n.$$.fragment,f),l=!0)},o(f){k(t),k(n.$$.fragment,f),l=!1},d(f){r[e].d(f),f&&m(o),j(n,f)}}}function he(s){let e,t,o=s[7]("registration.yourRegistration")+"",n,l,i,r,u,f;const _=[ae,ie],d=[];function h(c,a){return c[0]?0:c[2]?1:-1}return~(i=h(s))&&(r=d[i]=_[i](s)),{c(){e=E("h1"),t=E("b"),n=v(o),l=J(),r&&r.c(),u=M(),this.h()},l(c){e=I(c,"H1",{class:!0});var a=B(e);t=I(a,"B",{});var p=B(t);n=y(p,o),p.forEach(m),a.forEach(m),l=A(c),r&&r.l(c),u=M(),this.h()},h(){O(e,"class","cover-heading")},m(c,a){b(c,e,a),R(e,t),R(t,n),b(c,l,a),~i&&d[i].m(c,a),b(c,u,a),f=!0},p(c,[a]){(!f||a&128)&&o!==(o=c[7]("registration.yourRegistration")+"")&&U(n,o);let p=i;i=h(c),i===p?~i&&d[i].p(c,a):(r&&(Y(),k(d[p],1,1,()=>{d[p]=null}),T()),~i?(r=d[i],r?r.p(c,a):(r=d[i]=_[i](c),r.c()),$(r,1),r.m(u.parentNode,u)):r=null)},i(c){f||($(r),f=!0)},o(c){k(r),f=!1},d(c){c&&m(e),c&&m(l),~i&&d[i].d(c),c&&m(u)}}}function ke(s,e,t){let o,n,l;V(s,D,g=>t(15,o=g)),V(s,se,g=>t(16,n=g)),V(s,ne,g=>t(7,l=g));let{dto:i=null}=e,r,u,f=!1,_=!1,d=!1,h=[],c=!1;async function a(){t(5,h=r.getInvalid()),console.log(`saving registration ${u}`),H(D,o=!0,o),await fetch(new URL("/api/registration.php",n).toString(),{method:"POST",body:JSON.stringify(i)}),H(D,o=!1,o),t(6,c=!1)}oe(()=>{H(D,o=!0,o),u=window.location.search.substring(1),console.log(`loading registration ${u}`),setTimeout(()=>{u==="1"&&t(0,i=JSON.parse('{"firstName":"Ernst","lastName":"Haft","email":"ernsthaft@web.de","dateOfBirth":"1990-01-01","country":"DE","idCopy":{"value":"","files": "undefined"}}')),H(D,o=!1,o),t(2,f=!0)},0)});const p=()=>{t(3,_=!1),t(4,d=!0)},S=()=>{t(3,_=!_),t(4,d=!_),!_&&c&&a()};function w(g){q[g?"unshift":"push"](()=>{r=g,t(1,r)})}function W(g){i=g,t(0,i)}function Z(g){c=g,t(6,c)}return s.$$set=g=>{"dto"in g&&t(0,i=g.dto)},s.$$.update=()=>{s.$$.dirty&2&&r&&(t(5,h=r.getInvalid()),t(4,d=!0))},[i,r,f,_,d,h,c,l,a,p,S,w,W,Z]}class we extends x{constructor(e){super();ee(this,e,ke,he,te,{dto:0})}}export{we as default};
