import{S as te,i as re,s as se,k as K,f as $,m as Y,n as A,o as C,p as h,d,J as L,M as ne,X as ie,ah as Q,e as P,j as T,c as H,l as y,a as V,b as z,E as Z,t as I,g as S,F as G,G as le,h as U,H as x,U as O,ai as q,v as j,w as D,x as B,aj as J,A as F,ac as ge,ak as oe,al as fe}from"../../chunks/vendor-48be1835.js";import{I as be,a as ee,R as de,b as ke}from"../../chunks/RegistrationForm-96b6edb3.js";import{B as ae}from"../../chunks/Button-e703223c.js";import{l as X,c as ue}from"../../chunks/stores-2d6e44e0.js";import"../../chunks/index-eddbc582.js";const we=!1;function $e(n){let t,r,e,s,f,_;const u=[Ee,ve],l=[];function m(i,a){return i[3]?1:0}return s=m(n),f=l[s]=u[s](n),{c(){t=P("hr"),r=T(),e=P("div"),f.c(),this.h()},l(i){t=H(i,"HR",{}),r=y(i),e=H(i,"DIV",{class:!0});var a=V(e);f.l(a),a.forEach(d),this.h()},h(){z(e,"class","resend svelte-rart3l"),Z(e,"success",n[3])},m(i,a){$(i,t,a),$(i,r,a),$(i,e,a),l[s].m(e,null),_=!0},p(i,a){let w=s;s=m(i),s===w?l[s].p(i,a):(Y(),A(l[w],1,1,()=>{l[w]=null}),C(),f=l[s],f?f.p(i,a):(f=l[s]=u[s](i),f.c()),h(f,1),f.m(e,null)),a&8&&Z(e,"success",i[3])},i(i){_||(h(f),_=!0)},o(i){A(f),_=!1},d(i){i&&d(t),i&&d(r),i&&d(e),l[s].d()}}}function he(n){let t=n[6](`registration.resend.${n[1]}`)+"",r,e,s,f=n[6]("registration.resend.here")+"",_,u,l,m;return{c(){r=I(t),e=T(),s=P("span"),_=I(f),u=I("."),this.h()},l(i){r=S(i,t),e=y(i),s=H(i,"SPAN",{class:!0});var a=V(s);_=S(a,f),a.forEach(d),u=S(i,"."),this.h()},h(){z(s,"class","link")},m(i,a){$(i,r,a),$(i,e,a),$(i,s,a),G(s,_),$(i,u,a),l||(m=le(s,"click",n[10]),l=!0)},p(i,a){a&66&&t!==(t=i[6](`registration.resend.${i[1]}`)+"")&&U(r,t),a&64&&f!==(f=i[6]("registration.resend.here")+"")&&U(_,f)},i:x,o:x,d(i){i&&d(r),i&&d(e),i&&d(s),i&&d(u),l=!1,m()}}}function ve(n){let t=n[6]("registration.resend.success")+"",r,e,s=n[6]("registration.resend.sendAgain")+"",f,_,u,l=n[6]("registration.resend.here")+"",m,i,a=(n[4]>0?`(${Math.floor(n[4]/60)}:${("0"+n[4]%60).slice(-2)})`:"")+"",w,p,c;return{c(){r=I(t),e=T(),f=I(s),_=T(),u=P("span"),m=I(l),i=I(`.
            `),w=I(a),this.h()},l(b){r=S(b,t),e=y(b),f=S(b,s),_=y(b),u=H(b,"SPAN",{class:!0});var k=V(u);m=S(k,l),k.forEach(d),i=S(b,`.
            `),w=S(b,a),this.h()},h(){z(u,"class","link svelte-rart3l"),Z(u,"disabled",n[4]>0)},m(b,k){$(b,r,k),$(b,e,k),$(b,f,k),$(b,_,k),$(b,u,k),G(u,m),$(b,i,k),$(b,w,k),p||(c=le(u,"click",n[13]),p=!0)},p(b,k){k&64&&t!==(t=b[6]("registration.resend.success")+"")&&U(r,t),k&64&&s!==(s=b[6]("registration.resend.sendAgain")+"")&&U(f,s),k&64&&l!==(l=b[6]("registration.resend.here")+"")&&U(m,l),k&16&&Z(u,"disabled",b[4]>0),k&16&&a!==(a=(b[4]>0?`(${Math.floor(b[4]/60)}:${("0"+b[4]%60).slice(-2)})`:"")+"")&&U(w,a)},i:x,o:x,d(b){b&&d(r),b&&d(e),b&&d(f),b&&d(_),b&&d(u),b&&d(i),b&&d(w),p=!1,c()}}}function Ee(n){let t,r=n[6]("registration.resend.enterYourEmail")+"",e,s,f,_,u,l,m,i;function a(p){n[11](p)}let w={type:"email",name:"resendEmail",placeholder:n[6]("registration.resend.yourEmail")};return n[0]!==void 0&&(w.value=n[0]),_=new be({props:w}),O.push(()=>q(_,"value",a)),_.$on("keyup",n[12]),m=new ae({props:{type:"primary",slim:!0,disabled:n[5],$$slots:{default:[Re]},$$scope:{ctx:n}}}),m.$on("click",n[7]),{c(){t=P("span"),e=I(r),s=I(":"),f=T(),j(_.$$.fragment),l=T(),j(m.$$.fragment),this.h()},l(p){t=H(p,"SPAN",{class:!0});var c=V(t);e=S(c,r),s=S(c,":"),c.forEach(d),f=y(p),D(_.$$.fragment,p),l=y(p),D(m.$$.fragment,p),this.h()},h(){z(t,"class","svelte-rart3l")},m(p,c){$(p,t,c),G(t,e),G(t,s),$(p,f,c),B(_,p,c),$(p,l,c),B(m,p,c),i=!0},p(p,c){(!i||c&64)&&r!==(r=p[6]("registration.resend.enterYourEmail")+"")&&U(e,r);const b={};c&64&&(b.placeholder=p[6]("registration.resend.yourEmail")),!u&&c&1&&(u=!0,b.value=p[0],J(()=>u=!1)),_.$set(b);const k={};c&32&&(k.disabled=p[5]),c&262208&&(k.$$scope={dirty:c,ctx:p}),m.$set(k)},i(p){i||(h(_.$$.fragment,p),h(m.$$.fragment,p),i=!0)},o(p){A(_.$$.fragment,p),A(m.$$.fragment,p),i=!1},d(p){p&&d(t),p&&d(f),F(_,p),p&&d(l),F(m,p)}}}function Re(n){let t=n[6]("registration.form.submit")+"",r;return{c(){r=I(t)},l(e){r=S(e,t)},m(e,s){$(e,r,s)},p(e,s){s&64&&t!==(t=e[6]("registration.form.submit")+"")&&U(r,t)},d(e){e&&d(r)}}}function Ae(n){let t,r,e,s;const f=[he,$e],_=[];function u(l,m){return l[2]?1:0}return t=u(n),r=_[t]=f[t](n),{c(){r.c(),e=K()},l(l){r.l(l),e=K()},m(l,m){_[t].m(l,m),$(l,e,m),s=!0},p(l,[m]){let i=t;t=u(l),t===i?_[t].p(l,m):(Y(),A(_[i],1,1,()=>{_[i]=null}),C(),r=_[t],r?r.p(l,m):(r=_[t]=f[t](l),r.c()),h(r,1),r.m(e.parentNode,e))},i(l){s||(h(r),s=!0)},o(l){A(r),s=!1},d(l){_[t].d(l),l&&d(e)}}}function Ie(n,t,r){let e,s,f,_;L(n,X,o=>r(5,e=o)),L(n,ue,o=>r(15,s=o)),L(n,ne,o=>r(16,f=o)),L(n,ie,o=>r(6,_=o));let{type:u}=t,{error:l}=t,{warning:m}=t,{email:i=""}=t,a=!1,w=!1,p=0,c;function b(o){r(4,p=new Date(new Date().getTime()+o).getTime()-new Date().getTime()),c=setInterval(()=>{p>0?r(4,p--,p):clearInterval(c)},1e3)}async function k(){r(8,l=""),r(9,m="");const o=document.getElementById("resendEmail");if(o&&o.reportValidity()||!o&&i){Q(X,e=!0,e);let g=new URLSearchParams({email:i,lang:f});const N=await fetch(new URL("new_registration.php?"+g,s).toString());if(N.status===200)r(3,w=!0),b(5*60);else{let M=await N.text();M==="Email not found."?r(8,l="registration.resend.notFound"):M==="Error sending confirmation email."?r(8,l="registration.form.error.emailError"):M==="Too many requests."?r(9,m="registration.resend.pleaseWait"):r(8,l="registration.form.error.errorOccurred"),r(3,w=!1)}Q(X,e=!1,e)}}const W=()=>r(2,a=!a);function v(o){i=o,r(0,i)}const E=o=>o.key==="Enter"&&k(),R=()=>p<=0&&k();return n.$$set=o=>{"type"in o&&r(1,u=o.type),"error"in o&&r(8,l=o.error),"warning"in o&&r(9,m=o.warning),"email"in o&&r(0,i=o.email)},[i,u,a,w,p,e,_,k,l,m,W,v,E,R]}class _e extends te{constructor(t){super();re(this,t,Ie,Ae,se,{type:1,error:8,warning:9,email:0})}}function Se(n){let t,r;return t=new ee({props:{type:"info",$$slots:{default:[ye]},$$scope:{ctx:n}}}),{c(){j(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,s){B(t,e,s),r=!0},p(e,s){const f={};s&524440&&(f.$$scope={dirty:s,ctx:e}),t.$set(f)},i(e){r||(h(t.$$.fragment,e),r=!0)},o(e){A(t.$$.fragment,e),r=!1},d(e){F(t,e)}}}function Te(n){let t,r;return t=new ee({props:{type:"success",$$slots:{default:[Ne]},$$scope:{ctx:n}}}),{c(){j(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,s){B(t,e,s),r=!0},p(e,s){const f={};s&524441&&(f.$$scope={dirty:s,ctx:e}),t.$set(f)},i(e){r||(h(t.$$.fragment,e),r=!0)},o(e){A(t.$$.fragment,e),r=!1},d(e){F(t,e)}}}function ye(n){let t,r=n[7]("registration.firstStep")+"",e,s=n[7]("registration.editingAllowedUntil")+"",f,_,u,l,m,i;function a(c){n[11](c)}function w(c){n[12](c)}let p={type:"alreadyRegistered"};return n[4]!==void 0&&(p.error=n[4]),n[3]!==void 0&&(p.warning=n[3]),u=new _e({props:p}),O.push(()=>q(u,"error",a)),O.push(()=>q(u,"warning",w)),{c(){t=new oe,e=T(),f=I(s),_=T(),j(u.$$.fragment),this.h()},l(c){t=fe(c),e=y(c),f=S(c,s),_=y(c),D(u.$$.fragment,c),this.h()},h(){t.a=e},m(c,b){t.m(r,c,b),$(c,e,b),$(c,f,b),$(c,_,b),B(u,c,b),i=!0},p(c,b){(!i||b&128)&&r!==(r=c[7]("registration.firstStep")+"")&&t.p(r),(!i||b&128)&&s!==(s=c[7]("registration.editingAllowedUntil")+"")&&U(f,s);const k={};!l&&b&16&&(l=!0,k.error=c[4],J(()=>l=!1)),!m&&b&8&&(m=!0,k.warning=c[3],J(()=>m=!1)),u.$set(k)},i(c){i||(h(u.$$.fragment,c),i=!0)},o(c){A(u.$$.fragment,c),i=!1},d(c){c&&t.d(),c&&d(e),c&&d(f),c&&d(_),F(u,c)}}}function Ne(n){let t,r=n[7]("registration.success",{values:{email:n[0].email}})+"",e,s,f,_,u;function l(a){n[9](a)}function m(a){n[10](a)}let i={type:"didNotReceive",email:n[0].email};return n[4]!==void 0&&(i.error=n[4]),n[3]!==void 0&&(i.warning=n[3]),s=new _e({props:i}),O.push(()=>q(s,"error",l)),O.push(()=>q(s,"warning",m)),{c(){t=new oe,e=T(),j(s.$$.fragment),this.h()},l(a){t=fe(a),e=y(a),D(s.$$.fragment,a),this.h()},h(){t.a=e},m(a,w){t.m(r,a,w),$(a,e,w),B(s,a,w),u=!0},p(a,w){(!u||w&129)&&r!==(r=a[7]("registration.success",{values:{email:a[0].email}})+"")&&t.p(r);const p={};w&1&&(p.email=a[0].email),!f&&w&16&&(f=!0,p.error=a[4],J(()=>f=!1)),!_&&w&8&&(_=!0,p.warning=a[3],J(()=>_=!1)),s.$set(p)},i(a){u||(h(s.$$.fragment,a),u=!0)},o(a){A(s.$$.fragment,a),u=!1},d(a){a&&t.d(),a&&d(e),F(s,a)}}}function me(n){let t,r;return t=new ee({props:{type:"warning",$$slots:{default:[Ue]},$$scope:{ctx:n}}}),{c(){j(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,s){B(t,e,s),r=!0},p(e,s){const f={};s&524424&&(f.$$scope={dirty:s,ctx:e}),t.$set(f)},i(e){r||(h(t.$$.fragment,e),r=!0)},o(e){A(t.$$.fragment,e),r=!1},d(e){F(t,e)}}}function Ue(n){let t=n[7](n[3])+"",r;return{c(){r=I(t)},l(e){r=S(e,t)},m(e,s){$(e,r,s)},p(e,s){s&136&&t!==(t=e[7](e[3])+"")&&U(r,t)},d(e){e&&d(r)}}}function pe(n){let t,r;return t=new ee({props:{type:"error",$$slots:{default:[je]},$$scope:{ctx:n}}}),{c(){j(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,s){B(t,e,s),r=!0},p(e,s){const f={};s&524432&&(f.$$scope={dirty:s,ctx:e}),t.$set(f)},i(e){r||(h(t.$$.fragment,e),r=!0)},o(e){A(t.$$.fragment,e),r=!1},d(e){F(t,e)}}}function je(n){let t=n[7](n[4])+"",r;return{c(){r=I(t)},l(e){r=S(e,t)},m(e,s){$(e,r,s)},p(e,s){s&144&&t!==(t=e[7](e[4])+"")&&U(r,t)},d(e){e&&d(r)}}}function ce(n){let t,r,e,s;function f(l){n[15](l)}function _(l){n[16](l)}let u={newRegistration:!0,$$slots:{default:[Be]},$$scope:{ctx:n}};return n[0]!==void 0&&(u.dto=n[0]),n[2]!==void 0&&(u.regulationsAccepted=n[2]),t=new de({props:u}),n[14](t),O.push(()=>q(t,"dto",f)),O.push(()=>q(t,"regulationsAccepted",_)),{c(){j(t.$$.fragment)},l(l){D(t.$$.fragment,l)},m(l,m){B(t,l,m),s=!0},p(l,m){const i={};m&524484&&(i.$$scope={dirty:m,ctx:l}),!r&&m&1&&(r=!0,i.dto=l[0],J(()=>r=!1)),!e&&m&4&&(e=!0,i.regulationsAccepted=l[2],J(()=>e=!1)),t.$set(i)},i(l){s||(h(t.$$.fragment,l),s=!0)},o(l){A(t.$$.fragment,l),s=!1},d(l){n[14](null),F(t,l)}}}function De(n){let t=n[7]("registration.form.submit")+"",r;return{c(){r=I(t)},l(e){r=S(e,t)},m(e,s){$(e,r,s)},p(e,s){s&128&&t!==(t=e[7]("registration.form.submit")+"")&&U(r,t)},d(e){e&&d(r)}}}function Be(n){let t,r,e,s;return e=new ae({props:{type:"primary",disabled:!n[2]||n[6],$$slots:{default:[De]},$$scope:{ctx:n}}}),e.$on("click",n[13]),{c(){t=P("div"),r=T(),j(e.$$.fragment)},l(f){t=H(f,"DIV",{}),V(t).forEach(d),r=y(f),D(e.$$.fragment,f)},m(f,_){$(f,t,_),$(f,r,_),B(e,f,_),s=!0},p(f,_){const u={};_&68&&(u.disabled=!f[2]||f[6]),_&524416&&(u.$$scope={dirty:_,ctx:f}),e.$set(u)},i(f){s||(h(e.$$.fragment,f),s=!0)},o(f){A(e.$$.fragment,f),s=!1},d(f){f&&d(t),f&&d(r),F(e,f)}}}function Fe(n){let t,r,e,s,f=n[7]("registration.title")+"",_,u,l,m,i,a,w,p,c;t=new ge({props:{title:n[7]("registration.meta.title"),description:n[7]("registration.meta.description")}});const b=[Te,Se],k=[];function W(o,g){return o[5]?0:1}l=W(n),m=k[l]=b[l](n);let v=n[3]&&me(n),E=n[4]&&pe(n),R=!n[5]&&ce(n);return{c(){j(t.$$.fragment),r=T(),e=P("h1"),s=P("b"),_=I(f),u=T(),m.c(),i=T(),v&&v.c(),a=T(),E&&E.c(),w=T(),R&&R.c(),p=K(),this.h()},l(o){D(t.$$.fragment,o),r=y(o),e=H(o,"H1",{class:!0});var g=V(e);s=H(g,"B",{});var N=V(s);_=S(N,f),N.forEach(d),g.forEach(d),u=y(o),m.l(o),i=y(o),v&&v.l(o),a=y(o),E&&E.l(o),w=y(o),R&&R.l(o),p=K(),this.h()},h(){z(e,"class","cover-heading")},m(o,g){B(t,o,g),$(o,r,g),$(o,e,g),G(e,s),G(s,_),$(o,u,g),k[l].m(o,g),$(o,i,g),v&&v.m(o,g),$(o,a,g),E&&E.m(o,g),$(o,w,g),R&&R.m(o,g),$(o,p,g),c=!0},p(o,[g]){const N={};g&128&&(N.title=o[7]("registration.meta.title")),g&128&&(N.description=o[7]("registration.meta.description")),t.$set(N),(!c||g&128)&&f!==(f=o[7]("registration.title")+"")&&U(_,f);let M=l;l=W(o),l===M?k[l].p(o,g):(Y(),A(k[M],1,1,()=>{k[M]=null}),C(),m=k[l],m?m.p(o,g):(m=k[l]=b[l](o),m.c()),h(m,1),m.m(i.parentNode,i)),o[3]?v?(v.p(o,g),g&8&&h(v,1)):(v=me(o),v.c(),h(v,1),v.m(a.parentNode,a)):v&&(Y(),A(v,1,1,()=>{v=null}),C()),o[4]?E?(E.p(o,g),g&16&&h(E,1)):(E=pe(o),E.c(),h(E,1),E.m(w.parentNode,w)):E&&(Y(),A(E,1,1,()=>{E=null}),C()),o[5]?R&&(Y(),A(R,1,1,()=>{R=null}),C()):R?(R.p(o,g),g&32&&h(R,1)):(R=ce(o),R.c(),h(R,1),R.m(p.parentNode,p))},i(o){c||(h(t.$$.fragment,o),h(m),h(v),h(E),h(R),c=!0)},o(o){A(t.$$.fragment,o),A(m),A(v),A(E),A(R),c=!1},d(o){F(t,o),o&&d(r),o&&d(e),o&&d(u),k[l].d(o),o&&d(i),v&&v.d(o),o&&d(a),E&&E.d(o),o&&d(w),R&&R.d(o),o&&d(p)}}}function Le(n,t,r){let e,s,f,_;L(n,X,g=>r(6,e=g)),L(n,ue,g=>r(17,s=g)),L(n,ne,g=>r(18,f=g)),L(n,ie,g=>r(7,_=g));let{dto:u=new ke}=t,l,m=we,i="",a="",w=!1;async function p(){if(r(4,a=""),r(3,i=""),l.reportValidity()){Q(X,e=!0,e),r(0,u.lang=f,u);const g=await fetch(new URL("new_registration.php",s).toString(),{method:"POST",body:JSON.stringify(u)});if(g.status===200)r(5,w=!0),localStorage.removeItem("newRegistrationDto");else{let N=await g.text();N==="Email already used."?r(3,i="registration.form.error.emailUsed"):N==="Invalid form."?r(4,a="registration.form.error.invalidForm"):N==="Error sending confirmation email."?r(4,a="registration.form.error.emailError"):N==="Too many requests."?r(3,i="registration.form.error.pleaseWait"):r(4,a="registration.form.error.errorOccurred")}Q(X,e=!1,e)}}function c(g){a=g,r(4,a)}function b(g){i=g,r(3,i)}function k(g){a=g,r(4,a)}function W(g){i=g,r(3,i)}const v=()=>p();function E(g){O[g?"unshift":"push"](()=>{l=g,r(1,l)})}function R(g){u=g,r(0,u)}function o(g){m=g,r(2,m)}return n.$$set=g=>{"dto"in g&&r(0,u=g.dto)},[u,l,m,i,a,w,e,_,p,c,b,k,W,v,E,R,o]}class qe extends te{constructor(t){super();re(this,t,Le,Fe,se,{dto:0})}}export{qe as default};
