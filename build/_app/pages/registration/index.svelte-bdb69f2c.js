import{S as x,i as ee,s as te,_ as se,v,j as U,e as C,t as F,k as O,w as A,l as B,c as P,a as Q,g as j,d as $,b as re,x as R,f as d,F as V,h as I,n as k,o as q,p as g,A as S,J as E,m as D,M as oe,X as ie,a2 as W,Q as J,a3 as X,a4 as y,a5 as z,a6 as G}from"../../chunks/vendor-21361551.js";import{R as ne,d as le,I as H,a as fe,B as K}from"../../chunks/Button-925fe59a.js";import{l as M,c as ae}from"../../chunks/stores-a2f81899.js";function ue(i){let t,s,e,r,o,a,_,m;t=new H({props:{type:"info",$$slots:{default:[_e]},$$scope:{ctx:i}}});let f=i[3]&&Y(i),u=i[4]&&Z(i);function w(l){i[11](l)}function T(l){i[12](l)}let b={newRegistration:!0,$$slots:{default:[be]},$$scope:{ctx:i}};return i[0]!==void 0&&(b.dto=i[0]),i[2]!==void 0&&(b.regulationsAccepted=i[2]),o=new fe({props:b}),i[10](o),J.push(()=>X(o,"dto",w)),J.push(()=>X(o,"regulationsAccepted",T)),{c(){v(t.$$.fragment),s=U(),f&&f.c(),e=U(),u&&u.c(),r=U(),v(o.$$.fragment)},l(l){A(t.$$.fragment,l),s=B(l),f&&f.l(l),e=B(l),u&&u.l(l),r=B(l),A(o.$$.fragment,l)},m(l,n){R(t,l,n),d(l,s,n),f&&f.m(l,n),d(l,e,n),u&&u.m(l,n),d(l,r,n),R(o,l,n),m=!0},p(l,n){const c={};n&65600&&(c.$$scope={dirty:n,ctx:l}),t.$set(c),l[3]?f?(f.p(l,n),n&8&&g(f,1)):(f=Y(l),f.c(),g(f,1),f.m(e.parentNode,e)):f&&(D(),k(f,1,1,()=>{f=null}),q()),l[4]?u?(u.p(l,n),n&16&&g(u,1)):(u=Z(l),u.c(),g(u,1),u.m(r.parentNode,r)):u&&(D(),k(u,1,1,()=>{u=null}),q());const h={};n&65606&&(h.$$scope={dirty:n,ctx:l}),!a&&n&1&&(a=!0,h.dto=l[0],y(()=>a=!1)),!_&&n&4&&(_=!0,h.regulationsAccepted=l[2],y(()=>_=!1)),o.$set(h)},i(l){m||(g(t.$$.fragment,l),g(f),g(u),g(o.$$.fragment,l),m=!0)},o(l){k(t.$$.fragment,l),k(f),k(u),k(o.$$.fragment,l),m=!1},d(l){S(t,l),l&&$(s),f&&f.d(l),l&&$(e),u&&u.d(l),l&&$(r),i[10](null),S(o,l)}}}function me(i){let t,s;return t=new H({props:{type:"success",$$slots:{default:[de]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},l(e){A(t.$$.fragment,e)},m(e,r){R(t,e,r),s=!0},p(e,r){const o={};r&65601&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){s||(g(t.$$.fragment,e),s=!0)},o(e){k(t.$$.fragment,e),s=!1},d(e){S(t,e)}}}function _e(i){let t,s=i[6]("registration.firstStep")+"",e,r=i[6]("registration.editingAllowedUntil")+"",o;return{c(){t=new z,e=U(),o=F(r),this.h()},l(a){t=G(a),e=B(a),o=j(a,r),this.h()},h(){t.a=e},m(a,_){t.m(s,a,_),d(a,e,_),d(a,o,_)},p(a,_){_&64&&s!==(s=a[6]("registration.firstStep")+"")&&t.p(s),_&64&&r!==(r=a[6]("registration.editingAllowedUntil")+"")&&I(o,r)},d(a){a&&t.d(),a&&$(e),a&&$(o)}}}function Y(i){let t,s;return t=new H({props:{type:"warning",$$slots:{default:[ce]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},l(e){A(t.$$.fragment,e)},m(e,r){R(t,e,r),s=!0},p(e,r){const o={};r&65608&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){s||(g(t.$$.fragment,e),s=!0)},o(e){k(t.$$.fragment,e),s=!1},d(e){S(t,e)}}}function ce(i){let t=i[6](i[3])+"",s;return{c(){s=F(t)},l(e){s=j(e,t)},m(e,r){d(e,s,r)},p(e,r){r&72&&t!==(t=e[6](e[3])+"")&&I(s,t)},d(e){e&&$(s)}}}function Z(i){let t,s;return t=new H({props:{type:"error",$$slots:{default:[pe]},$$scope:{ctx:i}}}),{c(){v(t.$$.fragment)},l(e){A(t.$$.fragment,e)},m(e,r){R(t,e,r),s=!0},p(e,r){const o={};r&65616&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){s||(g(t.$$.fragment,e),s=!0)},o(e){k(t.$$.fragment,e),s=!1},d(e){S(t,e)}}}function pe(i){let t=i[6](i[4])+"",s;return{c(){s=F(t)},l(e){s=j(e,t)},m(e,r){d(e,s,r)},p(e,r){r&80&&t!==(t=e[6](e[4])+"")&&I(s,t)},d(e){e&&$(s)}}}function $e(i){let t=i[6]("registration.form.save")+"",s;return{c(){s=F(t)},l(e){s=j(e,t)},m(e,r){d(e,s,r)},p(e,r){r&64&&t!==(t=e[6]("registration.form.save")+"")&&I(s,t)},d(e){e&&$(s)}}}function ge(i){let t=i[6]("registration.form.submit")+"",s;return{c(){s=F(t)},l(e){s=j(e,t)},m(e,r){d(e,s,r)},p(e,r){r&64&&t!==(t=e[6]("registration.form.submit")+"")&&I(s,t)},d(e){e&&$(s)}}}function be(i){let t,s,e,r;return t=new K({props:{type:"outline",$$slots:{default:[$e]},$$scope:{ctx:i}}}),t.$on("click",i[8]),e=new K({props:{type:"primary",disabled:!i[2],$$slots:{default:[ge]},$$scope:{ctx:i}}}),e.$on("click",i[9]),{c(){v(t.$$.fragment),s=U(),v(e.$$.fragment)},l(o){A(t.$$.fragment,o),s=B(o),A(e.$$.fragment,o)},m(o,a){R(t,o,a),d(o,s,a),R(e,o,a),r=!0},p(o,a){const _={};a&65600&&(_.$$scope={dirty:a,ctx:o}),t.$set(_);const m={};a&4&&(m.disabled=!o[2]),a&65600&&(m.$$scope={dirty:a,ctx:o}),e.$set(m)},i(o){r||(g(t.$$.fragment,o),g(e.$$.fragment,o),r=!0)},o(o){k(t.$$.fragment,o),k(e.$$.fragment,o),r=!1},d(o){S(t,o),o&&$(s),S(e,o)}}}function de(i){let t,s=i[6]("registration.success",{values:{email:i[0].email}})+"",e;return{c(){t=new z,e=O(),this.h()},l(r){t=G(r),e=O(),this.h()},h(){t.a=e},m(r,o){t.m(s,r,o),d(r,e,o)},p(r,o){o&65&&s!==(s=r[6]("registration.success",{values:{email:r[0].email}})+"")&&t.p(s)},d(r){r&&$(e),r&&t.d()}}}function ke(i){let t,s,e,r,o=i[6]("registration.title")+"",a,_,m,f,u,w;t=new se({props:{title:i[6]("registration.meta.title"),description:i[6]("registration.meta.description")}});const T=[me,ue],b=[];function l(n,c){return n[5]?0:1}return m=l(i),f=b[m]=T[m](i),{c(){v(t.$$.fragment),s=U(),e=C("h1"),r=C("b"),a=F(o),_=U(),f.c(),u=O(),this.h()},l(n){A(t.$$.fragment,n),s=B(n),e=P(n,"H1",{class:!0});var c=Q(e);r=P(c,"B",{});var h=Q(r);a=j(h,o),h.forEach($),c.forEach($),_=B(n),f.l(n),u=O(),this.h()},h(){re(e,"class","cover-heading")},m(n,c){R(t,n,c),d(n,s,c),d(n,e,c),V(e,r),V(r,a),d(n,_,c),b[m].m(n,c),d(n,u,c),w=!0},p(n,[c]){const h={};c&64&&(h.title=n[6]("registration.meta.title")),c&64&&(h.description=n[6]("registration.meta.description")),t.$set(h),(!w||c&64)&&o!==(o=n[6]("registration.title")+"")&&I(a,o);let N=m;m=l(n),m===N?b[m].p(n,c):(D(),k(b[N],1,1,()=>{b[N]=null}),q(),f=b[m],f?f.p(n,c):(f=b[m]=T[m](n),f.c()),g(f,1),f.m(u.parentNode,u))},i(n){w||(g(t.$$.fragment,n),g(f),w=!0)},o(n){k(t.$$.fragment,n),k(f),w=!1},d(n){S(t,n),n&&$(s),n&&$(e),n&&$(_),b[m].d(n),n&&$(u)}}}function we(i,t,s){let e,r,o,a;E(i,M,p=>s(13,e=p)),E(i,ae,p=>s(14,r=p)),E(i,oe,p=>s(15,o=p)),E(i,ie,p=>s(6,a=p));let{dto:_=new ne}=t,m,f=le,u="",w="",T=!1;async function b(){if(m.reportValidity()){W(M,e=!0,e),s(0,_.lang=o,_);const p=await fetch(new URL("new_registration.php",r).toString(),{method:"POST",body:JSON.stringify(_)});if(p.status===200)s(4,w=""),s(3,u=""),s(5,T=!0),localStorage.removeItem("newRegistrationDto");else{let L=await p.text();L==="Email already used."?s(3,u="registration.form.error.emailUsed"):L==="Invalid form."?s(4,w="registration.form.error.invalidForm"):L==="Too many requests."?s(4,w="registration.form.error.pleaseWait"):s(4,w="registration.form.error.errorOccurred")}W(M,e=!1,e)}}const l=()=>m.saveForm(),n=()=>b();function c(p){J[p?"unshift":"push"](()=>{m=p,s(1,m)})}function h(p){_=p,s(0,_)}function N(p){f=p,s(2,f)}return i.$$set=p=>{"dto"in p&&s(0,_=p.dto)},[_,m,f,u,w,T,a,b,l,n,c,h,N]}class Re extends x{constructor(t){super();ee(this,t,we,ke,te,{dto:0})}}export{Re as default};
