import{S as le,i as oe,s as fe,k as Z,f as w,m as C,n as R,o as G,p as v,d as b,J as W,M as ae,X as ue,u as $e,ag as te,e as J,j as N,c as Y,l as U,a as X,b as z,E as re,t as y,g as D,F as Q,G as _e,h as j,H as ie,U as P,ah as O,v as B,w as F,x as H,ai as V,A as L,ac as ve,W as Ee,Z as me,aj as ne,ak as se}from"../../chunks/vendor-cb23235c.js";import{I as Re,a as x,R as Ae,b as Ie}from"../../chunks/RegistrationForm-06acf785.js";import{B as pe}from"../../chunks/Button-2f86d941.js";import{l as K,c as ce}from"../../chunks/stores-3386f144.js";import{f as ge}from"../../chunks/index-25c39a19.js";const Se=!1;function Te(n){let t,r,e,i,s,u;const _=[ye,Ue],o=[];function p(f,c){return f[3]?1:0}return i=p(n),s=o[i]=_[i](n),{c(){t=J("hr"),r=N(),e=J("div"),s.c(),this.h()},l(f){t=Y(f,"HR",{}),r=U(f),e=Y(f,"DIV",{class:!0});var c=X(e);s.l(c),c.forEach(b),this.h()},h(){z(e,"class","resend svelte-rart3l"),re(e,"success",n[3])},m(f,c){w(f,t,c),w(f,r,c),w(f,e,c),o[i].m(e,null),u=!0},p(f,c){let k=i;i=p(f),i===k?o[i].p(f,c):(C(),R(o[k],1,1,()=>{o[k]=null}),G(),s=o[i],s?s.p(f,c):(s=o[i]=_[i](f),s.c()),v(s,1),s.m(e,null)),c&8&&re(e,"success",f[3])},i(f){u||(v(s),u=!0)},o(f){R(s),u=!1},d(f){f&&b(t),f&&b(r),f&&b(e),o[i].d()}}}function Ne(n){let t=n[6](`registration.resend.${n[1]}`)+"",r,e,i,s=n[6]("registration.resend.here")+"",u,_,o,p;return{c(){r=y(t),e=N(),i=J("span"),u=y(s),_=y("."),this.h()},l(f){r=D(f,t),e=U(f),i=Y(f,"SPAN",{class:!0});var c=X(i);u=D(c,s),c.forEach(b),_=D(f,"."),this.h()},h(){z(i,"class","link")},m(f,c){w(f,r,c),w(f,e,c),w(f,i,c),Q(i,u),w(f,_,c),o||(p=_e(i,"click",n[11]),o=!0)},p(f,c){c&66&&t!==(t=f[6](`registration.resend.${f[1]}`)+"")&&j(r,t),c&64&&s!==(s=f[6]("registration.resend.here")+"")&&j(u,s)},i:ie,o:ie,d(f){f&&b(r),f&&b(e),f&&b(i),f&&b(_),o=!1,p()}}}function Ue(n){let t=n[6]("registration.resend.success")+"",r,e,i=n[6]("registration.resend.sendAgain")+"",s,u,_,o=n[6]("registration.resend.here")+"",p,f,c=(n[4]>0?`(${Math.floor(n[4]/60)}:${("0"+n[4]%60).slice(-2)})`:"")+"",k,a,d;return{c(){r=y(t),e=N(),s=y(i),u=N(),_=J("span"),p=y(o),f=y(`.
            `),k=y(c),this.h()},l(g){r=D(g,t),e=U(g),s=D(g,i),u=U(g),_=Y(g,"SPAN",{class:!0});var m=X(_);p=D(m,o),m.forEach(b),f=D(g,`.
            `),k=D(g,c),this.h()},h(){z(_,"class","link svelte-rart3l"),re(_,"disabled",n[4]>0)},m(g,m){w(g,r,m),w(g,e,m),w(g,s,m),w(g,u,m),w(g,_,m),Q(_,p),w(g,f,m),w(g,k,m),a||(d=_e(_,"click",n[14]),a=!0)},p(g,m){m&64&&t!==(t=g[6]("registration.resend.success")+"")&&j(r,t),m&64&&i!==(i=g[6]("registration.resend.sendAgain")+"")&&j(s,i),m&64&&o!==(o=g[6]("registration.resend.here")+"")&&j(p,o),m&16&&re(_,"disabled",g[4]>0),m&16&&c!==(c=(g[4]>0?`(${Math.floor(g[4]/60)}:${("0"+g[4]%60).slice(-2)})`:"")+"")&&j(k,c)},i:ie,o:ie,d(g){g&&b(r),g&&b(e),g&&b(s),g&&b(u),g&&b(_),g&&b(f),g&&b(k),a=!1,d()}}}function ye(n){let t,r=n[6]("registration.resend.enterYourEmail")+"",e,i,s,u,_,o,p,f;function c(a){n[12](a)}let k={type:"email",name:"resendEmail",placeholder:n[6]("registration.resend.yourEmail")};return n[0]!==void 0&&(k.value=n[0]),u=new Re({props:k}),P.push(()=>O(u,"value",c)),u.$on("keyup",n[13]),p=new pe({props:{type:"primary",slim:!0,disabled:n[5],$$slots:{default:[De]},$$scope:{ctx:n}}}),p.$on("click",n[7]),{c(){t=J("span"),e=y(r),i=y(":"),s=N(),B(u.$$.fragment),o=N(),B(p.$$.fragment),this.h()},l(a){t=Y(a,"SPAN",{class:!0});var d=X(t);e=D(d,r),i=D(d,":"),d.forEach(b),s=U(a),F(u.$$.fragment,a),o=U(a),F(p.$$.fragment,a),this.h()},h(){z(t,"class","svelte-rart3l")},m(a,d){w(a,t,d),Q(t,e),Q(t,i),w(a,s,d),H(u,a,d),w(a,o,d),H(p,a,d),f=!0},p(a,d){(!f||d&64)&&r!==(r=a[6]("registration.resend.enterYourEmail")+"")&&j(e,r);const g={};d&64&&(g.placeholder=a[6]("registration.resend.yourEmail")),!_&&d&1&&(_=!0,g.value=a[0],V(()=>_=!1)),u.$set(g);const m={};d&32&&(m.disabled=a[5]),d&524352&&(m.$$scope={dirty:d,ctx:a}),p.$set(m)},i(a){f||(v(u.$$.fragment,a),v(p.$$.fragment,a),f=!0)},o(a){R(u.$$.fragment,a),R(p.$$.fragment,a),f=!1},d(a){a&&b(t),a&&b(s),L(u,a),a&&b(o),L(p,a)}}}function De(n){let t=n[6]("registration.form.submit")+"",r;return{c(){r=y(t)},l(e){r=D(e,t)},m(e,i){w(e,r,i)},p(e,i){i&64&&t!==(t=e[6]("registration.form.submit")+"")&&j(r,t)},d(e){e&&b(r)}}}function je(n){let t,r,e,i;const s=[Ne,Te],u=[];function _(o,p){return o[2]?1:0}return t=_(n),r=u[t]=s[t](n),{c(){r.c(),e=Z()},l(o){r.l(o),e=Z()},m(o,p){u[t].m(o,p),w(o,e,p),i=!0},p(o,[p]){let f=t;t=_(o),t===f?u[t].p(o,p):(C(),R(u[f],1,1,()=>{u[f]=null}),G(),r=u[t],r?r.p(o,p):(r=u[t]=s[t](o),r.c()),v(r,1),r.m(e.parentNode,e))},i(o){i||(v(r),i=!0)},o(o){R(r),i=!1},d(o){u[t].d(o),o&&b(e)}}}function Be(n,t,r){let e,i,s,u;W(n,K,l=>r(5,e=l)),W(n,ce,l=>r(16,i=l)),W(n,ae,l=>r(17,s=l)),W(n,ue,l=>r(6,u=l));let{type:_}=t,{existingEmail:o=""}=t,{email:p=""}=t,{error:f}=t,{warning:c}=t,k=!1,a=!1,d=0,g;function m(l){r(4,d=new Date(new Date().getTime()+l).getTime()-new Date().getTime()),g=setInterval(()=>{d>0?r(4,d--,d):clearInterval(g)},1e3)}async function T(){r(8,f=""),r(9,c="");const l=document.getElementById("resendEmail");if(l&&l.reportValidity()||!l&&p){te(K,e=!0,e);let h=new URLSearchParams({email:p,lang:s});const q=await fetch(new URL("new_registration.php?"+h,i).toString());if(q.status===200)r(3,a=!0),m(5*60);else{let M=await q.text();M==="Email not found."?r(8,f="registration.resend.notFound"):M==="Error sending confirmation email."?r(8,f="registration.form.error.emailError"):M==="Too many requests."?r(9,c="registration.resend.pleaseWait"):r(8,f="registration.form.error.errorOccurred"),r(3,a=!1)}te(K,e=!1,e)}}$e(()=>r(0,p=o));const E=()=>r(2,k=!k);function A(l){p=l,r(0,p)}const I=l=>l.key==="Enter"&&T(),S=()=>d<=0&&T();return n.$$set=l=>{"type"in l&&r(1,_=l.type),"existingEmail"in l&&r(10,o=l.existingEmail),"email"in l&&r(0,p=l.email),"error"in l&&r(8,f=l.error),"warning"in l&&r(9,c=l.warning)},[p,_,k,a,d,e,u,T,f,c,o,E,A,I,S]}class de extends le{constructor(t){super();oe(this,t,Be,je,fe,{type:1,existingEmail:10,email:0,error:8,warning:9})}}function Fe(n){let t,r;return t=new x({props:{type:"info",$$slots:{default:[Le]},$$scope:{ctx:n}}}),{c(){B(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,i){H(t,e,i),r=!0},p(e,i){const s={};i&8389170&&(s.$$scope={dirty:i,ctx:e}),t.$set(s)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){R(t.$$.fragment,e),r=!1},d(e){L(t,e)}}}function He(n){let t,r;return t=new x({props:{type:"success",$$slots:{default:[Pe]},$$scope:{ctx:n}}}),{c(){B(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,i){H(t,e,i),r=!0},p(e,i){const s={};i&8389171&&(s.$$scope={dirty:i,ctx:e}),t.$set(s)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){R(t.$$.fragment,e),r=!1},d(e){L(t,e)}}}function Le(n){let t,r=n[9]("registration.firstStep")+"",e,i=n[9]("registration.editingAllowedUntil")+"",s,u,_,o,p,f,c;function k(m){n[14](m)}function a(m){n[15](m)}function d(m){n[16](m)}let g={type:"alreadyRegistered"};return n[1]!==void 0&&(g.email=n[1]),n[5]!==void 0&&(g.error=n[5]),n[4]!==void 0&&(g.warning=n[4]),_=new de({props:g}),P.push(()=>O(_,"email",k)),P.push(()=>O(_,"error",a)),P.push(()=>O(_,"warning",d)),{c(){t=new ne,e=N(),s=y(i),u=N(),B(_.$$.fragment),this.h()},l(m){t=se(m),e=U(m),s=D(m,i),u=U(m),F(_.$$.fragment,m),this.h()},h(){t.a=e},m(m,T){t.m(r,m,T),w(m,e,T),w(m,s,T),w(m,u,T),H(_,m,T),c=!0},p(m,T){(!c||T&512)&&r!==(r=m[9]("registration.firstStep")+"")&&t.p(r),(!c||T&512)&&i!==(i=m[9]("registration.editingAllowedUntil")+"")&&j(s,i);const E={};!o&&T&2&&(o=!0,E.email=m[1],V(()=>o=!1)),!p&&T&32&&(p=!0,E.error=m[5],V(()=>p=!1)),!f&&T&16&&(f=!0,E.warning=m[4],V(()=>f=!1)),_.$set(E)},i(m){c||(v(_.$$.fragment,m),c=!0)},o(m){R(_.$$.fragment,m),c=!1},d(m){m&&t.d(),m&&b(e),m&&b(s),m&&b(u),L(_,m)}}}function Pe(n){let t,r=n[9]("registration.success",{values:{email:n[0].email}})+"",e,i,s,u,_,o;function p(a){n[11](a)}function f(a){n[12](a)}function c(a){n[13](a)}let k={type:"didNotReceive",existingEmail:n[0].email};return n[1]!==void 0&&(k.email=n[1]),n[5]!==void 0&&(k.error=n[5]),n[4]!==void 0&&(k.warning=n[4]),i=new de({props:k}),P.push(()=>O(i,"email",p)),P.push(()=>O(i,"error",f)),P.push(()=>O(i,"warning",c)),{c(){t=new ne,e=N(),B(i.$$.fragment),this.h()},l(a){t=se(a),e=U(a),F(i.$$.fragment,a),this.h()},h(){t.a=e},m(a,d){t.m(r,a,d),w(a,e,d),H(i,a,d),o=!0},p(a,d){(!o||d&513)&&r!==(r=a[9]("registration.success",{values:{email:a[0].email}})+"")&&t.p(r);const g={};d&1&&(g.existingEmail=a[0].email),!s&&d&2&&(s=!0,g.email=a[1],V(()=>s=!1)),!u&&d&32&&(u=!0,g.error=a[5],V(()=>u=!1)),!_&&d&16&&(_=!0,g.warning=a[4],V(()=>_=!1)),i.$set(g)},i(a){o||(v(i.$$.fragment,a),o=!0)},o(a){R(i.$$.fragment,a),o=!1},d(a){a&&t.d(),a&&b(e),L(i,a)}}}function be(n){let t,r,e,i;return r=new x({props:{type:"warning",$$slots:{default:[Me]},$$scope:{ctx:n}}}),{c(){t=J("div"),B(r.$$.fragment),this.h()},l(s){t=Y(s,"DIV",{class:!0});var u=X(t);F(r.$$.fragment,u),u.forEach(b),this.h()},h(){z(t,"class","blockedInfobox svelte-1iclxit")},m(s,u){w(s,t,u),H(r,t,null),i=!0},p(s,u){const _={};u&8389120&&(_.$$scope={dirty:u,ctx:s}),r.$set(_)},i(s){i||(v(r.$$.fragment,s),Ee(()=>{e||(e=me(t,ge,{},!0)),e.run(1)}),i=!0)},o(s){R(r.$$.fragment,s),e||(e=me(t,ge,{},!1)),e.run(0),i=!1},d(s){s&&b(t),L(r),s&&e&&e.end()}}}function Me(n){let t,r=n[9]("registration.outlookBlocked")+"",e;return{c(){t=new ne,e=Z(),this.h()},l(i){t=se(i),e=Z(),this.h()},h(){t.a=e},m(i,s){t.m(r,i,s),w(i,e,s)},p(i,s){s&512&&r!==(r=i[9]("registration.outlookBlocked")+"")&&t.p(r)},d(i){i&&b(e),i&&t.d()}}}function ke(n){let t,r;return t=new x({props:{type:"warning",$$slots:{default:[Oe]},$$scope:{ctx:n}}}),{c(){B(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,i){H(t,e,i),r=!0},p(e,i){const s={};i&8389136&&(s.$$scope={dirty:i,ctx:e}),t.$set(s)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){R(t.$$.fragment,e),r=!1},d(e){L(t,e)}}}function Oe(n){let t=n[9](n[4])+"",r;return{c(){r=y(t)},l(e){r=D(e,t)},m(e,i){w(e,r,i)},p(e,i){i&528&&t!==(t=e[9](e[4])+"")&&j(r,t)},d(e){e&&b(r)}}}function we(n){let t,r;return t=new x({props:{type:"error",$$slots:{default:[Ve]},$$scope:{ctx:n}}}),{c(){B(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,i){H(t,e,i),r=!0},p(e,i){const s={};i&8389152&&(s.$$scope={dirty:i,ctx:e}),t.$set(s)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){R(t.$$.fragment,e),r=!1},d(e){L(t,e)}}}function Ve(n){let t=n[9](n[5])+"",r;return{c(){r=y(t)},l(e){r=D(e,t)},m(e,i){w(e,r,i)},p(e,i){i&544&&t!==(t=e[9](e[5])+"")&&j(r,t)},d(e){e&&b(r)}}}function he(n){let t,r,e,i;function s(o){n[19](o)}function u(o){n[20](o)}let _={newRegistration:!0,$$slots:{default:[We]},$$scope:{ctx:n}};return n[0]!==void 0&&(_.dto=n[0]),n[3]!==void 0&&(_.regulationsAccepted=n[3]),t=new Ae({props:_}),n[18](t),P.push(()=>O(t,"dto",s)),P.push(()=>O(t,"regulationsAccepted",u)),{c(){B(t.$$.fragment)},l(o){F(t.$$.fragment,o)},m(o,p){H(t,o,p),i=!0},p(o,p){const f={};p&8389384&&(f.$$scope={dirty:p,ctx:o}),!r&&p&1&&(r=!0,f.dto=o[0],V(()=>r=!1)),!e&&p&8&&(e=!0,f.regulationsAccepted=o[3],V(()=>e=!1)),t.$set(f)},i(o){i||(v(t.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),i=!1},d(o){n[18](null),L(t,o)}}}function qe(n){let t=n[9]("registration.form.submit")+"",r;return{c(){r=y(t)},l(e){r=D(e,t)},m(e,i){w(e,r,i)},p(e,i){i&512&&t!==(t=e[9]("registration.form.submit")+"")&&j(r,t)},d(e){e&&b(r)}}}function We(n){let t,r,e,i;return e=new pe({props:{type:"primary",disabled:!n[3]||n[8],$$slots:{default:[qe]},$$scope:{ctx:n}}}),e.$on("click",n[17]),{c(){t=J("div"),r=N(),B(e.$$.fragment)},l(s){t=Y(s,"DIV",{}),X(t).forEach(b),r=U(s),F(e.$$.fragment,s)},m(s,u){w(s,t,u),w(s,r,u),H(e,s,u),i=!0},p(s,u){const _={};u&264&&(_.disabled=!s[3]||s[8]),u&8389120&&(_.$$scope={dirty:u,ctx:s}),e.$set(_)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){R(e.$$.fragment,s),i=!1},d(s){s&&b(t),s&&b(r),L(e,s)}}}function Je(n){let t,r,e,i=n[9]("registration.title")+"",s,u,_,o,p,f,c,k,a,d;t=new ve({props:{title:n[9]("registration.meta.title"),description:n[9]("registration.meta.description")}});const g=[He,Fe],m=[];function T(l,h){return l[6]?0:1}_=T(n),o=m[_]=g[_](n);let E=n[7]&&be(n),A=n[4]&&ke(n),I=n[5]&&we(n),S=!n[6]&&he(n);return{c(){B(t.$$.fragment),r=N(),e=J("h1"),s=y(i),u=N(),o.c(),p=N(),E&&E.c(),f=N(),A&&A.c(),c=N(),I&&I.c(),k=N(),S&&S.c(),a=Z(),this.h()},l(l){F(t.$$.fragment,l),r=U(l),e=Y(l,"H1",{class:!0});var h=X(e);s=D(h,i),h.forEach(b),u=U(l),o.l(l),p=U(l),E&&E.l(l),f=U(l),A&&A.l(l),c=U(l),I&&I.l(l),k=U(l),S&&S.l(l),a=Z(),this.h()},h(){z(e,"class","cover-heading")},m(l,h){H(t,l,h),w(l,r,h),w(l,e,h),Q(e,s),w(l,u,h),m[_].m(l,h),w(l,p,h),E&&E.m(l,h),w(l,f,h),A&&A.m(l,h),w(l,c,h),I&&I.m(l,h),w(l,k,h),S&&S.m(l,h),w(l,a,h),d=!0},p(l,[h]){const q={};h&512&&(q.title=l[9]("registration.meta.title")),h&512&&(q.description=l[9]("registration.meta.description")),t.$set(q),(!d||h&512)&&i!==(i=l[9]("registration.title")+"")&&j(s,i);let M=_;_=T(l),_===M?m[_].p(l,h):(C(),R(m[M],1,1,()=>{m[M]=null}),G(),o=m[_],o?o.p(l,h):(o=m[_]=g[_](l),o.c()),v(o,1),o.m(p.parentNode,p)),l[7]?E?(E.p(l,h),h&128&&v(E,1)):(E=be(l),E.c(),v(E,1),E.m(f.parentNode,f)):E&&(C(),R(E,1,1,()=>{E=null}),G()),l[4]?A?(A.p(l,h),h&16&&v(A,1)):(A=ke(l),A.c(),v(A,1),A.m(c.parentNode,c)):A&&(C(),R(A,1,1,()=>{A=null}),G()),l[5]?I?(I.p(l,h),h&32&&v(I,1)):(I=we(l),I.c(),v(I,1),I.m(k.parentNode,k)):I&&(C(),R(I,1,1,()=>{I=null}),G()),l[6]?S&&(C(),R(S,1,1,()=>{S=null}),G()):S?(S.p(l,h),h&64&&v(S,1)):(S=he(l),S.c(),v(S,1),S.m(a.parentNode,a))},i(l){d||(v(t.$$.fragment,l),v(o),v(E),v(A),v(I),v(S),d=!0)},o(l){R(t.$$.fragment,l),R(o),R(E),R(A),R(I),R(S),d=!1},d(l){L(t,l),l&&b(r),l&&b(e),l&&b(u),m[_].d(l),l&&b(p),E&&E.d(l),l&&b(f),A&&A.d(l),l&&b(c),I&&I.d(l),l&&b(k),S&&S.d(l),l&&b(a)}}}function Ye(n,t,r){let e,i,s,u,_;W(n,K,$=>r(8,i=$)),W(n,ce,$=>r(21,s=$)),W(n,ae,$=>r(22,u=$)),W(n,ue,$=>r(9,_=$));let{dto:o=new Ie}=t,p,f=Se,c="",k="",a=!1,d="";async function g(){if(r(5,k=""),r(4,c=""),p.reportValidity()){te(K,i=!0,i),r(0,o.lang=u,o);const $=await fetch(new URL("new_registration.php",s).toString(),{method:"POST",body:JSON.stringify(o)});if($.status===200)r(6,a=!0),localStorage.removeItem("newRegistrationDto");else{let ee=await $.text();ee==="Email already used."?r(4,c="registration.form.error.emailUsed"):ee==="Invalid form."?r(5,k="registration.form.error.invalidForm"):ee==="Error sending confirmation email."?r(5,k="registration.form.error.emailError"):ee==="Too many requests."?r(4,c="registration.form.error.pleaseWait"):r(5,k="registration.form.error.errorOccurred")}te(K,i=!1,i)}}function m($){d=$,r(1,d)}function T($){k=$,r(5,k)}function E($){c=$,r(4,c)}function A($){d=$,r(1,d)}function I($){k=$,r(5,k)}function S($){c=$,r(4,c)}const l=()=>g();function h($){P[$?"unshift":"push"](()=>{p=$,r(2,p)})}function q($){o=$,r(0,o)}function M($){f=$,r(3,f)}return n.$$set=$=>{"dto"in $&&r(0,o=$.dto)},n.$$.update=()=>{n.$$.dirty&3&&r(7,e=[o.email,d].some($=>$.match(/outlook\.|live\.|hotmail\.|msn\.|passport\./)))},[o,d,p,f,c,k,a,e,i,_,g,m,T,E,A,I,S,l,h,q,M]}class Ke extends le{constructor(t){super();oe(this,t,Ye,Je,fe,{dto:0})}}export{Ke as default};
