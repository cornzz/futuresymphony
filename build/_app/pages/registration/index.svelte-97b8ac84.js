import{S as fe,i as ae,s as ue,k as z,f as w,m as X,n as R,o as Z,p as v,d as k,J as Y,M as _e,X as me,u as ve,ai as te,e as M,j as N,c as O,a as C,l as S,b as K,E as re,V as Ee,F as G,W as pe,Z as ie,t as U,g as D,G as ce,h as j,H as ne,U as L,aj as q,v as B,w as V,x as F,ak as W,A as H,ae as Re,a8 as le,a9 as oe}from"../../chunks/vendor-3b8c650a.js";import{I as Ae,a as ee}from"../../chunks/selectData-f7eb7e31.js";import{R as Ie,a as ye}from"../../chunks/RegistrationForm-6045f255.js";import{B as ge}from"../../chunks/Button-17e544cc.js";import{l as Q,c as de}from"../../chunks/stores-1b619b13.js";import{f as se}from"../../chunks/index-14c4ccb3.js";const Te=!1;function Ne(n){let e,r,t,i,s,a,u,f;const p=[De,Ue],_=[];function b(d,o){return d[3]?1:0}return s=b(n),a=_[s]=p[s](n),{c(){e=M("div"),r=M("hr"),t=N(),i=M("div"),a.c(),this.h()},l(d){e=O(d,"DIV",{style:!0});var o=C(e);r=O(o,"HR",{}),t=S(o),i=O(o,"DIV",{class:!0});var c=C(i);a.l(c),c.forEach(k),o.forEach(k),this.h()},h(){K(i,"class","resend svelte-rart3l"),re(i,"success",n[3]),Ee(e,"overflow","hidden")},m(d,o){w(d,e,o),G(e,r),G(e,t),G(e,i),_[s].m(i,null),f=!0},p(d,o){let c=s;s=b(d),s===c?_[s].p(d,o):(X(),R(_[c],1,1,()=>{_[c]=null}),Z(),a=_[s],a?a.p(d,o):(a=_[s]=p[s](d),a.c()),v(a,1),a.m(i,null)),o&8&&re(i,"success",d[3])},i(d){f||(v(a),pe(()=>{u||(u=ie(e,se,{},!0)),u.run(1)}),f=!0)},o(d){R(a),u||(u=ie(e,se,{},!1)),u.run(0),f=!1},d(d){d&&k(e),_[s].d(),d&&u&&u.end()}}}function Se(n){let e=n[6](`registration.resend.${n[1]}`)+"",r,t,i,s=n[6]("registration.resend.here")+"",a,u,f,p;return{c(){r=U(e),t=N(),i=M("span"),a=U(s),u=U("."),this.h()},l(_){r=D(_,e),t=S(_),i=O(_,"SPAN",{class:!0});var b=C(i);a=D(b,s),b.forEach(k),u=D(_,"."),this.h()},h(){K(i,"class","link")},m(_,b){w(_,r,b),w(_,t,b),w(_,i,b),G(i,a),w(_,u,b),f||(p=ce(i,"click",n[11]),f=!0)},p(_,b){b&66&&e!==(e=_[6](`registration.resend.${_[1]}`)+"")&&j(r,e),b&64&&s!==(s=_[6]("registration.resend.here")+"")&&j(a,s)},i:ne,o:ne,d(_){_&&k(r),_&&k(t),_&&k(i),_&&k(u),f=!1,p()}}}function Ue(n){let e=n[6]("registration.resend.success")+"",r,t,i=n[6]("registration.resend.sendAgain")+"",s,a,u,f=n[6]("registration.resend.here")+"",p,_,b=(n[4]>0?`(${Math.floor(n[4]/60)}:${("0"+n[4]%60).slice(-2)})`:"")+"",d,o,c;return{c(){r=U(e),t=N(),s=U(i),a=N(),u=M("span"),p=U(f),_=U(`.
                `),d=U(b),this.h()},l(g){r=D(g,e),t=S(g),s=D(g,i),a=S(g),u=O(g,"SPAN",{class:!0});var m=C(u);p=D(m,f),m.forEach(k),_=D(g,`.
                `),d=D(g,b),this.h()},h(){K(u,"class","link svelte-rart3l"),re(u,"disabled",n[4]>0)},m(g,m){w(g,r,m),w(g,t,m),w(g,s,m),w(g,a,m),w(g,u,m),G(u,p),w(g,_,m),w(g,d,m),o||(c=ce(u,"click",n[14]),o=!0)},p(g,m){m&64&&e!==(e=g[6]("registration.resend.success")+"")&&j(r,e),m&64&&i!==(i=g[6]("registration.resend.sendAgain")+"")&&j(s,i),m&64&&f!==(f=g[6]("registration.resend.here")+"")&&j(p,f),m&16&&re(u,"disabled",g[4]>0),m&16&&b!==(b=(g[4]>0?`(${Math.floor(g[4]/60)}:${("0"+g[4]%60).slice(-2)})`:"")+"")&&j(d,b)},i:ne,o:ne,d(g){g&&k(r),g&&k(t),g&&k(s),g&&k(a),g&&k(u),g&&k(_),g&&k(d),o=!1,c()}}}function De(n){let e,r=n[6]("registration.resend.enterYourEmail")+"",t,i,s,a,u,f,p,_;function b(o){n[12](o)}let d={type:"email",name:"resendEmail",placeholder:n[6]("registration.resend.yourEmail")};return n[0]!==void 0&&(d.value=n[0]),a=new Ae({props:d}),L.push(()=>q(a,"value",b)),a.$on("keyup",n[13]),p=new ge({props:{type:"primary",slim:!0,disabled:n[5],$$slots:{default:[je]},$$scope:{ctx:n}}}),p.$on("click",n[7]),{c(){e=M("span"),t=U(r),i=U(":"),s=N(),B(a.$$.fragment),f=N(),B(p.$$.fragment),this.h()},l(o){e=O(o,"SPAN",{class:!0});var c=C(e);t=D(c,r),i=D(c,":"),c.forEach(k),s=S(o),V(a.$$.fragment,o),f=S(o),V(p.$$.fragment,o),this.h()},h(){K(e,"class","svelte-rart3l")},m(o,c){w(o,e,c),G(e,t),G(e,i),w(o,s,c),F(a,o,c),w(o,f,c),F(p,o,c),_=!0},p(o,c){(!_||c&64)&&r!==(r=o[6]("registration.resend.enterYourEmail")+"")&&j(t,r);const g={};c&64&&(g.placeholder=o[6]("registration.resend.yourEmail")),!u&&c&1&&(u=!0,g.value=o[0],W(()=>u=!1)),a.$set(g);const m={};c&32&&(m.disabled=o[5]),c&524352&&(m.$$scope={dirty:c,ctx:o}),p.$set(m)},i(o){_||(v(a.$$.fragment,o),v(p.$$.fragment,o),_=!0)},o(o){R(a.$$.fragment,o),R(p.$$.fragment,o),_=!1},d(o){o&&k(e),o&&k(s),H(a,o),o&&k(f),H(p,o)}}}function je(n){let e=n[6]("registration.form.submit")+"",r;return{c(){r=U(e)},l(t){r=D(t,e)},m(t,i){w(t,r,i)},p(t,i){i&64&&e!==(e=t[6]("registration.form.submit")+"")&&j(r,e)},d(t){t&&k(r)}}}function Be(n){let e,r,t,i;const s=[Se,Ne],a=[];function u(f,p){return f[2]?1:0}return e=u(n),r=a[e]=s[e](n),{c(){r.c(),t=z()},l(f){r.l(f),t=z()},m(f,p){a[e].m(f,p),w(f,t,p),i=!0},p(f,[p]){let _=e;e=u(f),e===_?a[e].p(f,p):(X(),R(a[_],1,1,()=>{a[_]=null}),Z(),r=a[e],r?r.p(f,p):(r=a[e]=s[e](f),r.c()),v(r,1),r.m(t.parentNode,t))},i(f){i||(v(r),i=!0)},o(f){R(r),i=!1},d(f){a[e].d(f),f&&k(t)}}}function Ve(n,e,r){let t,i,s,a;Y(n,Q,l=>r(5,t=l)),Y(n,de,l=>r(16,i=l)),Y(n,_e,l=>r(17,s=l)),Y(n,me,l=>r(6,a=l));let{type:u}=e,{existingEmail:f=""}=e,{email:p=""}=e,{error:_}=e,{warning:b}=e,d=!1,o=!1,c=0,g;function m(l){r(4,c=new Date(new Date().getTime()+l).getTime()-new Date().getTime()),g=setInterval(()=>{c>0?r(4,c--,c):clearInterval(g)},1e3)}async function T(){r(8,_=""),r(9,b="");const l=document.getElementById("resendEmail");if(l&&l.reportValidity()||!l&&p){te(Q,t=!0,t);let h=new URLSearchParams({email:p,lang:s});const J=await fetch(new URL("base_registration.php?"+h,i));if(J.ok)r(3,o=!0),m(5*60);else{let P=await J.text();P==="Email not found."?r(8,_="registration.resend.notFound"):P==="Error sending confirmation email."?r(8,_="registration.form.error.emailError"):P==="Too many requests."?r(9,b="registration.resend.pleaseWait"):r(8,_="registration.form.error.errorOccurred"),r(3,o=!1)}te(Q,t=!1,t)}}ve(()=>r(0,p=f));const E=()=>r(2,d=!d);function A(l){p=l,r(0,p)}const I=l=>l.key==="Enter"&&T(),y=()=>c<=0&&T();return n.$$set=l=>{"type"in l&&r(1,u=l.type),"existingEmail"in l&&r(10,f=l.existingEmail),"email"in l&&r(0,p=l.email),"error"in l&&r(8,_=l.error),"warning"in l&&r(9,b=l.warning)},[p,u,d,o,c,t,a,T,_,b,f,E,A,I,y]}class be extends fe{constructor(e){super();ae(this,e,Ve,Be,ue,{type:1,existingEmail:10,email:0,error:8,warning:9})}}function Fe(n){let e,r;return e=new ee({props:{type:"info",$$slots:{default:[Le]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){F(e,t,i),r=!0},p(t,i){const s={};i&8389170&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){R(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function He(n){let e,r;return e=new ee({props:{type:"success",$$slots:{default:[Pe]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){F(e,t,i),r=!0},p(t,i){const s={};i&8389171&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){R(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function Le(n){let e,r=n[9]("registration.firstStep")+"",t,i=n[9]("registration.editingAllowedUntil")+"",s,a,u,f,p,_,b;function d(m){n[14](m)}function o(m){n[15](m)}function c(m){n[16](m)}let g={type:"alreadyRegistered"};return n[1]!==void 0&&(g.email=n[1]),n[5]!==void 0&&(g.error=n[5]),n[4]!==void 0&&(g.warning=n[4]),u=new be({props:g}),L.push(()=>q(u,"email",d)),L.push(()=>q(u,"error",o)),L.push(()=>q(u,"warning",c)),{c(){e=new le,t=N(),s=U(i),a=N(),B(u.$$.fragment),this.h()},l(m){e=oe(m),t=S(m),s=D(m,i),a=S(m),V(u.$$.fragment,m),this.h()},h(){e.a=t},m(m,T){e.m(r,m,T),w(m,t,T),w(m,s,T),w(m,a,T),F(u,m,T),b=!0},p(m,T){(!b||T&512)&&r!==(r=m[9]("registration.firstStep")+"")&&e.p(r),(!b||T&512)&&i!==(i=m[9]("registration.editingAllowedUntil")+"")&&j(s,i);const E={};!f&&T&2&&(f=!0,E.email=m[1],W(()=>f=!1)),!p&&T&32&&(p=!0,E.error=m[5],W(()=>p=!1)),!_&&T&16&&(_=!0,E.warning=m[4],W(()=>_=!1)),u.$set(E)},i(m){b||(v(u.$$.fragment,m),b=!0)},o(m){R(u.$$.fragment,m),b=!1},d(m){m&&e.d(),m&&k(t),m&&k(s),m&&k(a),H(u,m)}}}function Pe(n){let e,r=n[9]("registration.success",{values:{email:n[0].email}})+"",t,i,s,a,u,f;function p(o){n[11](o)}function _(o){n[12](o)}function b(o){n[13](o)}let d={type:"didNotReceive",existingEmail:n[0].email};return n[1]!==void 0&&(d.email=n[1]),n[5]!==void 0&&(d.error=n[5]),n[4]!==void 0&&(d.warning=n[4]),i=new be({props:d}),L.push(()=>q(i,"email",p)),L.push(()=>q(i,"error",_)),L.push(()=>q(i,"warning",b)),{c(){e=new le,t=N(),B(i.$$.fragment),this.h()},l(o){e=oe(o),t=S(o),V(i.$$.fragment,o),this.h()},h(){e.a=t},m(o,c){e.m(r,o,c),w(o,t,c),F(i,o,c),f=!0},p(o,c){(!f||c&513)&&r!==(r=o[9]("registration.success",{values:{email:o[0].email}})+"")&&e.p(r);const g={};c&1&&(g.existingEmail=o[0].email),!s&&c&2&&(s=!0,g.email=o[1],W(()=>s=!1)),!a&&c&32&&(a=!0,g.error=o[5],W(()=>a=!1)),!u&&c&16&&(u=!0,g.warning=o[4],W(()=>u=!1)),i.$set(g)},i(o){f||(v(i.$$.fragment,o),f=!0)},o(o){R(i.$$.fragment,o),f=!1},d(o){o&&e.d(),o&&k(t),H(i,o)}}}function ke(n){let e,r,t,i;return r=new ee({props:{type:"warning",$$slots:{default:[Me]},$$scope:{ctx:n}}}),{c(){e=M("div"),B(r.$$.fragment),this.h()},l(s){e=O(s,"DIV",{class:!0});var a=C(e);V(r.$$.fragment,a),a.forEach(k),this.h()},h(){K(e,"class","blockedInfobox svelte-1iclxit")},m(s,a){w(s,e,a),F(r,e,null),i=!0},p(s,a){const u={};a&8389120&&(u.$$scope={dirty:a,ctx:s}),r.$set(u)},i(s){i||(v(r.$$.fragment,s),pe(()=>{t||(t=ie(e,se,{},!0)),t.run(1)}),i=!0)},o(s){R(r.$$.fragment,s),t||(t=ie(e,se,{},!1)),t.run(0),i=!1},d(s){s&&k(e),H(r),s&&t&&t.end()}}}function Me(n){let e,r=n[9]("registration.outlookBlocked")+"",t;return{c(){e=new le,t=z(),this.h()},l(i){e=oe(i),t=z(),this.h()},h(){e.a=t},m(i,s){e.m(r,i,s),w(i,t,s)},p(i,s){s&512&&r!==(r=i[9]("registration.outlookBlocked")+"")&&e.p(r)},d(i){i&&k(t),i&&e.d()}}}function he(n){let e,r;return e=new ee({props:{type:"warning",$$slots:{default:[Oe]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){F(e,t,i),r=!0},p(t,i){const s={};i&8389136&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){R(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function Oe(n){let e=n[9](n[4])+"",r;return{c(){r=U(e)},l(t){r=D(t,e)},m(t,i){w(t,r,i)},p(t,i){i&528&&e!==(e=t[9](t[4])+"")&&j(r,e)},d(t){t&&k(r)}}}function we(n){let e,r;return e=new ee({props:{type:"error",$$slots:{default:[qe]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){F(e,t,i),r=!0},p(t,i){const s={};i&8389152&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){R(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function qe(n){let e=n[9](n[5])+"",r;return{c(){r=U(e)},l(t){r=D(t,e)},m(t,i){w(t,r,i)},p(t,i){i&544&&e!==(e=t[9](t[5])+"")&&j(r,e)},d(t){t&&k(r)}}}function $e(n){let e,r,t,i;function s(f){n[19](f)}function a(f){n[20](f)}let u={newRegistration:!0,$$slots:{default:[Je]},$$scope:{ctx:n}};return n[0]!==void 0&&(u.dto=n[0]),n[3]!==void 0&&(u.regulationsAccepted=n[3]),e=new Ie({props:u}),n[18](e),L.push(()=>q(e,"dto",s)),L.push(()=>q(e,"regulationsAccepted",a)),{c(){B(e.$$.fragment)},l(f){V(e.$$.fragment,f)},m(f,p){F(e,f,p),i=!0},p(f,p){const _={};p&8389384&&(_.$$scope={dirty:p,ctx:f}),!r&&p&1&&(r=!0,_.dto=f[0],W(()=>r=!1)),!t&&p&8&&(t=!0,_.regulationsAccepted=f[3],W(()=>t=!1)),e.$set(_)},i(f){i||(v(e.$$.fragment,f),i=!0)},o(f){R(e.$$.fragment,f),i=!1},d(f){n[18](null),H(e,f)}}}function We(n){let e=n[9]("registration.form.submit")+"",r;return{c(){r=U(e)},l(t){r=D(t,e)},m(t,i){w(t,r,i)},p(t,i){i&512&&e!==(e=t[9]("registration.form.submit")+"")&&j(r,e)},d(t){t&&k(r)}}}function Je(n){let e,r,t,i;return t=new ge({props:{type:"primary",disabled:!n[3]||n[8],$$slots:{default:[We]},$$scope:{ctx:n}}}),t.$on("click",n[17]),{c(){e=M("div"),r=N(),B(t.$$.fragment)},l(s){e=O(s,"DIV",{}),C(e).forEach(k),r=S(s),V(t.$$.fragment,s)},m(s,a){w(s,e,a),w(s,r,a),F(t,s,a),i=!0},p(s,a){const u={};a&264&&(u.disabled=!s[3]||s[8]),a&8389120&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){i||(v(t.$$.fragment,s),i=!0)},o(s){R(t.$$.fragment,s),i=!1},d(s){s&&k(e),s&&k(r),H(t,s)}}}function Ye(n){let e,r,t,i=n[9]("registration.title")+"",s,a,u,f,p,_,b,d,o,c;e=new Re({props:{title:n[9]("registration.meta.title"),description:n[9]("registration.meta.description")}});const g=[He,Fe],m=[];function T(l,h){return l[6]?0:1}u=T(n),f=m[u]=g[u](n);let E=n[7]&&ke(n),A=n[4]&&he(n),I=n[5]&&we(n),y=!n[6]&&$e(n);return{c(){B(e.$$.fragment),r=N(),t=M("h1"),s=U(i),a=N(),f.c(),p=N(),E&&E.c(),_=N(),A&&A.c(),b=N(),I&&I.c(),d=N(),y&&y.c(),o=z(),this.h()},l(l){V(e.$$.fragment,l),r=S(l),t=O(l,"H1",{class:!0});var h=C(t);s=D(h,i),h.forEach(k),a=S(l),f.l(l),p=S(l),E&&E.l(l),_=S(l),A&&A.l(l),b=S(l),I&&I.l(l),d=S(l),y&&y.l(l),o=z(),this.h()},h(){K(t,"class","cover-heading")},m(l,h){F(e,l,h),w(l,r,h),w(l,t,h),G(t,s),w(l,a,h),m[u].m(l,h),w(l,p,h),E&&E.m(l,h),w(l,_,h),A&&A.m(l,h),w(l,b,h),I&&I.m(l,h),w(l,d,h),y&&y.m(l,h),w(l,o,h),c=!0},p(l,[h]){const J={};h&512&&(J.title=l[9]("registration.meta.title")),h&512&&(J.description=l[9]("registration.meta.description")),e.$set(J),(!c||h&512)&&i!==(i=l[9]("registration.title")+"")&&j(s,i);let P=u;u=T(l),u===P?m[u].p(l,h):(X(),R(m[P],1,1,()=>{m[P]=null}),Z(),f=m[u],f?f.p(l,h):(f=m[u]=g[u](l),f.c()),v(f,1),f.m(p.parentNode,p)),l[7]?E?(E.p(l,h),h&128&&v(E,1)):(E=ke(l),E.c(),v(E,1),E.m(_.parentNode,_)):E&&(X(),R(E,1,1,()=>{E=null}),Z()),l[4]?A?(A.p(l,h),h&16&&v(A,1)):(A=he(l),A.c(),v(A,1),A.m(b.parentNode,b)):A&&(X(),R(A,1,1,()=>{A=null}),Z()),l[5]?I?(I.p(l,h),h&32&&v(I,1)):(I=we(l),I.c(),v(I,1),I.m(d.parentNode,d)):I&&(X(),R(I,1,1,()=>{I=null}),Z()),l[6]?y&&(X(),R(y,1,1,()=>{y=null}),Z()):y?(y.p(l,h),h&64&&v(y,1)):(y=$e(l),y.c(),v(y,1),y.m(o.parentNode,o))},i(l){c||(v(e.$$.fragment,l),v(f),v(E),v(A),v(I),v(y),c=!0)},o(l){R(e.$$.fragment,l),R(f),R(E),R(A),R(I),R(y),c=!1},d(l){H(e,l),l&&k(r),l&&k(t),l&&k(a),m[u].d(l),l&&k(p),E&&E.d(l),l&&k(_),A&&A.d(l),l&&k(b),I&&I.d(l),l&&k(d),y&&y.d(l),l&&k(o)}}}function Ce(n,e,r){let t,i,s,a,u;Y(n,Q,$=>r(8,i=$)),Y(n,de,$=>r(21,s=$)),Y(n,_e,$=>r(22,a=$)),Y(n,me,$=>r(9,u=$));let{dto:f=new ye}=e,p,_=Te,b="",d="",o=!1,c="";async function g(){if(r(5,d=""),r(4,b=""),p.reportValidity()){te(Q,i=!0,i),r(0,f.lang=a,f);const $=await fetch(new URL("base_registration.php",s),{method:"POST",body:JSON.stringify(f)}),x=await $.text();$.ok&&x==="Registration successful."?(r(6,o=!0),localStorage.removeItem("newRegistrationDto")):x==="Email already used."?r(4,b="registration.form.error.emailUsed"):x==="Invalid form."?r(5,d="registration.form.error.invalidForm"):x==="Error sending confirmation email."?r(5,d="registration.form.error.emailError"):x==="Too many requests."?r(4,b="registration.form.error.pleaseWait"):r(5,d="registration.form.error.errorOccurred"),te(Q,i=!1,i)}}function m($){c=$,r(1,c)}function T($){d=$,r(5,d)}function E($){b=$,r(4,b)}function A($){c=$,r(1,c)}function I($){d=$,r(5,d)}function y($){b=$,r(4,b)}const l=()=>g();function h($){L[$?"unshift":"push"](()=>{p=$,r(2,p)})}function J($){f=$,r(0,f)}function P($){_=$,r(3,_)}return n.$$set=$=>{"dto"in $&&r(0,f=$.dto)},n.$$.update=()=>{n.$$.dirty&3&&r(7,t=[f.email,c].some($=>$.match(/outlook\.|live\.|hotmail\.|msn\.|passport\./)))},[f,c,p,_,b,d,o,t,i,u,g,m,T,E,A,I,y,l,h,J,P]}class xe extends fe{constructor(e){super();ae(this,e,Ce,Ye,ue,{dto:0})}}export{xe as default};
