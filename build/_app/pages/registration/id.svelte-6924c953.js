import{S as x,i as ee,s as te,e as E,t as v,j as H,k as M,c as N,a as S,g as y,d as p,l as T,b as R,f as b,F as B,h as J,n as $,o as V,p as k,J as A,u as ne,m as Y,X as oe,a2 as U,Q as q,H as L,a3 as P,v as O,w as C,x as D,a4 as Q,A as F,a0 as re}from"../../chunks/vendor-d9d57f64.js";import{a as le,B as X,I as z}from"../../chunks/Button-fafb8375.js";import{l as j,c as se}from"../../chunks/stores-b871fb0f.js";function G(s,e,t){const n=s.slice();return n[17]=e[t],n}function ie(s){let e,t,n,o=s[7]("error.goBack")+"",l;return{c(){e=E("div"),t=v(`Registration not found.
        `),n=E("a"),l=v(o),this.h()},l(i){e=N(i,"DIV",{class:!0});var r=S(e);t=y(r,`Registration not found.
        `),n=N(r,"A",{href:!0,class:!0});var u=S(n);l=y(u,o),u.forEach(p),r.forEach(p),this.h()},h(){R(n,"href","/"),R(n,"class","link"),R(e,"class","center svelte-3a7dix")},m(i,r){b(i,e,r),B(e,t),B(e,n),B(n,l)},p(i,r){r&128&&o!==(o=i[7]("error.goBack")+"")&&J(l,o)},i:L,o:L,d(i){i&&p(e)}}}function ae(s){let e,t,n,o,l,i,r;const u=[ce,fe],f=[];function m(a,_){return a[5].length===0?0:1}e=m(s),t=f[e]=u[e](s);function d(a){s[12](a)}function h(a){s[13](a)}let c={disabled:s[4],$$slots:{default:[be]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.dto=s[0]),s[6]!==void 0&&(c.changed=s[6]),o=new le({props:c}),s[11](o),q.push(()=>P(o,"dto",d)),q.push(()=>P(o,"changed",h)),{c(){t.c(),n=H(),O(o.$$.fragment)},l(a){t.l(a),n=T(a),C(o.$$.fragment,a)},m(a,_){f[e].m(a,_),b(a,n,_),D(o,a,_),r=!0},p(a,_){let I=e;e=m(a),e===I?f[e].p(a,_):(Y(),$(f[I],1,1,()=>{f[I]=null}),V(),t=f[e],t?t.p(a,_):(t=f[e]=u[e](a),t.c()),k(t,1),t.m(n.parentNode,n));const w={};_&16&&(w.disabled=a[4]),_&1048664&&(w.$$scope={dirty:_,ctx:a}),!l&&_&1&&(l=!0,w.dto=a[0],Q(()=>l=!1)),!i&&_&64&&(i=!0,w.changed=a[6],Q(()=>i=!1)),o.$set(w)},i(a){r||(k(t),k(o.$$.fragment,a),r=!0)},o(a){$(t),$(o.$$.fragment,a),r=!1},d(a){f[e].d(a),a&&p(n),s[11](null),F(o,a)}}}function fe(s){let e,t;return e=new z({props:{type:"warning",$$slots:{default:[ue]},$$scope:{ctx:s}}}),{c(){O(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){D(e,n,o),t=!0},p(n,o){const l={};o&1048608&&(l.$$scope={dirty:o,ctx:n}),e.$set(l)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function ce(s){let e,t;return e=new z({props:{type:"success",$$slots:{default:[_e]},$$scope:{ctx:s}}}),{c(){O(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){D(e,n,o),t=!0},p(n,o){const l={};o&1048576&&(l.$$scope={dirty:o,ctx:n}),e.$set(l)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function K(s){let e,t=s[17]+"",n;return{c(){e=E("li"),n=v(t),this.h()},l(o){e=N(o,"LI",{class:!0});var l=S(e);n=y(l,t),l.forEach(p),this.h()},h(){R(e,"class","svelte-3a7dix")},m(o,l){b(o,e,l),B(e,n)},p(o,l){l&32&&t!==(t=o[17]+"")&&J(n,t)},d(o){o&&p(e)}}}function ue(s){let e,t,n=s[5],o=[];for(let l=0;l<n.length;l+=1)o[l]=K(G(s,n,l));return{c(){e=v(`Following fields are missing for your registration to be complete:
            `),t=E("ul");for(let l=0;l<o.length;l+=1)o[l].c()},l(l){e=y(l,`Following fields are missing for your registration to be complete:
            `),t=N(l,"UL",{});var i=S(t);for(let r=0;r<o.length;r+=1)o[r].l(i);i.forEach(p)},m(l,i){b(l,e,i),b(l,t,i);for(let r=0;r<o.length;r+=1)o[r].m(t,null)},p(l,i){if(i&32){n=l[5];let r;for(r=0;r<n.length;r+=1){const u=G(l,n,r);o[r]?o[r].p(u,i):(o[r]=K(u),o[r].c(),o[r].m(t,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(l){l&&p(e),l&&p(t),re(o,l)}}}function _e(s){let e;return{c(){e=v("Your registration is complete!")},l(t){e=y(t,"Your registration is complete!")},m(t,n){b(t,e,n)},d(t){t&&p(e)}}}function me(s){let e;return{c(){e=E("div")},l(t){e=N(t,"DIV",{}),S(e).forEach(p)},m(t,n){b(t,e,n)},p:L,i:L,o:L,d(t){t&&p(e)}}}function pe(s){let e,t;return e=new X({props:{type:"outline",$$slots:{default:[de]},$$scope:{ctx:s}}}),e.$on("click",s[9]),{c(){O(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){D(e,n,o),t=!0},p(n,o){const l={};o&1048576&&(l.$$scope={dirty:o,ctx:n}),e.$set(l)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function de(s){let e;return{c(){e=v("Cancel")},l(t){e=y(t,"Cancel")},m(t,n){b(t,e,n)},d(t){t&&p(e)}}}function ge(s){let e=(s[3]?"Save":"Edit")+"",t;return{c(){t=v(e)},l(n){t=y(n,e)},m(n,o){b(n,t,o)},p(n,o){o&8&&e!==(e=(n[3]?"Save":"Edit")+"")&&J(t,e)},d(n){n&&p(t)}}}function be(s){let e,t,n,o,l;const i=[pe,me],r=[];function u(f,m){return f[3]?0:1}return e=u(s),t=r[e]=i[e](s),o=new X({props:{type:"primary",$$slots:{default:[ge]},$$scope:{ctx:s}}}),o.$on("click",s[10]),{c(){t.c(),n=H(),O(o.$$.fragment)},l(f){t.l(f),n=T(f),C(o.$$.fragment,f)},m(f,m){r[e].m(f,m),b(f,n,m),D(o,f,m),l=!0},p(f,m){let d=e;e=u(f),e===d?r[e].p(f,m):(Y(),$(r[d],1,1,()=>{r[d]=null}),V(),t=r[e],t?t.p(f,m):(t=r[e]=i[e](f),t.c()),k(t,1),t.m(n.parentNode,n));const h={};m&1048584&&(h.$$scope={dirty:m,ctx:f}),o.$set(h)},i(f){l||(k(t),k(o.$$.fragment,f),l=!0)},o(f){$(t),$(o.$$.fragment,f),l=!1},d(f){r[e].d(f),f&&p(n),F(o,f)}}}function he(s){let e,t,n=s[7]("registration.yourRegistration")+"",o,l,i,r,u,f;const m=[ae,ie],d=[];function h(c,a){return c[0]?0:c[2]?1:-1}return~(i=h(s))&&(r=d[i]=m[i](s)),{c(){e=E("h1"),t=E("b"),o=v(n),l=H(),r&&r.c(),u=M(),this.h()},l(c){e=N(c,"H1",{class:!0});var a=S(e);t=N(a,"B",{});var _=S(t);o=y(_,n),_.forEach(p),a.forEach(p),l=T(c),r&&r.l(c),u=M(),this.h()},h(){R(e,"class","cover-heading")},m(c,a){b(c,e,a),B(e,t),B(t,o),b(c,l,a),~i&&d[i].m(c,a),b(c,u,a),f=!0},p(c,[a]){(!f||a&128)&&n!==(n=c[7]("registration.yourRegistration")+"")&&J(o,n);let _=i;i=h(c),i===_?~i&&d[i].p(c,a):(r&&(Y(),$(d[_],1,1,()=>{d[_]=null}),V()),~i?(r=d[i],r?r.p(c,a):(r=d[i]=m[i](c),r.c()),k(r,1),r.m(u.parentNode,u)):r=null)},i(c){f||(k(r),f=!0)},o(c){$(r),f=!1},d(c){c&&p(e),c&&p(l),~i&&d[i].d(c),c&&p(u)}}}function $e(s,e,t){let n,o,l;A(s,j,g=>t(15,n=g)),A(s,se,g=>t(16,o=g)),A(s,oe,g=>t(7,l=g));let{dto:i=null}=e,r,u,f=!1,m=!1,d=!1,h=[],c=!1;async function a(){return r.reportValidity("#firstName, #lastName, #email, #dateOfBirth, #country")?(t(5,h=r.getInvalid()),console.log(`saving registration ${u}: ${JSON.stringify(i)}`),U(j,n=!0,n),await fetch(new URL("registration.php",o).toString(),{method:"POST",body:JSON.stringify(i)}),U(j,n=!1,n),t(6,c=!1),!0):!1}ne(()=>{U(j,n=!0,n),u=window.location.search.substring(1),console.log(`loading registration ${u}`),setTimeout(()=>{u==="1"&&t(0,i=JSON.parse('{"firstName":"Ernst","lastName":"Haft","email":"ernsthaft@web.de","dateOfBirth":"1990-01-01","country":"DE","idCopy":{"value":"","files": "null"},"pieceTitle":"","annotation":"","pieceScore":{"value":"","files":"null"},"pieceDemo":{"value":"","files":"null"},"instrumentation":"","remarks":""}')),U(j,n=!1,n),t(2,f=!0)},0)});const _=()=>{t(3,m=!1),t(4,d=!0)},I=async()=>{let g=m&&(!c||await a());t(3,m=!g),t(4,d=g)};function w(g){q[g?"unshift":"push"](()=>{r=g,t(1,r)})}function W(g){i=g,t(0,i)}function Z(g){c=g,t(6,c)}return s.$$set=g=>{"dto"in g&&t(0,i=g.dto)},s.$$.update=()=>{s.$$.dirty&2&&r&&(t(5,h=r.getInvalid()),t(4,d=!0))},[i,r,f,m,d,h,c,l,a,_,I,w,W,Z]}class we extends x{constructor(e){super();ee(this,e,$e,he,te,{dto:0})}}export{we as default};
