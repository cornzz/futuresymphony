import{S as x,i as ee,s as te,e as E,t as w,j as R,k as z,c as I,a as S,g as N,d as m,l as U,b as A,f as b,F as L,h as B,n as v,o as M,p as y,J as q,u as re,m as P,X as ne,a2 as V,Q,H as J,a3 as G,v as C,w as O,x as j,a4 as K,A as D,a0 as oe}from"../../chunks/vendor-21361551.js";import{d as le,I as X,a as se,B as W}from"../../chunks/Button-1b7d846e.js";import{l as H,c as ie}from"../../chunks/stores-1e3f24e1.js";function Y(i,t,r){const e=i.slice();return e[16]=t[r],e}function ae(i){let t,r=i[6]("registration.notfound")+"",e,n,a,s=i[6]("error.goBack")+"",o;return{c(){t=E("div"),e=w(r),n=R(),a=E("a"),o=w(s),this.h()},l(u){t=I(u,"DIV",{class:!0});var l=S(t);e=N(l,r),n=U(l),a=I(l,"A",{href:!0,class:!0});var _=S(a);o=N(_,s),_.forEach(m),l.forEach(m),this.h()},h(){A(a,"href","/"),A(a,"class","link"),A(t,"class","center svelte-3a7dix")},m(u,l){b(u,t,l),L(t,e),L(t,n),L(t,a),L(a,o)},p(u,l){l&64&&r!==(r=u[6]("registration.notfound")+"")&&B(e,r),l&64&&s!==(s=u[6]("error.goBack")+"")&&B(o,s)},i:J,o:J,d(u){u&&m(t)}}}function fe(i){let t,r,e,n,a,s,o,u,l;t=new X({props:{type:"info",$$slots:{default:[ue]},$$scope:{ctx:i}}});const _=[_e,ce],p=[];function h(f,d){return f[4].length===0?0:1}e=h(i),n=p[e]=_[e](i);function c(f){i[11](f)}function $(f){i[12](f)}let k={disabled:i[3],$$slots:{default:[he]},$$scope:{ctx:i}};return i[0]!==void 0&&(k.dto=i[0]),i[5]!==void 0&&(k.changed=i[5]),s=new se({props:k}),i[10](s),Q.push(()=>G(s,"dto",c)),Q.push(()=>G(s,"changed",$)),{c(){C(t.$$.fragment),r=R(),n.c(),a=R(),C(s.$$.fragment)},l(f){O(t.$$.fragment,f),r=U(f),n.l(f),a=U(f),O(s.$$.fragment,f)},m(f,d){j(t,f,d),b(f,r,d),p[e].m(f,d),b(f,a,d),j(s,f,d),l=!0},p(f,d){const T={};d&524352&&(T.$$scope={dirty:d,ctx:f}),t.$set(T);let g=e;e=h(f),e===g?p[e].p(f,d):(P(),v(p[g],1,1,()=>{p[g]=null}),M(),n=p[e],n?n.p(f,d):(n=p[e]=_[e](f),n.c()),y(n,1),n.m(a.parentNode,a));const F={};d&8&&(F.disabled=f[3]),d&524392&&(F.$$scope={dirty:d,ctx:f}),!o&&d&1&&(o=!0,F.dto=f[0],K(()=>o=!1)),!u&&d&32&&(u=!0,F.changed=f[5],K(()=>u=!1)),s.$set(F)},i(f){l||(y(t.$$.fragment,f),y(n),y(s.$$.fragment,f),l=!0)},o(f){v(t.$$.fragment,f),v(n),v(s.$$.fragment,f),l=!1},d(f){D(t,f),f&&m(r),p[e].d(f),f&&m(a),i[10](null),D(s,f)}}}function ue(i){let t=i[6]("registration.editingAllowedUntil")+"",r;return{c(){r=w(t)},l(e){r=N(e,t)},m(e,n){b(e,r,n)},p(e,n){n&64&&t!==(t=e[6]("registration.editingAllowedUntil")+"")&&B(r,t)},d(e){e&&m(r)}}}function ce(i){let t,r;return t=new X({props:{type:"warning",$$slots:{default:[pe]},$$scope:{ctx:i}}}),{c(){C(t.$$.fragment)},l(e){O(t.$$.fragment,e)},m(e,n){j(t,e,n),r=!0},p(e,n){const a={};n&524368&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||(y(t.$$.fragment,e),r=!0)},o(e){v(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function _e(i){let t,r;return t=new X({props:{type:"success",$$slots:{default:[me]},$$scope:{ctx:i}}}),{c(){C(t.$$.fragment)},l(e){O(t.$$.fragment,e)},m(e,n){j(t,e,n),r=!0},p(e,n){const a={};n&524352&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||(y(t.$$.fragment,e),r=!0)},o(e){v(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function Z(i){let t,r=i[6](i[16])+"",e;return{c(){t=E("li"),e=w(r),this.h()},l(n){t=I(n,"LI",{class:!0});var a=S(t);e=N(a,r),a.forEach(m),this.h()},h(){A(t,"class","svelte-3a7dix")},m(n,a){b(n,t,a),L(t,e)},p(n,a){a&80&&r!==(r=n[6](n[16])+"")&&B(e,r)},d(n){n&&m(t)}}}function pe(i){let t=i[6]("registration.missingForComplete")+"",r,e,n,a=i[4],s=[];for(let o=0;o<a.length;o+=1)s[o]=Z(Y(i,a,o));return{c(){r=w(t),e=R(),n=E("ul");for(let o=0;o<s.length;o+=1)s[o].c()},l(o){r=N(o,t),e=U(o),n=I(o,"UL",{});var u=S(n);for(let l=0;l<s.length;l+=1)s[l].l(u);u.forEach(m)},m(o,u){b(o,r,u),b(o,e,u),b(o,n,u);for(let l=0;l<s.length;l+=1)s[l].m(n,null)},p(o,u){if(u&64&&t!==(t=o[6]("registration.missingForComplete")+"")&&B(r,t),u&80){a=o[4];let l;for(l=0;l<a.length;l+=1){const _=Y(o,a,l);s[l]?s[l].p(_,u):(s[l]=Z(_),s[l].c(),s[l].m(n,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=a.length}},d(o){o&&m(r),o&&m(e),o&&m(n),oe(s,o)}}}function me(i){let t=i[6]("registration.complete")+"",r;return{c(){r=w(t)},l(e){r=N(e,t)},m(e,n){b(e,r,n)},p(e,n){n&64&&t!==(t=e[6]("registration.complete")+"")&&B(r,t)},d(e){e&&m(r)}}}function ge(i){let t;return{c(){t=E("div")},l(r){t=I(r,"DIV",{}),S(t).forEach(m)},m(r,e){b(r,t,e)},p:J,i:J,o:J,d(r){r&&m(t)}}}function de(i){let t,r;return t=new W({props:{type:"outline",$$slots:{default:[$e]},$$scope:{ctx:i}}}),t.$on("click",i[8]),{c(){C(t.$$.fragment)},l(e){O(t.$$.fragment,e)},m(e,n){j(t,e,n),r=!0},p(e,n){const a={};n&524352&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||(y(t.$$.fragment,e),r=!0)},o(e){v(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function $e(i){let t=i[6]("registration.form.cancel")+"",r;return{c(){r=w(t)},l(e){r=N(e,t)},m(e,n){b(e,r,n)},p(e,n){n&64&&t!==(t=e[6]("registration.form.cancel")+"")&&B(r,t)},d(e){e&&m(r)}}}function be(i){let t=(i[3]?i[6]("registration.form.edit"):i[6]("registration.form.save"))+"",r;return{c(){r=w(t)},l(e){r=N(e,t)},m(e,n){b(e,r,n)},p(e,n){n&72&&t!==(t=(e[3]?e[6]("registration.form.edit"):e[6]("registration.form.save"))+"")&&B(r,t)},d(e){e&&m(r)}}}function he(i){let t,r,e,n,a;const s=[de,ge],o=[];function u(l,_){return l[3]?1:0}return t=u(i),r=o[t]=s[t](i),n=new W({props:{type:"primary",$$slots:{default:[be]},$$scope:{ctx:i}}}),n.$on("click",i[9]),{c(){r.c(),e=R(),C(n.$$.fragment)},l(l){r.l(l),e=U(l),O(n.$$.fragment,l)},m(l,_){o[t].m(l,_),b(l,e,_),j(n,l,_),a=!0},p(l,_){let p=t;t=u(l),t===p?o[t].p(l,_):(P(),v(o[p],1,1,()=>{o[p]=null}),M(),r=o[t],r?r.p(l,_):(r=o[t]=s[t](l),r.c()),y(r,1),r.m(e.parentNode,e));const h={};_&524360&&(h.$$scope={dirty:_,ctx:l}),n.$set(h)},i(l){a||(y(r),y(n.$$.fragment,l),a=!0)},o(l){v(r),v(n.$$.fragment,l),a=!1},d(l){o[t].d(l),l&&m(e),D(n,l)}}}function ke(i){let t,r,e=i[6]("registration.yourRegistration")+"",n,a,s,o,u,l;const _=[fe,ae],p=[];function h(c,$){return c[0]?0:c[2]?1:-1}return~(s=h(i))&&(o=p[s]=_[s](i)),{c(){t=E("h1"),r=E("b"),n=w(e),a=R(),o&&o.c(),u=z(),this.h()},l(c){t=I(c,"H1",{class:!0});var $=S(t);r=I($,"B",{});var k=S(r);n=N(k,e),k.forEach(m),$.forEach(m),a=U(c),o&&o.l(c),u=z(),this.h()},h(){A(t,"class","cover-heading")},m(c,$){b(c,t,$),L(t,r),L(r,n),b(c,a,$),~s&&p[s].m(c,$),b(c,u,$),l=!0},p(c,[$]){(!l||$&64)&&e!==(e=c[6]("registration.yourRegistration")+"")&&B(n,e);let k=s;s=h(c),s===k?~s&&p[s].p(c,$):(o&&(P(),v(p[k],1,1,()=>{p[k]=null}),M()),~s?(o=p[s],o?o.p(c,$):(o=p[s]=_[s](c),o.c()),y(o,1),o.m(u.parentNode,u)):o=null)},i(c){l||(y(o),l=!0)},o(c){v(o),l=!1},d(c){c&&m(t),c&&m(a),~s&&p[s].d(c),c&&m(u)}}}function ve(i,t,r){let e,n,a;q(i,H,g=>r(14,e=g)),q(i,ie,g=>r(15,n=g)),q(i,ne,g=>r(6,a=g));let{dto:s=null}=t,o,u,l=!1,_=!1,p=[],h=!1;async function c(){if(o.reportValidity("#firstName, #lastName, #email, #dateOfBirth, #country")){r(4,p=o.getInvalid()),console.log(`saving registration ${u}: ${JSON.stringify(s)}`),V(H,e=!0,e);const g=await fetch(new URL(`registration.php?${u}`,n).toString(),{method:"POST",body:JSON.stringify(s)});return V(H,e=!1,e),r(5,h=!1),g.status===200}return!1}re(async()=>{V(H,e=!0,e),u=window.location.search.substring(1),console.log(`loading registration ${u}`),await fetch(new URL(`registration.php?key=${u}`,n).toString()),u==="1"&&r(0,s=JSON.parse('{"firstName":"Ernst","lastName":"Haft","email":"ernsthaft@web.de","dateOfBirth":"2004-06-01","country":"DE","idCopy":{"value":"id.jpeg"},"pieceTitle":"Title","annotation":"My piece","pieceScore":{"value":"piece.pdf"},"pieceDemo":{"value":"piece.mp3"},"instrumentation":[[false],[true],[false],[true],[true],[true],[false],[true,true],[false,true],[true],[true],[true],[false],[false],[true],[true],[true],[true],[true],[false],[true,true,true,true,true,true],[true,true,true,true,true],[false,true,true,false],[true,true,false],[false,false]],"scoreConfirmations":[false,false,false],"payment":{"value":"proof.pdf"}}')),V(H,e=!1,e),r(2,l=!0)});const $=()=>r(3,_=!0),k=async()=>r(3,_=!_&&(!h||await c()));function f(g){Q[g?"unshift":"push"](()=>{o=g,r(1,o)})}function d(g){s=g,r(0,s)}function T(g){h=g,r(5,h)}return i.$$set=g=>{"dto"in g&&r(0,s=g.dto)},i.$$.update=()=>{i.$$.dirty&2&&o&&(r(4,p=o.getInvalid()),r(3,_=!le))},[s,o,l,_,p,h,a,c,$,k,f,d,T]}class Be extends x{constructor(t){super();ee(this,t,ve,ke,te,{dto:0})}}export{Be as default};
