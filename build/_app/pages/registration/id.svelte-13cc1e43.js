import{S as x,i as ee,s as te,e as I,t as y,j,k as X,c as N,a as S,g as B,d as m,l as C,b as A,f as b,F as O,h as E,n as k,o as M,p as v,J as z,u as se,m as P,X as le,a2 as T,Q as q,H as J,a3 as G,v as D,w as F,x as L,a4 as K,A as R,a0 as ne}from"../../chunks/vendor-21361551.js";import{d as oe,I as Q,a as re,B as W}from"../../chunks/Button-1fd8b648.js";import{b as ie,l as H}from"../../chunks/stores-d7cb5688.js";import"../../chunks/index-5525c3de.js";function Y(i,t,s){const e=i.slice();return e[15]=t[s],e}function ae(i){let t,s=i[6]("registration.notfound")+"",e,l,a,r=i[6]("error.goBack")+"",o;return{c(){t=I("div"),e=y(s),l=j(),a=I("a"),o=y(r),this.h()},l(c){t=N(c,"DIV",{class:!0});var n=S(t);e=B(n,s),l=C(n),a=N(n,"A",{href:!0,class:!0});var p=S(a);o=B(p,r),p.forEach(m),n.forEach(m),this.h()},h(){A(a,"href","/"),A(a,"class","link"),A(t,"class","center svelte-3a7dix")},m(c,n){b(c,t,n),O(t,e),O(t,l),O(t,a),O(a,o)},p(c,n){n&64&&s!==(s=c[6]("registration.notfound")+"")&&E(e,s),n&64&&r!==(r=c[6]("error.goBack")+"")&&E(o,r)},i:J,o:J,d(c){c&&m(t)}}}function fe(i){let t,s,e,l,a,r,o,c,n;t=new Q({props:{type:"info",$$slots:{default:[ce]},$$scope:{ctx:i}}});const p=[_e,ue],_=[];function w(f,g){return f[4].length===0?0:1}e=w(i),l=_[e]=p[e](i);function u(f){i[11](f)}function $(f){i[12](f)}let h={disabled:i[3],$$slots:{default:[he]},$$scope:{ctx:i}};return i[0]!==void 0&&(h.dto=i[0]),i[5]!==void 0&&(h.changed=i[5]),r=new re({props:h}),i[10](r),q.push(()=>G(r,"dto",u)),q.push(()=>G(r,"changed",$)),{c(){D(t.$$.fragment),s=j(),l.c(),a=j(),D(r.$$.fragment)},l(f){F(t.$$.fragment,f),s=C(f),l.l(f),a=C(f),F(r.$$.fragment,f)},m(f,g){L(t,f,g),b(f,s,g),_[e].m(f,g),b(f,a,g),L(r,f,g),n=!0},p(f,g){const d={};g&262208&&(d.$$scope={dirty:g,ctx:f}),t.$set(d);let V=e;e=w(f),e===V?_[e].p(f,g):(P(),k(_[V],1,1,()=>{_[V]=null}),M(),l=_[e],l?l.p(f,g):(l=_[e]=p[e](f),l.c()),v(l,1),l.m(a.parentNode,a));const U={};g&8&&(U.disabled=f[3]),g&262250&&(U.$$scope={dirty:g,ctx:f}),!o&&g&1&&(o=!0,U.dto=f[0],K(()=>o=!1)),!c&&g&32&&(c=!0,U.changed=f[5],K(()=>c=!1)),r.$set(U)},i(f){n||(v(t.$$.fragment,f),v(l),v(r.$$.fragment,f),n=!0)},o(f){k(t.$$.fragment,f),k(l),k(r.$$.fragment,f),n=!1},d(f){R(t,f),f&&m(s),_[e].d(f),f&&m(a),i[10](null),R(r,f)}}}function ce(i){let t=i[6]("registration.editingAllowedUntil")+"",s;return{c(){s=y(t)},l(e){s=B(e,t)},m(e,l){b(e,s,l)},p(e,l){l&64&&t!==(t=e[6]("registration.editingAllowedUntil")+"")&&E(s,t)},d(e){e&&m(s)}}}function ue(i){let t,s;return t=new Q({props:{type:"warning",$$slots:{default:[pe]},$$scope:{ctx:i}}}),{c(){D(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,l){L(t,e,l),s=!0},p(e,l){const a={};l&262224&&(a.$$scope={dirty:l,ctx:e}),t.$set(a)},i(e){s||(v(t.$$.fragment,e),s=!0)},o(e){k(t.$$.fragment,e),s=!1},d(e){R(t,e)}}}function _e(i){let t,s;return t=new Q({props:{type:"success",$$slots:{default:[me]},$$scope:{ctx:i}}}),{c(){D(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,l){L(t,e,l),s=!0},p(e,l){const a={};l&262208&&(a.$$scope={dirty:l,ctx:e}),t.$set(a)},i(e){s||(v(t.$$.fragment,e),s=!0)},o(e){k(t.$$.fragment,e),s=!1},d(e){R(t,e)}}}function Z(i){let t,s=i[6](i[15])+"",e;return{c(){t=I("li"),e=y(s),this.h()},l(l){t=N(l,"LI",{class:!0});var a=S(t);e=B(a,s),a.forEach(m),this.h()},h(){A(t,"class","svelte-3a7dix")},m(l,a){b(l,t,a),O(t,e)},p(l,a){a&80&&s!==(s=l[6](l[15])+"")&&E(e,s)},d(l){l&&m(t)}}}function pe(i){let t=i[6]("registration.missingForComplete")+"",s,e,l,a=i[4],r=[];for(let o=0;o<a.length;o+=1)r[o]=Z(Y(i,a,o));return{c(){s=y(t),e=j(),l=I("ul");for(let o=0;o<r.length;o+=1)r[o].c()},l(o){s=B(o,t),e=C(o),l=N(o,"UL",{});var c=S(l);for(let n=0;n<r.length;n+=1)r[n].l(c);c.forEach(m)},m(o,c){b(o,s,c),b(o,e,c),b(o,l,c);for(let n=0;n<r.length;n+=1)r[n].m(l,null)},p(o,c){if(c&64&&t!==(t=o[6]("registration.missingForComplete")+"")&&E(s,t),c&80){a=o[4];let n;for(n=0;n<a.length;n+=1){const p=Y(o,a,n);r[n]?r[n].p(p,c):(r[n]=Z(p),r[n].c(),r[n].m(l,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=a.length}},d(o){o&&m(s),o&&m(e),o&&m(l),ne(r,o)}}}function me(i){let t=i[6]("registration.complete")+"",s;return{c(){s=y(t)},l(e){s=B(e,t)},m(e,l){b(e,s,l)},p(e,l){l&64&&t!==(t=e[6]("registration.complete")+"")&&E(s,t)},d(e){e&&m(s)}}}function ge(i){let t;return{c(){t=I("div")},l(s){t=N(s,"DIV",{}),S(t).forEach(m)},m(s,e){b(s,t,e)},p:J,i:J,o:J,d(s){s&&m(t)}}}function de(i){let t,s;return t=new W({props:{type:"outline",$$slots:{default:[$e]},$$scope:{ctx:i}}}),t.$on("click",i[8]),{c(){D(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,l){L(t,e,l),s=!0},p(e,l){const a={};l&262208&&(a.$$scope={dirty:l,ctx:e}),t.$set(a)},i(e){s||(v(t.$$.fragment,e),s=!0)},o(e){k(t.$$.fragment,e),s=!1},d(e){R(t,e)}}}function $e(i){let t=i[6]("registration.form.cancel")+"",s;return{c(){s=y(t)},l(e){s=B(e,t)},m(e,l){b(e,s,l)},p(e,l){l&64&&t!==(t=e[6]("registration.form.cancel")+"")&&E(s,t)},d(e){e&&m(s)}}}function be(i){let t=(i[3]?i[6]("registration.form.edit"):i[6]("registration.form.save"))+"",s;return{c(){s=y(t)},l(e){s=B(e,t)},m(e,l){b(e,s,l)},p(e,l){l&72&&t!==(t=(e[3]?e[6]("registration.form.edit"):e[6]("registration.form.save"))+"")&&E(s,t)},d(e){e&&m(s)}}}function he(i){let t,s,e,l,a;const r=[de,ge],o=[];function c(n,p){return n[3]?1:0}return t=c(i),s=o[t]=r[t](i),l=new W({props:{type:"primary",$$slots:{default:[be]},$$scope:{ctx:i}}}),l.$on("click",i[9]),{c(){s.c(),e=j(),D(l.$$.fragment)},l(n){s.l(n),e=C(n),F(l.$$.fragment,n)},m(n,p){o[t].m(n,p),b(n,e,p),L(l,n,p),a=!0},p(n,p){let _=t;t=c(n),t===_?o[t].p(n,p):(P(),k(o[_],1,1,()=>{o[_]=null}),M(),s=o[t],s?s.p(n,p):(s=o[t]=r[t](n),s.c()),v(s,1),s.m(e.parentNode,e));const w={};p&262216&&(w.$$scope={dirty:p,ctx:n}),l.$set(w)},i(n){a||(v(s),v(l.$$.fragment,n),a=!0)},o(n){k(s),k(l.$$.fragment,n),a=!1},d(n){o[t].d(n),n&&m(e),R(l,n)}}}function ke(i){let t,s,e=i[6]("registration.yourRegistration")+"",l,a,r,o,c,n;const p=[fe,ae],_=[];function w(u,$){return u[0]?0:u[2]?1:-1}return~(r=w(i))&&(o=_[r]=p[r](i)),{c(){t=I("h1"),s=I("b"),l=y(e),a=j(),o&&o.c(),c=X(),this.h()},l(u){t=N(u,"H1",{class:!0});var $=S(t);s=N($,"B",{});var h=S(s);l=B(h,e),h.forEach(m),$.forEach(m),a=C(u),o&&o.l(u),c=X(),this.h()},h(){A(t,"class","cover-heading")},m(u,$){b(u,t,$),O(t,s),O(s,l),b(u,a,$),~r&&_[r].m(u,$),b(u,c,$),n=!0},p(u,[$]){(!n||$&64)&&e!==(e=u[6]("registration.yourRegistration")+"")&&E(l,e);let h=r;r=w(u),r===h?~r&&_[r].p(u,$):(o&&(P(),k(_[h],1,1,()=>{_[h]=null}),M()),~r?(o=_[r],o?o.p(u,$):(o=_[r]=p[r](u),o.c()),v(o,1),o.m(c.parentNode,c)):o=null)},i(u){n||(v(o),n=!0)},o(u){k(o),n=!1},d(u){u&&m(t),u&&m(a),~r&&_[r].d(u),u&&m(c)}}}function ve(i,t,s){let e,l;z(i,H,d=>s(14,e=d)),z(i,le,d=>s(6,l=d));let{dto:a=null}=t;ie.set(!0);let r,o,c=!1,n=!1,p=[],_=!1;async function w(){if(r.reportValidity("#firstName, #lastName, #email, #dateOfBirth, #country")){s(4,p=r.getInvalid()),console.log(`saving registration ${o}: ${JSON.stringify(a)}`),T(H,e=!0,e);const d=await fetch(new URL(`registration.php?key=${o}`,`${window.location.origin}/api/`).toString(),{method:"POST",body:JSON.stringify(a)});return T(H,e=!1,e),s(5,_=!1),d.status===200}return!1}se(async()=>{T(H,e=!0,e),o=window.location.search.substring(1),console.log(`loading registration ${o}`),await fetch(new URL(`registration.php?key=${o}`,`${window.location.origin}/api/`).toString()),o==="1"&&s(0,a=JSON.parse('{"firstName":"Ernst","lastName":"Haft","email":"ernsthaft@web.de","dateOfBirth":"2004-06-01","country":"DE","idCopy":{"value":"id.jpeg"},"pieceTitle":"Title","annotation":"My piece","pieceScore":{"value":"piece.pdf"},"pieceDemo":{"value":"piece.mp3"},"instrumentation":[[false],[false],[false],[false],[false],[false],[false],[false,false],[false,false],[false],[false],[false],[false,false],[false],[false],[false],[false],[false],[false],[false,false,false,false,false,false],[false,false,false,false,false],[false,false,false,false],[false,false,false],[false,false]],"remarks":"","scoreConfirmations":[false,false,false],"proofOfPayment":{"value":""}}')),T(H,e=!1,e),s(2,c=!0)});const u=()=>s(3,n=!0),$=async()=>{s(3,n=!n&&(!_||await w())),n&&document.getElementById("back").click(),n&&r.closeSubsections()};function h(d){q[d?"unshift":"push"](()=>{r=d,s(1,r)})}function f(d){a=d,s(0,a)}function g(d){_=d,s(5,_)}return i.$$set=d=>{"dto"in d&&s(0,a=d.dto)},i.$$.update=()=>{i.$$.dirty&2&&r&&(s(4,p=r.getInvalid()),s(3,n=!oe))},[a,r,c,n,p,_,l,w,u,$,h,f,g]}class Ie extends x{constructor(t){super();ee(this,t,ve,ke,te,{dto:0})}}export{Ie as default};
