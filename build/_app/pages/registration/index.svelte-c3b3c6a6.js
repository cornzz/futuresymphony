import{S as te,i as re,s as se,k as z,f as w,m as J,n as I,o as W,p as v,d,J as B,M as ne,X as ie,ag as K,e as O,j as y,c as M,l as N,a as Y,b as G,E as Q,t as S,g as T,F as X,G as le,h as U,H as Z,U as H,ah as V,v as D,w as F,x as L,ai as q,A as P,ac as ge,aj as oe,ak as fe}from"../../chunks/vendor-b0d036d1.js";import{I as be,a as x,R as de,b as ke}from"../../chunks/RegistrationForm-4f3b6669.js";import{B as ae}from"../../chunks/Button-be2e47ee.js";import{l as C,c as ue}from"../../chunks/stores-5ccc890f.js";import"../../chunks/index-3a51ff82.js";const we=!1;function $e(n){let t,r,e,s,o,u;const a=[Ee,ve],l=[];function b(i,f){return i[3]?1:0}return s=b(n),o=l[s]=a[s](n),{c(){t=O("hr"),r=y(),e=O("div"),o.c(),this.h()},l(i){t=M(i,"HR",{}),r=N(i),e=M(i,"DIV",{class:!0});var f=Y(e);o.l(f),f.forEach(d),this.h()},h(){G(e,"class","resend svelte-rart3l"),Q(e,"success",n[3])},m(i,f){w(i,t,f),w(i,r,f),w(i,e,f),l[s].m(e,null),u=!0},p(i,f){let k=s;s=b(i),s===k?l[s].p(i,f):(J(),I(l[k],1,1,()=>{l[k]=null}),W(),o=l[s],o?o.p(i,f):(o=l[s]=a[s](i),o.c()),v(o,1),o.m(e,null)),f&8&&Q(e,"success",i[3])},i(i){u||(v(o),u=!0)},o(i){I(o),u=!1},d(i){i&&d(t),i&&d(r),i&&d(e),l[s].d()}}}function he(n){let t=n[6](`registration.resend.${n[1]}`)+"",r,e,s,o=n[6]("registration.resend.here")+"",u,a,l,b;return{c(){r=S(t),e=y(),s=O("span"),u=S(o),a=S("."),this.h()},l(i){r=T(i,t),e=N(i),s=M(i,"SPAN",{class:!0});var f=Y(s);u=T(f,o),f.forEach(d),a=T(i,"."),this.h()},h(){G(s,"class","link")},m(i,f){w(i,r,f),w(i,e,f),w(i,s,f),X(s,u),w(i,a,f),l||(b=le(s,"click",n[10]),l=!0)},p(i,f){f&66&&t!==(t=i[6](`registration.resend.${i[1]}`)+"")&&U(r,t),f&64&&o!==(o=i[6]("registration.resend.here")+"")&&U(u,o)},i:Z,o:Z,d(i){i&&d(r),i&&d(e),i&&d(s),i&&d(a),l=!1,b()}}}function ve(n){let t=n[6]("registration.resend.success")+"",r,e,s=n[6]("registration.resend.sendAgain")+"",o,u,a,l=n[6]("registration.resend.here")+"",b,i,f=(n[4]>0?`(${Math.floor(n[4]/60)}:${("0"+n[4]%60).slice(-2)})`:"")+"",k,m,c;return{c(){r=S(t),e=y(),o=S(s),u=y(),a=O("span"),b=S(l),i=S(`.
            `),k=S(f),this.h()},l(p){r=T(p,t),e=N(p),o=T(p,s),u=N(p),a=M(p,"SPAN",{class:!0});var h=Y(a);b=T(h,l),h.forEach(d),i=T(p,`.
            `),k=T(p,f),this.h()},h(){G(a,"class","link svelte-rart3l"),Q(a,"disabled",n[4]>0)},m(p,h){w(p,r,h),w(p,e,h),w(p,o,h),w(p,u,h),w(p,a,h),X(a,b),w(p,i,h),w(p,k,h),m||(c=le(a,"click",n[13]),m=!0)},p(p,h){h&64&&t!==(t=p[6]("registration.resend.success")+"")&&U(r,t),h&64&&s!==(s=p[6]("registration.resend.sendAgain")+"")&&U(o,s),h&64&&l!==(l=p[6]("registration.resend.here")+"")&&U(b,l),h&16&&Q(a,"disabled",p[4]>0),h&16&&f!==(f=(p[4]>0?`(${Math.floor(p[4]/60)}:${("0"+p[4]%60).slice(-2)})`:"")+"")&&U(k,f)},i:Z,o:Z,d(p){p&&d(r),p&&d(e),p&&d(o),p&&d(u),p&&d(a),p&&d(i),p&&d(k),m=!1,c()}}}function Ee(n){let t,r=n[6]("registration.resend.enterYourEmail")+"",e,s,o,u,a,l,b,i;function f(m){n[11](m)}let k={type:"email",name:"resendEmail",placeholder:n[6]("registration.resend.yourEmail")};return n[0]!==void 0&&(k.value=n[0]),u=new be({props:k}),H.push(()=>V(u,"value",f)),u.$on("keyup",n[12]),b=new ae({props:{type:"primary",slim:!0,disabled:n[5],$$slots:{default:[Re]},$$scope:{ctx:n}}}),b.$on("click",n[7]),{c(){t=O("span"),e=S(r),s=S(":"),o=y(),D(u.$$.fragment),l=y(),D(b.$$.fragment),this.h()},l(m){t=M(m,"SPAN",{class:!0});var c=Y(t);e=T(c,r),s=T(c,":"),c.forEach(d),o=N(m),F(u.$$.fragment,m),l=N(m),F(b.$$.fragment,m),this.h()},h(){G(t,"class","svelte-rart3l")},m(m,c){w(m,t,c),X(t,e),X(t,s),w(m,o,c),L(u,m,c),w(m,l,c),L(b,m,c),i=!0},p(m,c){(!i||c&64)&&r!==(r=m[6]("registration.resend.enterYourEmail")+"")&&U(e,r);const p={};c&64&&(p.placeholder=m[6]("registration.resend.yourEmail")),!a&&c&1&&(a=!0,p.value=m[0],q(()=>a=!1)),u.$set(p);const h={};c&32&&(h.disabled=m[5]),c&262208&&(h.$$scope={dirty:c,ctx:m}),b.$set(h)},i(m){i||(v(u.$$.fragment,m),v(b.$$.fragment,m),i=!0)},o(m){I(u.$$.fragment,m),I(b.$$.fragment,m),i=!1},d(m){m&&d(t),m&&d(o),P(u,m),m&&d(l),P(b,m)}}}function Re(n){let t=n[6]("registration.form.submit")+"",r;return{c(){r=S(t)},l(e){r=T(e,t)},m(e,s){w(e,r,s)},p(e,s){s&64&&t!==(t=e[6]("registration.form.submit")+"")&&U(r,t)},d(e){e&&d(r)}}}function Ae(n){let t,r,e,s;const o=[he,$e],u=[];function a(l,b){return l[2]?1:0}return t=a(n),r=u[t]=o[t](n),{c(){r.c(),e=z()},l(l){r.l(l),e=z()},m(l,b){u[t].m(l,b),w(l,e,b),s=!0},p(l,[b]){let i=t;t=a(l),t===i?u[t].p(l,b):(J(),I(u[i],1,1,()=>{u[i]=null}),W(),r=u[t],r?r.p(l,b):(r=u[t]=o[t](l),r.c()),v(r,1),r.m(e.parentNode,e))},i(l){s||(v(r),s=!0)},o(l){I(r),s=!1},d(l){u[t].d(l),l&&d(e)}}}function Ie(n,t,r){let e,s,o,u;B(n,C,g=>r(5,e=g)),B(n,ue,g=>r(15,s=g)),B(n,ne,g=>r(16,o=g)),B(n,ie,g=>r(6,u=g));let{type:a}=t,{error:l}=t,{warning:b}=t,{email:i=""}=t,f=!1,k=!1,m=0,c;function p(g){r(4,m=new Date(new Date().getTime()+g).getTime()-new Date().getTime()),c=setInterval(()=>{m>0?r(4,m--,m):clearInterval(c)},1e3)}async function h(){r(8,l=""),r(9,b="");const g=document.getElementById("resendEmail");if(g&&g.reportValidity()||!g&&i){K(C,e=!0,e);let $=new URLSearchParams({email:i,lang:o});const j=await fetch(new URL("new_registration.php?"+$,s).toString());if(j.status===200)r(3,k=!0),p(5*60);else{let ee=await j.text();ee==="Email not found."?r(8,l="registration.resend.notFound"):ee==="Error sending confirmation email."?r(8,l="registration.form.error.emailError"):ee==="Too many requests."?r(9,b="registration.resend.pleaseWait"):r(8,l="registration.form.error.errorOccurred"),r(3,k=!1)}K(C,e=!1,e)}}const E=()=>r(2,f=!f);function R(g){i=g,r(0,i)}const A=g=>g.key==="Enter"&&h(),_=()=>m<=0&&h();return n.$$set=g=>{"type"in g&&r(1,a=g.type),"error"in g&&r(8,l=g.error),"warning"in g&&r(9,b=g.warning),"email"in g&&r(0,i=g.email)},[i,a,f,k,m,e,u,h,l,b,E,R,A,_]}class _e extends te{constructor(t){super();re(this,t,Ie,Ae,se,{type:1,error:8,warning:9,email:0})}}function Se(n){let t,r;return t=new x({props:{type:"info",$$slots:{default:[ye]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,s){L(t,e,s),r=!0},p(e,s){const o={};s&524440&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){I(t.$$.fragment,e),r=!1},d(e){P(t,e)}}}function Te(n){let t,r;return t=new x({props:{type:"success",$$slots:{default:[Ne]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,s){L(t,e,s),r=!0},p(e,s){const o={};s&524441&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){I(t.$$.fragment,e),r=!1},d(e){P(t,e)}}}function ye(n){let t,r=n[7]("registration.firstStep")+"",e,s=n[7]("registration.editingAllowedUntil")+"",o,u,a,l,b,i;function f(c){n[11](c)}function k(c){n[12](c)}let m={type:"alreadyRegistered"};return n[4]!==void 0&&(m.error=n[4]),n[3]!==void 0&&(m.warning=n[3]),a=new _e({props:m}),H.push(()=>V(a,"error",f)),H.push(()=>V(a,"warning",k)),{c(){t=new oe,e=y(),o=S(s),u=y(),D(a.$$.fragment),this.h()},l(c){t=fe(c),e=N(c),o=T(c,s),u=N(c),F(a.$$.fragment,c),this.h()},h(){t.a=e},m(c,p){t.m(r,c,p),w(c,e,p),w(c,o,p),w(c,u,p),L(a,c,p),i=!0},p(c,p){(!i||p&128)&&r!==(r=c[7]("registration.firstStep")+"")&&t.p(r),(!i||p&128)&&s!==(s=c[7]("registration.editingAllowedUntil")+"")&&U(o,s);const h={};!l&&p&16&&(l=!0,h.error=c[4],q(()=>l=!1)),!b&&p&8&&(b=!0,h.warning=c[3],q(()=>b=!1)),a.$set(h)},i(c){i||(v(a.$$.fragment,c),i=!0)},o(c){I(a.$$.fragment,c),i=!1},d(c){c&&t.d(),c&&d(e),c&&d(o),c&&d(u),P(a,c)}}}function Ne(n){let t,r=n[7]("registration.success",{values:{email:n[0].email}})+"",e,s,o,u,a;function l(f){n[9](f)}function b(f){n[10](f)}let i={type:"didNotReceive",email:n[0].email};return n[4]!==void 0&&(i.error=n[4]),n[3]!==void 0&&(i.warning=n[3]),s=new _e({props:i}),H.push(()=>V(s,"error",l)),H.push(()=>V(s,"warning",b)),{c(){t=new oe,e=y(),D(s.$$.fragment),this.h()},l(f){t=fe(f),e=N(f),F(s.$$.fragment,f),this.h()},h(){t.a=e},m(f,k){t.m(r,f,k),w(f,e,k),L(s,f,k),a=!0},p(f,k){(!a||k&129)&&r!==(r=f[7]("registration.success",{values:{email:f[0].email}})+"")&&t.p(r);const m={};k&1&&(m.email=f[0].email),!o&&k&16&&(o=!0,m.error=f[4],q(()=>o=!1)),!u&&k&8&&(u=!0,m.warning=f[3],q(()=>u=!1)),s.$set(m)},i(f){a||(v(s.$$.fragment,f),a=!0)},o(f){I(s.$$.fragment,f),a=!1},d(f){f&&t.d(),f&&d(e),P(s,f)}}}function me(n){let t,r;return t=new x({props:{type:"warning",$$slots:{default:[Ue]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,s){L(t,e,s),r=!0},p(e,s){const o={};s&524424&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){I(t.$$.fragment,e),r=!1},d(e){P(t,e)}}}function Ue(n){let t=n[7](n[3])+"",r;return{c(){r=S(t)},l(e){r=T(e,t)},m(e,s){w(e,r,s)},p(e,s){s&136&&t!==(t=e[7](e[3])+"")&&U(r,t)},d(e){e&&d(r)}}}function pe(n){let t,r;return t=new x({props:{type:"error",$$slots:{default:[je]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,s){L(t,e,s),r=!0},p(e,s){const o={};s&524432&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){I(t.$$.fragment,e),r=!1},d(e){P(t,e)}}}function je(n){let t=n[7](n[4])+"",r;return{c(){r=S(t)},l(e){r=T(e,t)},m(e,s){w(e,r,s)},p(e,s){s&144&&t!==(t=e[7](e[4])+"")&&U(r,t)},d(e){e&&d(r)}}}function ce(n){let t,r,e,s;function o(l){n[15](l)}function u(l){n[16](l)}let a={newRegistration:!0,$$slots:{default:[Fe]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.dto=n[0]),n[2]!==void 0&&(a.regulationsAccepted=n[2]),t=new de({props:a}),n[14](t),H.push(()=>V(t,"dto",o)),H.push(()=>V(t,"regulationsAccepted",u)),{c(){D(t.$$.fragment)},l(l){F(t.$$.fragment,l)},m(l,b){L(t,l,b),s=!0},p(l,b){const i={};b&524484&&(i.$$scope={dirty:b,ctx:l}),!r&&b&1&&(r=!0,i.dto=l[0],q(()=>r=!1)),!e&&b&4&&(e=!0,i.regulationsAccepted=l[2],q(()=>e=!1)),t.$set(i)},i(l){s||(v(t.$$.fragment,l),s=!0)},o(l){I(t.$$.fragment,l),s=!1},d(l){n[14](null),P(t,l)}}}function De(n){let t=n[7]("registration.form.submit")+"",r;return{c(){r=S(t)},l(e){r=T(e,t)},m(e,s){w(e,r,s)},p(e,s){s&128&&t!==(t=e[7]("registration.form.submit")+"")&&U(r,t)},d(e){e&&d(r)}}}function Fe(n){let t,r,e,s;return e=new ae({props:{type:"primary",disabled:!n[2]||n[6],$$slots:{default:[De]},$$scope:{ctx:n}}}),e.$on("click",n[13]),{c(){t=O("div"),r=y(),D(e.$$.fragment)},l(o){t=M(o,"DIV",{}),Y(t).forEach(d),r=N(o),F(e.$$.fragment,o)},m(o,u){w(o,t,u),w(o,r,u),L(e,o,u),s=!0},p(o,u){const a={};u&68&&(a.disabled=!o[2]||o[6]),u&524416&&(a.$$scope={dirty:u,ctx:o}),e.$set(a)},i(o){s||(v(e.$$.fragment,o),s=!0)},o(o){I(e.$$.fragment,o),s=!1},d(o){o&&d(t),o&&d(r),P(e,o)}}}function Le(n){let t,r,e,s=n[7]("registration.title")+"",o,u,a,l,b,i,f,k,m;t=new ge({props:{title:n[7]("registration.meta.title"),description:n[7]("registration.meta.description")}});const c=[Te,Se],p=[];function h(_,g){return _[5]?0:1}a=h(n),l=p[a]=c[a](n);let E=n[3]&&me(n),R=n[4]&&pe(n),A=!n[5]&&ce(n);return{c(){D(t.$$.fragment),r=y(),e=O("h1"),o=S(s),u=y(),l.c(),b=y(),E&&E.c(),i=y(),R&&R.c(),f=y(),A&&A.c(),k=z(),this.h()},l(_){F(t.$$.fragment,_),r=N(_),e=M(_,"H1",{class:!0});var g=Y(e);o=T(g,s),g.forEach(d),u=N(_),l.l(_),b=N(_),E&&E.l(_),i=N(_),R&&R.l(_),f=N(_),A&&A.l(_),k=z(),this.h()},h(){G(e,"class","cover-heading")},m(_,g){L(t,_,g),w(_,r,g),w(_,e,g),X(e,o),w(_,u,g),p[a].m(_,g),w(_,b,g),E&&E.m(_,g),w(_,i,g),R&&R.m(_,g),w(_,f,g),A&&A.m(_,g),w(_,k,g),m=!0},p(_,[g]){const $={};g&128&&($.title=_[7]("registration.meta.title")),g&128&&($.description=_[7]("registration.meta.description")),t.$set($),(!m||g&128)&&s!==(s=_[7]("registration.title")+"")&&U(o,s);let j=a;a=h(_),a===j?p[a].p(_,g):(J(),I(p[j],1,1,()=>{p[j]=null}),W(),l=p[a],l?l.p(_,g):(l=p[a]=c[a](_),l.c()),v(l,1),l.m(b.parentNode,b)),_[3]?E?(E.p(_,g),g&8&&v(E,1)):(E=me(_),E.c(),v(E,1),E.m(i.parentNode,i)):E&&(J(),I(E,1,1,()=>{E=null}),W()),_[4]?R?(R.p(_,g),g&16&&v(R,1)):(R=pe(_),R.c(),v(R,1),R.m(f.parentNode,f)):R&&(J(),I(R,1,1,()=>{R=null}),W()),_[5]?A&&(J(),I(A,1,1,()=>{A=null}),W()):A?(A.p(_,g),g&32&&v(A,1)):(A=ce(_),A.c(),v(A,1),A.m(k.parentNode,k))},i(_){m||(v(t.$$.fragment,_),v(l),v(E),v(R),v(A),m=!0)},o(_){I(t.$$.fragment,_),I(l),I(E),I(R),I(A),m=!1},d(_){P(t,_),_&&d(r),_&&d(e),_&&d(u),p[a].d(_),_&&d(b),E&&E.d(_),_&&d(i),R&&R.d(_),_&&d(f),A&&A.d(_),_&&d(k)}}}function Pe(n,t,r){let e,s,o,u;B(n,C,$=>r(6,e=$)),B(n,ue,$=>r(17,s=$)),B(n,ne,$=>r(18,o=$)),B(n,ie,$=>r(7,u=$));let{dto:a=new ke}=t,l,b=we,i="",f="",k=!1;async function m(){if(r(4,f=""),r(3,i=""),l.reportValidity()){K(C,e=!0,e),r(0,a.lang=o,a);const $=await fetch(new URL("new_registration.php",s).toString(),{method:"POST",body:JSON.stringify(a)});if($.status===200)r(5,k=!0),localStorage.removeItem("newRegistrationDto");else{let j=await $.text();j==="Email already used."?r(3,i="registration.form.error.emailUsed"):j==="Invalid form."?r(4,f="registration.form.error.invalidForm"):j==="Error sending confirmation email."?r(4,f="registration.form.error.emailError"):j==="Too many requests."?r(3,i="registration.form.error.pleaseWait"):r(4,f="registration.form.error.errorOccurred")}K(C,e=!1,e)}}function c($){f=$,r(4,f)}function p($){i=$,r(3,i)}function h($){f=$,r(4,f)}function E($){i=$,r(3,i)}const R=()=>m();function A($){H[$?"unshift":"push"](()=>{l=$,r(1,l)})}function _($){a=$,r(0,a)}function g($){b=$,r(2,b)}return n.$$set=$=>{"dto"in $&&r(0,a=$.dto)},[a,l,b,i,f,k,e,u,m,c,p,h,E,R,A,_,g]}class qe extends te{constructor(t){super();re(this,t,Pe,Le,se,{dto:0})}}export{qe as default};
