import{S as ee,i as te,s as le,e as v,t as j,j as $,c as g,a as k,g as D,d as h,l as L,b as _,f as B,F as c,h as G,G as se,ac as ae,v as ne,w as re,x as oe,p as N,n as P,A as ie,k as z,o as ce,J as q,u as fe,m as ue,X as he,ai as Q}from"../../chunks/vendor-3b8c650a.js";import{B as pe}from"../../chunks/Button-17e544cc.js";import{l as C,c as _e}from"../../chunks/stores-600db517.js";function W(s,e,l){const r=s.slice();return r[8]=e[l],r}function Y(s){let e,l,r,p=s[4]("registration.form.pieceTitle")+"",n,a,t,o=s[4]("registration.form.annotation")+"",b,T,f,R=s[4]("registration.form.pieceScore")+"",O,F,y,E=s[4]("registration.form.pieceDemo")+"",U,A,S=s[2],m=[];for(let u=0;u<S.length;u+=1)m[u]=Z(W(s,S,u));return{c(){e=v("table"),l=v("tr"),r=v("th"),n=j(p),a=$(),t=v("th"),b=j(o),T=$(),f=v("th"),O=j(R),F=$(),y=v("th"),U=j(E),A=$();for(let u=0;u<m.length;u+=1)m[u].c();this.h()},l(u){e=g(u,"TABLE",{class:!0});var w=k(e);l=g(w,"TR",{class:!0});var i=k(l);r=g(i,"TH",{class:!0});var d=k(r);n=D(d,p),d.forEach(h),a=L(i),t=g(i,"TH",{class:!0});var I=k(t);b=D(I,o),I.forEach(h),T=L(i),f=g(i,"TH",{class:!0});var K=k(f);O=D(K,R),K.forEach(h),F=L(i),y=g(i,"TH",{class:!0});var J=k(y);U=D(J,E),J.forEach(h),i.forEach(h),A=L(w);for(let H=0;H<m.length;H+=1)m[H].l(w);w.forEach(h),this.h()},h(){_(r,"class","title svelte-n7p75n"),_(t,"class","svelte-n7p75n"),_(f,"class","svelte-n7p75n"),_(y,"class","svelte-n7p75n"),_(l,"class","svelte-n7p75n"),_(e,"class","svelte-n7p75n")},m(u,w){B(u,e,w),c(e,l),c(l,r),c(r,n),c(l,a),c(l,t),c(t,b),c(l,T),c(l,f),c(f,O),c(l,F),c(l,y),c(y,U),c(e,A);for(let i=0;i<m.length;i+=1)m[i].m(e,null)},p(u,w){if(w&16&&p!==(p=u[4]("registration.form.pieceTitle")+"")&&G(n,p),w&16&&o!==(o=u[4]("registration.form.annotation")+"")&&G(b,o),w&16&&R!==(R=u[4]("registration.form.pieceScore")+"")&&G(O,R),w&16&&E!==(E=u[4]("registration.form.pieceDemo")+"")&&G(U,E),w&15){S=u[2];let i;for(i=0;i<S.length;i+=1){const d=W(u,S,i);m[i]?m[i].p(d,w):(m[i]=Z(d),m[i].c(),m[i].m(e,null))}for(;i<m.length;i+=1)m[i].d(1);m.length=S.length}},d(u){u&&h(e),ae(m,u)}}}function Z(s){let e,l,r=s[8].pieceTitle+"",p,n,a,t,o,b,T,f,R,O,F,y,E,U,A,S,m,u;function w(){return s[5](s[8])}return{c(){e=v("tr"),l=v("td"),p=j(r),n=$(),a=v("td"),t=v("span"),o=j("Show"),b=$(),T=v("td"),f=v("a"),R=j("Open"),F=$(),y=v("td"),E=v("a"),U=j("Open"),S=$(),this.h()},l(i){e=g(i,"TR",{class:!0});var d=k(e);l=g(d,"TD",{class:!0});var I=k(l);p=D(I,r),I.forEach(h),n=L(d),a=g(d,"TD",{class:!0});var K=k(a);t=g(K,"SPAN",{class:!0});var J=k(t);o=D(J,"Show"),J.forEach(h),K.forEach(h),b=L(d),T=g(d,"TD",{class:!0});var H=k(T);f=g(H,"A",{class:!0,href:!0,target:!0});var M=k(f);R=D(M,"Open"),M.forEach(h),H.forEach(h),F=L(d),y=g(d,"TD",{class:!0});var V=k(y);E=g(V,"A",{class:!0,href:!0,target:!0});var X=k(E);U=D(X,"Open"),X.forEach(h),V.forEach(h),S=L(d),d.forEach(h),this.h()},h(){_(l,"class","title svelte-n7p75n"),_(t,"class","link"),_(a,"class","svelte-n7p75n"),_(f,"class","link"),_(f,"href",O=new URL(`/api/files.php?key=${s[8].download_key}&jury=${s[0]}&file=pieceScoreFile`,s[3]).toString()),_(f,"target","_blank"),_(T,"class","svelte-n7p75n"),_(E,"class","link"),_(E,"href",A=new URL(`/api/files.php?key=${s[8].download_key}&jury=${s[0]}&file=pieceDemoFile`,s[3]).toString()),_(E,"target","_blank"),_(y,"class","svelte-n7p75n"),_(e,"class","svelte-n7p75n")},m(i,d){B(i,e,d),c(e,l),c(l,p),c(e,n),c(e,a),c(a,t),c(t,o),c(e,b),c(e,T),c(T,f),c(f,R),c(e,F),c(e,y),c(y,E),c(E,U),c(e,S),m||(u=se(t,"click",w),m=!0)},p(i,d){s=i,d&4&&r!==(r=s[8].pieceTitle+"")&&G(p,r),d&13&&O!==(O=new URL(`/api/files.php?key=${s[8].download_key}&jury=${s[0]}&file=pieceScoreFile`,s[3]).toString())&&_(f,"href",O),d&13&&A!==(A=new URL(`/api/files.php?key=${s[8].download_key}&jury=${s[0]}&file=pieceDemoFile`,s[3]).toString())&&_(E,"href",A)},d(i){i&&h(e),m=!1,u()}}}function x(s){let e,l,r,p,n,a;return n=new pe({props:{type:"primary",slim:!0,$$slots:{default:[de]},$$scope:{ctx:s}}}),n.$on("click",s[6]),{c(){e=v("dialog"),l=v("p"),r=j(s[1]),p=$(),ne(n.$$.fragment),this.h()},l(t){e=g(t,"DIALOG",{class:!0});var o=k(e);l=g(o,"P",{});var b=k(l);r=D(b,s[1]),b.forEach(h),p=L(o),re(n.$$.fragment,o),o.forEach(h),this.h()},h(){e.open=!0,_(e,"class","message")},m(t,o){B(t,e,o),c(e,l),c(l,r),c(e,p),oe(n,e,null),a=!0},p(t,o){(!a||o&2)&&G(r,t[1]);const b={};o&2048&&(b.$$scope={dirty:o,ctx:t}),n.$set(b)},i(t){a||(N(n.$$.fragment,t),a=!0)},o(t){P(n.$$.fragment,t),a=!1},d(t){t&&h(e),ie(n)}}}function de(s){let e;return{c(){e=j("OK")},l(l){e=D(l,"OK")},m(l,r){B(l,e,r)},d(l){l&&h(e)}}}function me(s){let e,l,r,p,n=s[2].length&&Y(s),a=s[1]&&x(s);return{c(){e=v("div"),n&&n.c(),l=$(),a&&a.c(),r=z(),this.h()},l(t){e=g(t,"DIV",{class:!0});var o=k(e);n&&n.l(o),o.forEach(h),l=L(t),a&&a.l(t),r=z(),this.h()},h(){_(e,"class","wrapper svelte-n7p75n")},m(t,o){B(t,e,o),n&&n.m(e,null),B(t,l,o),a&&a.m(t,o),B(t,r,o),p=!0},p(t,[o]){t[2].length?n?n.p(t,o):(n=Y(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null),t[1]?a?(a.p(t,o),o&2&&N(a,1)):(a=x(t),a.c(),N(a,1),a.m(r.parentNode,r)):a&&(ue(),P(a,1,1,()=>{a=null}),ce())},i(t){p||(N(a),p=!0)},o(t){P(a),p=!1},d(t){t&&h(e),n&&n.d(),t&&h(l),a&&a.d(t),t&&h(r)}}}function ve(s,e,l){let r,p,n;q(s,C,f=>l(7,r=f)),q(s,_e,f=>l(3,p=f)),q(s,he,f=>l(4,n=f));let a,t,o=[];return fe(async()=>{Q(C,r=!0,r),l(0,a=window.location.search.substring(1));const f=await fetch(new URL(`files.php?jury=${a}`,p),{method:"GET"});f.ok?l(2,o=await f.json()):l(1,t="Invalid access key."),Q(C,r=!1,r)}),[a,t,o,p,n,f=>l(1,t=f.annotation),()=>l(1,t="")]}class Ee extends ee{constructor(e){super();te(this,e,ve,me,le,{})}}export{Ee as default};
