var de=Object.defineProperty;var ee=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var te=(o,t,l)=>t in o?de(o,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[t]=l,le=(o,t)=>{for(var l in t||(t={}))ge.call(t,l)&&te(o,l,t[l]);if(ee)for(var l of ee(t))be.call(t,l)&&te(o,l,t[l]);return o};import{S as he,i as ke,s as $e,e as T,t as y,j as F,k as H,c as J,a as V,g as v,d,l as O,b as z,f as h,F as R,h as S,n as w,o as K,p as $,J as Q,u as we,m as M,X as ye,U as re,ai as G,W as x,H as X,v as B,w as C,x as U,A as L,aj as oe,ak as ie,a8 as ve,a9 as Se,G as Fe,ac as Oe}from"../../chunks/vendor-9a50c44f.js";import{a as Y}from"../../chunks/selectData-8f48d153.js";import{a as De,R as Ee}from"../../chunks/RegistrationForm-a94fb6e7.js";import{B as se}from"../../chunks/Button-08fdf80d.js";import{b as Ne,l as W,c as je,d as Ie}from"../../chunks/stores-8b83ac22.js";import{h as Re}from"../../chunks/index-f425197c.js";function ne(o,t,l){const e=o.slice();return e[21]=t[l],e}function Be(o){let t,l=o[10]("registration.notfound")+"",e,r,f,a=o[10]("error.goBack")+"",n;return{c(){t=T("div"),e=y(l),r=F(),f=T("a"),n=y(a),this.h()},l(u){t=J(u,"DIV",{class:!0});var s=V(t);e=v(s,l),r=O(s),f=J(s,"A",{href:!0,class:!0});var i=V(f);n=v(i,a),i.forEach(d),s.forEach(d),this.h()},h(){z(f,"href","/"),z(f,"class","link"),z(t,"class","center svelte-pts9xi")},m(u,s){h(u,t,s),R(t,e),R(t,r),R(t,f),R(f,n)},p(u,s){s&1024&&l!==(l=u[10]("registration.notfound")+"")&&S(e,l),s&1024&&a!==(a=u[10]("error.goBack")+"")&&S(n,a)},i:X,o:X,d(u){u&&d(t)}}}function Ce(o){let t,l,e,r,f,a,n,u,s,i=!o[11]&&fe(o);const m=[Ae,Le],_=[];function b(c,k){return c[4].length===0?0:1}l=b(o),e=_[l]=m[l](o);let p=o[5]&&ue(o);function A(c){o[17](c)}function D(c){o[18](c)}let P={disabled:o[3],$$slots:{default:[We]},$$scope:{ctx:o}};return o[0]!==void 0&&(P.dto=o[0]),o[6]!==void 0&&(P.changed=o[6]),a=new Ee({props:P}),o[16](a),x.push(()=>oe(a,"dto",A)),x.push(()=>oe(a,"changed",D)),{c(){i&&i.c(),t=F(),e.c(),r=F(),p&&p.c(),f=F(),B(a.$$.fragment)},l(c){i&&i.l(c),t=O(c),e.l(c),r=O(c),p&&p.l(c),f=O(c),C(a.$$.fragment,c)},m(c,k){i&&i.m(c,k),h(c,t,k),_[l].m(c,k),h(c,r,k),p&&p.m(c,k),h(c,f,k),U(a,c,k),s=!0},p(c,k){c[11]?i&&(M(),w(i,1,1,()=>{i=null}),K()):i?(i.p(c,k),k&2048&&$(i,1)):(i=fe(c),i.c(),$(i,1),i.m(t.parentNode,t));let q=l;l=b(c),l===q?_[l].p(c,k):(M(),w(_[q],1,1,()=>{_[q]=null}),K(),e=_[l],e?e.p(c,k):(e=_[l]=m[l](c),e.c()),$(e,1),e.m(r.parentNode,r)),c[5]?p?(p.p(c,k),k&32&&$(p,1)):(p=ue(c),p.c(),$(p,1),p.m(f.parentNode,f)):p&&(M(),w(p,1,1,()=>{p=null}),K());const N={};k&8&&(N.disabled=c[3]),k&16781291&&(N.$$scope={dirty:k,ctx:c}),!n&&k&1&&(n=!0,N.dto=c[0],ie(()=>n=!1)),!u&&k&64&&(u=!0,N.changed=c[6],ie(()=>u=!1)),a.$set(N)},i(c){s||($(i),$(e),$(p),$(a.$$.fragment,c),s=!0)},o(c){w(i),w(e),w(p),w(a.$$.fragment,c),s=!1},d(c){i&&i.d(c),c&&d(t),_[l].d(c),c&&d(r),p&&p.d(c),c&&d(f),o[16](null),L(a,c)}}}function fe(o){let t,l;return t=new Y({props:{type:"info",$$slots:{default:[Ue]},$$scope:{ctx:o}}}),{c(){B(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const f={};r&16778240&&(f.$$scope={dirty:r,ctx:e}),t.$set(f)},i(e){l||($(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function Ue(o){let t=o[10]("registration.editingAllowedUntil")+"",l,e,r=o[10]("registration.confirmationAfterDeadline")+"",f,a,n,u=o[10]("registration.clickEdit")+"",s;return{c(){l=y(t),e=F(),f=y(r),a=F(),n=new ve,s=H(),this.h()},l(i){l=v(i,t),e=O(i),f=v(i,r),a=O(i),n=Se(i),s=H(),this.h()},h(){n.a=s},m(i,m){h(i,l,m),h(i,e,m),h(i,f,m),h(i,a,m),n.m(u,i,m),h(i,s,m)},p(i,m){m&1024&&t!==(t=i[10]("registration.editingAllowedUntil")+"")&&S(l,t),m&1024&&r!==(r=i[10]("registration.confirmationAfterDeadline")+"")&&S(f,r),m&1024&&u!==(u=i[10]("registration.clickEdit")+"")&&n.p(u)},d(i){i&&d(l),i&&d(e),i&&d(f),i&&d(a),i&&d(s),i&&n.d()}}}function Le(o){let t,l;return t=new Y({props:{type:"warning",$$slots:{default:[Pe]},$$scope:{ctx:o}}}),{c(){B(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const f={};r&16778258&&(f.$$scope={dirty:r,ctx:e}),t.$set(f)},i(e){l||($(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function Ae(o){let t,l;return t=new Y({props:{type:"success",$$slots:{default:[Te]},$$scope:{ctx:o}}}),{c(){B(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const f={};r&16778240&&(f.$$scope={dirty:r,ctx:e}),t.$set(f)},i(e){l||($(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function ae(o){let t,l=o[10](o[21].labels[0].dataset.label)+"",e,r,f,a;function n(){return o[13](o[21])}return{c(){t=T("li"),e=y(l),r=F(),this.h()},l(u){t=J(u,"LI",{class:!0});var s=V(t);e=v(s,l),r=O(s),s.forEach(d),this.h()},h(){z(t,"class","svelte-pts9xi")},m(u,s){h(u,t,s),R(t,e),R(t,r),f||(a=Fe(t,"click",n),f=!0)},p(u,s){o=u,s&1040&&l!==(l=o[10](o[21].labels[0].dataset.label)+"")&&S(e,l)},d(u){u&&d(t),f=!1,a()}}}function Pe(o){let t=o[10]("registration.missingForComplete")+"",l,e,r,f=o[4],a=[];for(let n=0;n<f.length;n+=1)a[n]=ae(ne(o,f,n));return{c(){l=y(t),e=F(),r=T("ul");for(let n=0;n<a.length;n+=1)a[n].c()},l(n){l=v(n,t),e=O(n),r=J(n,"UL",{});var u=V(r);for(let s=0;s<a.length;s+=1)a[s].l(u);u.forEach(d)},m(n,u){h(n,l,u),h(n,e,u),h(n,r,u);for(let s=0;s<a.length;s+=1)a[s].m(r,null)},p(n,u){if(u&1024&&t!==(t=n[10]("registration.missingForComplete")+"")&&S(l,t),u&1042){f=n[4];let s;for(s=0;s<f.length;s+=1){const i=ne(n,f,s);a[s]?a[s].p(i,u):(a[s]=ae(i),a[s].c(),a[s].m(r,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=f.length}},d(n){n&&d(l),n&&d(e),n&&d(r),Oe(a,n)}}}function Te(o){let t=o[10]("registration.complete")+"",l;return{c(){l=y(t)},l(e){l=v(e,t)},m(e,r){h(e,l,r)},p(e,r){r&1024&&t!==(t=e[10]("registration.complete")+"")&&S(l,t)},d(e){e&&d(l)}}}function ue(o){let t,l;return t=new Y({props:{type:"error",$$slots:{default:[He]},$$scope:{ctx:o}}}),{c(){B(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const f={};r&16778272&&(f.$$scope={dirty:r,ctx:e}),t.$set(f)},i(e){l||($(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function He(o){let t=o[10](...o[5])+"",l;return{c(){l=y(t)},l(e){l=v(e,t)},m(e,r){h(e,l,r)},p(e,r){r&1056&&t!==(t=e[10](...e[5])+"")&&S(l,t)},d(e){e&&d(l)}}}function Je(o){let t;return{c(){t=T("div")},l(l){t=J(l,"DIV",{}),V(t).forEach(d)},m(l,e){h(l,t,e)},p:X,i:X,o:X,d(l){l&&d(t)}}}function Ve(o){let t,l;return t=new se({props:{type:"outline",disabled:o[9],$$slots:{default:[Ke]},$$scope:{ctx:o}}}),t.$on("click",o[14]),{c(){B(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const f={};r&512&&(f.disabled=e[9]),r&16778240&&(f.$$scope={dirty:r,ctx:e}),t.$set(f)},i(e){l||($(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function Ke(o){let t=o[10]("registration.form.cancel")+"",l;return{c(){l=y(t)},l(e){l=v(e,t)},m(e,r){h(e,l,r)},p(e,r){r&1024&&t!==(t=e[10]("registration.form.cancel")+"")&&S(l,t)},d(e){e&&d(l)}}}function ce(o){let t,l;return t=new se({props:{type:"primary",disabled:o[9],$$slots:{default:[Me]},$$scope:{ctx:o}}}),t.$on("click",o[15]),{c(){B(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const f={};r&512&&(f.disabled=e[9]),r&16778248&&(f.$$scope={dirty:r,ctx:e}),t.$set(f)},i(e){l||($(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function Me(o){let t=(o[3]?o[10]("registration.form.edit"):o[10]("registration.form.save"))+"",l;return{c(){l=y(t)},l(e){l=v(e,t)},m(e,r){h(e,l,r)},p(e,r){r&1032&&t!==(t=(e[3]?e[10]("registration.form.edit"):e[10]("registration.form.save"))+"")&&S(l,t)},d(e){e&&d(l)}}}function We(o){let t,l,e,r,f;const a=[Ve,Je],n=[];function u(i,m){return i[3]?1:0}t=u(o),l=n[t]=a[t](o);let s=(!o[11]||o[8])&&ce(o);return{c(){l.c(),e=F(),s&&s.c(),r=H()},l(i){l.l(i),e=O(i),s&&s.l(i),r=H()},m(i,m){n[t].m(i,m),h(i,e,m),s&&s.m(i,m),h(i,r,m),f=!0},p(i,m){let _=t;t=u(i),t===_?n[t].p(i,m):(M(),w(n[_],1,1,()=>{n[_]=null}),K(),l=n[t],l?l.p(i,m):(l=n[t]=a[t](i),l.c()),$(l,1),l.m(e.parentNode,e)),!i[11]||i[8]?s?(s.p(i,m),m&2304&&$(s,1)):(s=ce(i),s.c(),$(s,1),s.m(r.parentNode,r)):s&&(M(),w(s,1,1,()=>{s=null}),K())},i(i){f||($(l),$(s),f=!0)},o(i){w(l),w(s),f=!1},d(i){n[t].d(i),i&&d(e),s&&s.d(i),i&&d(r)}}}function qe(o){let t,l=o[10]("registration.yourRegistration")+"",e,r,f,a,n,u;const s=[Ce,Be],i=[];function m(_,b){return _[0]?0:_[2]?1:-1}return~(f=m(o))&&(a=i[f]=s[f](o)),{c(){t=T("h1"),e=y(l),r=F(),a&&a.c(),n=H(),this.h()},l(_){t=J(_,"H1",{class:!0});var b=V(t);e=v(b,l),b.forEach(d),r=O(_),a&&a.l(_),n=H(),this.h()},h(){z(t,"class","cover-heading")},m(_,b){h(_,t,b),R(t,e),h(_,r,b),~f&&i[f].m(_,b),h(_,n,b),u=!0},p(_,[b]){(!u||b&1024)&&l!==(l=_[10]("registration.yourRegistration")+"")&&S(e,l);let p=f;f=m(_),f===p?~f&&i[f].p(_,b):(a&&(M(),w(i[p],1,1,()=>{i[p]=null}),K()),~f?(a=i[f],a?a.p(_,b):(a=i[f]=s[f](_),a.c()),$(a,1),a.m(n.parentNode,n)):a=null)},i(_){u||($(a),u=!0)},o(_){w(a),u=!1},d(_){_&&d(t),_&&d(r),~f&&i[f].d(_),_&&d(n)}}}function ze(o,t,l){let e,r,f,a;Q(o,W,g=>l(9,e=g)),Q(o,je,g=>l(20,r=g)),Q(o,ye,g=>l(10,f=g)),Q(o,Ie,g=>l(11,a=g));let{dto:n=null}=t;Ne.set(!0);let u,s,i=!1,m=!1,_=[],b=null,p=!1,A=null,D;async function P(){if(l(5,b=null),await re(),u.reportValidity("#firstName, #lastName, #email, #dateOfBirth, #country, #idCopy, #pieceScore, #pieceDemo, #proofOfPayment")){console.log(`saving registration ${s}`),G(W,e=!0,e);const g="registration.php"+(D?`?admin=${D}`:"");let j=await fetch(new URL(g,r),{method:"POST",body:JSON.stringify(n)}),I=await j.text();if(j.ok&&I==="Registration successfully updated."){let E=new FormData;E.append("reg_key",s);for(let Z of Object.entries(n.files))Z[1]&&E.append(Z[0],Z[1][0]);const pe="files.php"+(D?`?admin=${D}`:"");if(j=await fetch(new URL(pe,r),{method:"POST",body:E}),I=await j.text(),j.ok&&I==="File upload successful.")return l(0,n.files.idCopyFile=void 0,n),l(0,n.files.pieceDemoFile=void 0,n),l(0,n.files.pieceScoreFile=void 0,n),l(0,n.files.proofOfPaymentFile=void 0,n),l(6,p=!1),G(W,e=!1,e),l(4,_=u.getInvalid()),!0}if(I==="Invalid form.")l(5,b=["registration.form.error.invalidForm",{}]);else if(I.startsWith("Invalid file type or size:")){const E=I.split(": ").pop();l(5,b=["registration.form.error.fileError",{values:{number:E.split(",").length,files:E}}])}else l(5,b=["registration.form.error.errorOccurred",{}]);G(W,e=!1,e)}return!1}we(async()=>{if(G(W,e=!0,e),s=window.location.search.substring(1),console.log(`loading registration ${s}`),s==="1")l(0,n=JSON.parse('{"reg_key":"1","firstName":"Ernst","lastName":"Haft","email":"ernsthaft@web.de","dateOfBirth":"2001-01-11","country":"DE","pieceTitle":"My piece","pieceDemo":"","pieceScore":"score.pdf","idCopy":"","instrumentation":[[true],[true],[true],[true],[true],[true],[true],[true,true],[false,true],[false],[true],[false],[true,true],[false],[false],[false],[false],[false],[true],[true,true,true,true,true,true],[true,true,true,true,false],[true,true,true,true],[true,false,false],[false,false]],"scoreConfirmations":[true,false,false],"proofOfPayment":"","files":{"idCopyFile":null,"pieceScoreFile":null,"pieceDemoFile":null,"proofOfPaymentFile":null}}'));else{const g=await fetch(new URL(`registration.php?key=${s}`,r));if(g.ok){const j=await g.json();l(0,n=Object.assign(new De,Object.fromEntries(Object.entries(j).filter(([I,E])=>E!==null))))}}G(W,e=!1,e),l(2,i=!0),await re(),u&&(l(4,_=u.getInvalid()),l(3,m=!0)),l(8,D=localStorage.getItem("adminKey"))});const c=g=>{g.closest("#submissionSection")&&u.toggleSubsection("#submissionSection","open"),g.closest("#paymentSection")&&u.toggleSubsection("#paymentSection","open"),g.labels[0].scrollIntoView({behavior:"smooth",block:"center"}),Re(g.labels[0])},k=()=>{l(3,m=!0),l(5,b=null),l(0,n=le({},A))},q=async()=>{l(3,m=!m&&(!p||await P())),(m||b)&&document.getElementById("back").click(),m&&u.closeSubsections(),l(7,A=!m&&!b?JSON.parse(JSON.stringify(n)):A)};function N(g){x[g?"unshift":"push"](()=>{u=g,l(1,u)})}function _e(g){n=g,l(0,n)}function me(g){p=g,l(6,p)}return o.$$set=g=>{"dto"in g&&l(0,n=g.dto)},[n,u,i,m,_,b,p,A,D,e,f,a,P,c,k,q,N,_e,me]}class tt extends he{constructor(t){super();ke(this,t,ze,qe,$e,{dto:0})}}export{tt as default};
