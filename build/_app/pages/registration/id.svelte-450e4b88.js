import{S as x,i as ee,s as te,e as I,t as y,j,k as X,c as N,a as S,g as B,d as m,l as C,b as A,f as b,F as O,h as E,n as k,o as M,p as v,J as z,u as re,m as P,X as ne,a2 as T,Q as q,H as J,a3 as G,v as D,w as F,x as L,a4 as K,A as R,a0 as oe}from"../../chunks/vendor-21361551.js";import{d as se,I as Q,a as ie,B as W}from"../../chunks/Button-0a3b0c39.js";import{b as le,l as H}from"../../chunks/stores-d7cb5688.js";import"../../chunks/index-5525c3de.js";function Y(l,t,r){const e=l.slice();return e[15]=t[r],e}function ae(l){let t,r=l[6]("registration.notfound")+"",e,n,a,i=l[6]("error.goBack")+"",s;return{c(){t=I("div"),e=y(r),n=j(),a=I("a"),s=y(i),this.h()},l(u){t=N(u,"DIV",{class:!0});var o=S(t);e=B(o,r),n=C(o),a=N(o,"A",{href:!0,class:!0});var p=S(a);s=B(p,i),p.forEach(m),o.forEach(m),this.h()},h(){A(a,"href","/"),A(a,"class","link"),A(t,"class","center svelte-3a7dix")},m(u,o){b(u,t,o),O(t,e),O(t,n),O(t,a),O(a,s)},p(u,o){o&64&&r!==(r=u[6]("registration.notfound")+"")&&E(e,r),o&64&&i!==(i=u[6]("error.goBack")+"")&&E(s,i)},i:J,o:J,d(u){u&&m(t)}}}function fe(l){let t,r,e,n,a,i,s,u,o;t=new Q({props:{type:"info",$$slots:{default:[ue]},$$scope:{ctx:l}}});const p=[_e,ce],_=[];function w(f,g){return f[4].length===0?0:1}e=w(l),n=_[e]=p[e](l);function c(f){l[11](f)}function $(f){l[12](f)}let h={disabled:l[3],$$slots:{default:[he]},$$scope:{ctx:l}};return l[0]!==void 0&&(h.dto=l[0]),l[5]!==void 0&&(h.changed=l[5]),i=new ie({props:h}),l[10](i),q.push(()=>G(i,"dto",c)),q.push(()=>G(i,"changed",$)),{c(){D(t.$$.fragment),r=j(),n.c(),a=j(),D(i.$$.fragment)},l(f){F(t.$$.fragment,f),r=C(f),n.l(f),a=C(f),F(i.$$.fragment,f)},m(f,g){L(t,f,g),b(f,r,g),_[e].m(f,g),b(f,a,g),L(i,f,g),o=!0},p(f,g){const d={};g&262208&&(d.$$scope={dirty:g,ctx:f}),t.$set(d);let V=e;e=w(f),e===V?_[e].p(f,g):(P(),k(_[V],1,1,()=>{_[V]=null}),M(),n=_[e],n?n.p(f,g):(n=_[e]=p[e](f),n.c()),v(n,1),n.m(a.parentNode,a));const U={};g&8&&(U.disabled=f[3]),g&262250&&(U.$$scope={dirty:g,ctx:f}),!s&&g&1&&(s=!0,U.dto=f[0],K(()=>s=!1)),!u&&g&32&&(u=!0,U.changed=f[5],K(()=>u=!1)),i.$set(U)},i(f){o||(v(t.$$.fragment,f),v(n),v(i.$$.fragment,f),o=!0)},o(f){k(t.$$.fragment,f),k(n),k(i.$$.fragment,f),o=!1},d(f){R(t,f),f&&m(r),_[e].d(f),f&&m(a),l[10](null),R(i,f)}}}function ue(l){let t=l[6]("registration.editingAllowedUntil")+"",r;return{c(){r=y(t)},l(e){r=B(e,t)},m(e,n){b(e,r,n)},p(e,n){n&64&&t!==(t=e[6]("registration.editingAllowedUntil")+"")&&E(r,t)},d(e){e&&m(r)}}}function ce(l){let t,r;return t=new Q({props:{type:"warning",$$slots:{default:[pe]},$$scope:{ctx:l}}}),{c(){D(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,n){L(t,e,n),r=!0},p(e,n){const a={};n&262224&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){k(t.$$.fragment,e),r=!1},d(e){R(t,e)}}}function _e(l){let t,r;return t=new Q({props:{type:"success",$$slots:{default:[me]},$$scope:{ctx:l}}}),{c(){D(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,n){L(t,e,n),r=!0},p(e,n){const a={};n&262208&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){k(t.$$.fragment,e),r=!1},d(e){R(t,e)}}}function Z(l){let t,r=l[6](l[15])+"",e;return{c(){t=I("li"),e=y(r),this.h()},l(n){t=N(n,"LI",{class:!0});var a=S(t);e=B(a,r),a.forEach(m),this.h()},h(){A(t,"class","svelte-3a7dix")},m(n,a){b(n,t,a),O(t,e)},p(n,a){a&80&&r!==(r=n[6](n[15])+"")&&E(e,r)},d(n){n&&m(t)}}}function pe(l){let t=l[6]("registration.missingForComplete")+"",r,e,n,a=l[4],i=[];for(let s=0;s<a.length;s+=1)i[s]=Z(Y(l,a,s));return{c(){r=y(t),e=j(),n=I("ul");for(let s=0;s<i.length;s+=1)i[s].c()},l(s){r=B(s,t),e=C(s),n=N(s,"UL",{});var u=S(n);for(let o=0;o<i.length;o+=1)i[o].l(u);u.forEach(m)},m(s,u){b(s,r,u),b(s,e,u),b(s,n,u);for(let o=0;o<i.length;o+=1)i[o].m(n,null)},p(s,u){if(u&64&&t!==(t=s[6]("registration.missingForComplete")+"")&&E(r,t),u&80){a=s[4];let o;for(o=0;o<a.length;o+=1){const p=Y(s,a,o);i[o]?i[o].p(p,u):(i[o]=Z(p),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=a.length}},d(s){s&&m(r),s&&m(e),s&&m(n),oe(i,s)}}}function me(l){let t=l[6]("registration.complete")+"",r;return{c(){r=y(t)},l(e){r=B(e,t)},m(e,n){b(e,r,n)},p(e,n){n&64&&t!==(t=e[6]("registration.complete")+"")&&E(r,t)},d(e){e&&m(r)}}}function ge(l){let t;return{c(){t=I("div")},l(r){t=N(r,"DIV",{}),S(t).forEach(m)},m(r,e){b(r,t,e)},p:J,i:J,o:J,d(r){r&&m(t)}}}function de(l){let t,r;return t=new W({props:{type:"outline",$$slots:{default:[$e]},$$scope:{ctx:l}}}),t.$on("click",l[8]),{c(){D(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,n){L(t,e,n),r=!0},p(e,n){const a={};n&262208&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){k(t.$$.fragment,e),r=!1},d(e){R(t,e)}}}function $e(l){let t=l[6]("registration.form.cancel")+"",r;return{c(){r=y(t)},l(e){r=B(e,t)},m(e,n){b(e,r,n)},p(e,n){n&64&&t!==(t=e[6]("registration.form.cancel")+"")&&E(r,t)},d(e){e&&m(r)}}}function be(l){let t=(l[3]?l[6]("registration.form.edit"):l[6]("registration.form.save"))+"",r;return{c(){r=y(t)},l(e){r=B(e,t)},m(e,n){b(e,r,n)},p(e,n){n&72&&t!==(t=(e[3]?e[6]("registration.form.edit"):e[6]("registration.form.save"))+"")&&E(r,t)},d(e){e&&m(r)}}}function he(l){let t,r,e,n,a;const i=[de,ge],s=[];function u(o,p){return o[3]?1:0}return t=u(l),r=s[t]=i[t](l),n=new W({props:{type:"primary",$$slots:{default:[be]},$$scope:{ctx:l}}}),n.$on("click",l[9]),{c(){r.c(),e=j(),D(n.$$.fragment)},l(o){r.l(o),e=C(o),F(n.$$.fragment,o)},m(o,p){s[t].m(o,p),b(o,e,p),L(n,o,p),a=!0},p(o,p){let _=t;t=u(o),t===_?s[t].p(o,p):(P(),k(s[_],1,1,()=>{s[_]=null}),M(),r=s[t],r?r.p(o,p):(r=s[t]=i[t](o),r.c()),v(r,1),r.m(e.parentNode,e));const w={};p&262216&&(w.$$scope={dirty:p,ctx:o}),n.$set(w)},i(o){a||(v(r),v(n.$$.fragment,o),a=!0)},o(o){k(r),k(n.$$.fragment,o),a=!1},d(o){s[t].d(o),o&&m(e),R(n,o)}}}function ke(l){let t,r,e=l[6]("registration.yourRegistration")+"",n,a,i,s,u,o;const p=[fe,ae],_=[];function w(c,$){return c[0]?0:c[2]?1:-1}return~(i=w(l))&&(s=_[i]=p[i](l)),{c(){t=I("h1"),r=I("b"),n=y(e),a=j(),s&&s.c(),u=X(),this.h()},l(c){t=N(c,"H1",{class:!0});var $=S(t);r=N($,"B",{});var h=S(r);n=B(h,e),h.forEach(m),$.forEach(m),a=C(c),s&&s.l(c),u=X(),this.h()},h(){A(t,"class","cover-heading")},m(c,$){b(c,t,$),O(t,r),O(r,n),b(c,a,$),~i&&_[i].m(c,$),b(c,u,$),o=!0},p(c,[$]){(!o||$&64)&&e!==(e=c[6]("registration.yourRegistration")+"")&&E(n,e);let h=i;i=w(c),i===h?~i&&_[i].p(c,$):(s&&(P(),k(_[h],1,1,()=>{_[h]=null}),M()),~i?(s=_[i],s?s.p(c,$):(s=_[i]=p[i](c),s.c()),v(s,1),s.m(u.parentNode,u)):s=null)},i(c){o||(v(s),o=!0)},o(c){k(s),o=!1},d(c){c&&m(t),c&&m(a),~i&&_[i].d(c),c&&m(u)}}}function ve(l,t,r){let e,n;z(l,H,d=>r(14,e=d)),z(l,ne,d=>r(6,n=d));let{dto:a=null}=t;le.set(!0);let i,s,u=!1,o=!1,p=[],_=!1;async function w(){if(i.reportValidity("#firstName, #lastName, #email, #dateOfBirth, #country")){r(4,p=i.getInvalid()),console.log(`saving registration ${s}: ${JSON.stringify(a)}`),T(H,e=!0,e);const d=await fetch(new URL(`registration.php?key=${s}`,`${window.location.origin}/api/`).toString(),{method:"POST",body:JSON.stringify(a)});return T(H,e=!1,e),r(5,_=!1),d.status===200}return!1}re(async()=>{T(H,e=!0,e),s=window.location.search.substring(1),console.log(`loading registration ${s}`),await fetch(new URL(`registration.php?key=${s}`,`${window.location.origin}/api/`).toString()),s==="1"&&r(0,a=JSON.parse('{"firstName":"Ernst","lastName":"Haft","email":"ernsthaft@web.de","dateOfBirth":"2004-06-01","country":"DE","idCopy":{"value":"id.jpeg"},"pieceTitle":"Title","annotation":"My piece","pieceScore":{"value":"piece.pdf"},"pieceDemo":{"value":"piece.mp3"},"instrumentation":[[true],[true],[true],[true],[true],[true],[false],[true,true],[false,true],[true],[true],[true],[false],[true],[true],[true],[true],[true],[true],[true],[true,true,true,true,true,true],[true,true,true,true,true],[true,true,true,false],[true,true,false],[false,false]],"remarks":"","scoreConfirmations":[false,false,false],"proofOfPayment":{"value":""}}')),T(H,e=!1,e),r(2,u=!0)});const c=()=>r(3,o=!0),$=async()=>{r(3,o=!o&&(!_||await w())),o&&document.getElementById("back").click(),o&&i.closeSubsections()};function h(d){q[d?"unshift":"push"](()=>{i=d,r(1,i)})}function f(d){a=d,r(0,a)}function g(d){_=d,r(5,_)}return l.$$set=d=>{"dto"in d&&r(0,a=d.dto)},l.$$.update=()=>{l.$$.dirty&2&&i&&(r(4,p=i.getInvalid()),r(3,o=!se))},[a,i,u,o,p,_,n,w,c,$,h,f,g]}class Ie extends x{constructor(t){super();ee(this,t,ve,ke,te,{dto:0})}}export{Ie as default};
