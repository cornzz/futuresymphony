import{S as x,i as ee,s as te,e as I,t as w,j as R,k as z,c as N,a as S,g as B,d as m,l as U,b as A,f as b,F as L,h as E,n as v,o as M,p as y,J as q,u as re,m as P,X as ne,a2 as V,Q,H as J,a3 as G,v as C,w as O,x as j,a4 as K,A as D,a0 as oe}from"../../chunks/vendor-21361551.js";import{d as se,I as X,a as le,B as W}from"../../chunks/Button-925fe59a.js";import{b as ie,l as H,c as ae}from"../../chunks/stores-1e3f24e1.js";function Y(i,t,r){const e=i.slice();return e[16]=t[r],e}function fe(i){let t,r=i[6]("registration.notfound")+"",e,n,a,l=i[6]("error.goBack")+"",o;return{c(){t=I("div"),e=w(r),n=R(),a=I("a"),o=w(l),this.h()},l(u){t=N(u,"DIV",{class:!0});var s=S(t);e=B(s,r),n=U(s),a=N(s,"A",{href:!0,class:!0});var _=S(a);o=B(_,l),_.forEach(m),s.forEach(m),this.h()},h(){A(a,"href","/"),A(a,"class","link"),A(t,"class","center svelte-3a7dix")},m(u,s){b(u,t,s),L(t,e),L(t,n),L(t,a),L(a,o)},p(u,s){s&64&&r!==(r=u[6]("registration.notfound")+"")&&E(e,r),s&64&&l!==(l=u[6]("error.goBack")+"")&&E(o,l)},i:J,o:J,d(u){u&&m(t)}}}function ue(i){let t,r,e,n,a,l,o,u,s;t=new X({props:{type:"info",$$slots:{default:[ce]},$$scope:{ctx:i}}});const _=[pe,_e],p=[];function h(f,d){return f[4].length===0?0:1}e=h(i),n=p[e]=_[e](i);function c(f){i[11](f)}function $(f){i[12](f)}let k={disabled:i[3],$$slots:{default:[ke]},$$scope:{ctx:i}};return i[0]!==void 0&&(k.dto=i[0]),i[5]!==void 0&&(k.changed=i[5]),l=new le({props:k}),i[10](l),Q.push(()=>G(l,"dto",c)),Q.push(()=>G(l,"changed",$)),{c(){C(t.$$.fragment),r=R(),n.c(),a=R(),C(l.$$.fragment)},l(f){O(t.$$.fragment,f),r=U(f),n.l(f),a=U(f),O(l.$$.fragment,f)},m(f,d){j(t,f,d),b(f,r,d),p[e].m(f,d),b(f,a,d),j(l,f,d),s=!0},p(f,d){const T={};d&524352&&(T.$$scope={dirty:d,ctx:f}),t.$set(T);let g=e;e=h(f),e===g?p[e].p(f,d):(P(),v(p[g],1,1,()=>{p[g]=null}),M(),n=p[e],n?n.p(f,d):(n=p[e]=_[e](f),n.c()),y(n,1),n.m(a.parentNode,a));const F={};d&8&&(F.disabled=f[3]),d&524392&&(F.$$scope={dirty:d,ctx:f}),!o&&d&1&&(o=!0,F.dto=f[0],K(()=>o=!1)),!u&&d&32&&(u=!0,F.changed=f[5],K(()=>u=!1)),l.$set(F)},i(f){s||(y(t.$$.fragment,f),y(n),y(l.$$.fragment,f),s=!0)},o(f){v(t.$$.fragment,f),v(n),v(l.$$.fragment,f),s=!1},d(f){D(t,f),f&&m(r),p[e].d(f),f&&m(a),i[10](null),D(l,f)}}}function ce(i){let t=i[6]("registration.editingAllowedUntil")+"",r;return{c(){r=w(t)},l(e){r=B(e,t)},m(e,n){b(e,r,n)},p(e,n){n&64&&t!==(t=e[6]("registration.editingAllowedUntil")+"")&&E(r,t)},d(e){e&&m(r)}}}function _e(i){let t,r;return t=new X({props:{type:"warning",$$slots:{default:[me]},$$scope:{ctx:i}}}),{c(){C(t.$$.fragment)},l(e){O(t.$$.fragment,e)},m(e,n){j(t,e,n),r=!0},p(e,n){const a={};n&524368&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||(y(t.$$.fragment,e),r=!0)},o(e){v(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function pe(i){let t,r;return t=new X({props:{type:"success",$$slots:{default:[ge]},$$scope:{ctx:i}}}),{c(){C(t.$$.fragment)},l(e){O(t.$$.fragment,e)},m(e,n){j(t,e,n),r=!0},p(e,n){const a={};n&524352&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||(y(t.$$.fragment,e),r=!0)},o(e){v(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function Z(i){let t,r=i[6](i[16])+"",e;return{c(){t=I("li"),e=w(r),this.h()},l(n){t=N(n,"LI",{class:!0});var a=S(t);e=B(a,r),a.forEach(m),this.h()},h(){A(t,"class","svelte-3a7dix")},m(n,a){b(n,t,a),L(t,e)},p(n,a){a&80&&r!==(r=n[6](n[16])+"")&&E(e,r)},d(n){n&&m(t)}}}function me(i){let t=i[6]("registration.missingForComplete")+"",r,e,n,a=i[4],l=[];for(let o=0;o<a.length;o+=1)l[o]=Z(Y(i,a,o));return{c(){r=w(t),e=R(),n=I("ul");for(let o=0;o<l.length;o+=1)l[o].c()},l(o){r=B(o,t),e=U(o),n=N(o,"UL",{});var u=S(n);for(let s=0;s<l.length;s+=1)l[s].l(u);u.forEach(m)},m(o,u){b(o,r,u),b(o,e,u),b(o,n,u);for(let s=0;s<l.length;s+=1)l[s].m(n,null)},p(o,u){if(u&64&&t!==(t=o[6]("registration.missingForComplete")+"")&&E(r,t),u&80){a=o[4];let s;for(s=0;s<a.length;s+=1){const _=Y(o,a,s);l[s]?l[s].p(_,u):(l[s]=Z(_),l[s].c(),l[s].m(n,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=a.length}},d(o){o&&m(r),o&&m(e),o&&m(n),oe(l,o)}}}function ge(i){let t=i[6]("registration.complete")+"",r;return{c(){r=w(t)},l(e){r=B(e,t)},m(e,n){b(e,r,n)},p(e,n){n&64&&t!==(t=e[6]("registration.complete")+"")&&E(r,t)},d(e){e&&m(r)}}}function de(i){let t;return{c(){t=I("div")},l(r){t=N(r,"DIV",{}),S(t).forEach(m)},m(r,e){b(r,t,e)},p:J,i:J,o:J,d(r){r&&m(t)}}}function $e(i){let t,r;return t=new W({props:{type:"outline",$$slots:{default:[be]},$$scope:{ctx:i}}}),t.$on("click",i[8]),{c(){C(t.$$.fragment)},l(e){O(t.$$.fragment,e)},m(e,n){j(t,e,n),r=!0},p(e,n){const a={};n&524352&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||(y(t.$$.fragment,e),r=!0)},o(e){v(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function be(i){let t=i[6]("registration.form.cancel")+"",r;return{c(){r=w(t)},l(e){r=B(e,t)},m(e,n){b(e,r,n)},p(e,n){n&64&&t!==(t=e[6]("registration.form.cancel")+"")&&E(r,t)},d(e){e&&m(r)}}}function he(i){let t=(i[3]?i[6]("registration.form.edit"):i[6]("registration.form.save"))+"",r;return{c(){r=w(t)},l(e){r=B(e,t)},m(e,n){b(e,r,n)},p(e,n){n&72&&t!==(t=(e[3]?e[6]("registration.form.edit"):e[6]("registration.form.save"))+"")&&E(r,t)},d(e){e&&m(r)}}}function ke(i){let t,r,e,n,a;const l=[$e,de],o=[];function u(s,_){return s[3]?1:0}return t=u(i),r=o[t]=l[t](i),n=new W({props:{type:"primary",$$slots:{default:[he]},$$scope:{ctx:i}}}),n.$on("click",i[9]),{c(){r.c(),e=R(),C(n.$$.fragment)},l(s){r.l(s),e=U(s),O(n.$$.fragment,s)},m(s,_){o[t].m(s,_),b(s,e,_),j(n,s,_),a=!0},p(s,_){let p=t;t=u(s),t===p?o[t].p(s,_):(P(),v(o[p],1,1,()=>{o[p]=null}),M(),r=o[t],r?r.p(s,_):(r=o[t]=l[t](s),r.c()),y(r,1),r.m(e.parentNode,e));const h={};_&524360&&(h.$$scope={dirty:_,ctx:s}),n.$set(h)},i(s){a||(y(r),y(n.$$.fragment,s),a=!0)},o(s){v(r),v(n.$$.fragment,s),a=!1},d(s){o[t].d(s),s&&m(e),D(n,s)}}}function ve(i){let t,r,e=i[6]("registration.yourRegistration")+"",n,a,l,o,u,s;const _=[ue,fe],p=[];function h(c,$){return c[0]?0:c[2]?1:-1}return~(l=h(i))&&(o=p[l]=_[l](i)),{c(){t=I("h1"),r=I("b"),n=w(e),a=R(),o&&o.c(),u=z(),this.h()},l(c){t=N(c,"H1",{class:!0});var $=S(t);r=N($,"B",{});var k=S(r);n=B(k,e),k.forEach(m),$.forEach(m),a=U(c),o&&o.l(c),u=z(),this.h()},h(){A(t,"class","cover-heading")},m(c,$){b(c,t,$),L(t,r),L(r,n),b(c,a,$),~l&&p[l].m(c,$),b(c,u,$),s=!0},p(c,[$]){(!s||$&64)&&e!==(e=c[6]("registration.yourRegistration")+"")&&E(n,e);let k=l;l=h(c),l===k?~l&&p[l].p(c,$):(o&&(P(),v(p[k],1,1,()=>{p[k]=null}),M()),~l?(o=p[l],o?o.p(c,$):(o=p[l]=_[l](c),o.c()),y(o,1),o.m(u.parentNode,u)):o=null)},i(c){s||(y(o),s=!0)},o(c){v(o),s=!1},d(c){c&&m(t),c&&m(a),~l&&p[l].d(c),c&&m(u)}}}function ye(i,t,r){let e,n,a;q(i,H,g=>r(14,e=g)),q(i,ae,g=>r(15,n=g)),q(i,ne,g=>r(6,a=g));let{dto:l=null}=t;ie.set(!0);let o,u,s=!1,_=!1,p=[],h=!1;async function c(){if(o.reportValidity("#firstName, #lastName, #email, #dateOfBirth, #country")){r(4,p=o.getInvalid()),console.log(`saving registration ${u}: ${JSON.stringify(l)}`),V(H,e=!0,e);const g=await fetch(new URL(`registration.php?${u}`,n).toString(),{method:"POST",body:JSON.stringify(l)});return V(H,e=!1,e),r(5,h=!1),g.status===200}return!1}re(async()=>{V(H,e=!0,e),u=window.location.search.substring(1),console.log(`loading registration ${u}`),await fetch(new URL(`registration.php?key=${u}`,n).toString()),u==="1"&&r(0,l=JSON.parse('{"firstName":"Ernst","lastName":"Haft","email":"ernsthaft@web.de","dateOfBirth":"2004-06-01","country":"DE","idCopy":{"value":"id.jpeg"},"pieceTitle":"Title","annotation":"My piece","pieceScore":{"value":"piece.pdf"},"pieceDemo":{"value":"piece.mp3"},"instrumentation":[[false],[true],[false],[true],[true],[true],[false],[true,true],[false,true],[true],[true],[true],[false],[false],[true],[true],[true],[true],[true],[false],[true,true,true,true,true,true],[true,true,true,true,true],[false,false,true,false],[true,true,false],[false,false]],"scoreConfirmations":[false,false,false],"payment":{"value":""}}')),V(H,e=!1,e),r(2,s=!0)});const $=()=>r(3,_=!0),k=async()=>{r(3,_=!_&&(!h||await c())),_&&document.getElementById("back").click()};function f(g){Q[g?"unshift":"push"](()=>{o=g,r(1,o)})}function d(g){l=g,r(0,l)}function T(g){h=g,r(5,h)}return i.$$set=g=>{"dto"in g&&r(0,l=g.dto)},i.$$.update=()=>{i.$$.dirty&2&&o&&(r(4,p=o.getInvalid()),r(3,_=!se))},[l,o,s,_,p,h,a,c,$,k,f,d,T]}class Ie extends x{constructor(t){super();ee(this,t,ye,ve,te,{dto:0})}}export{Ie as default};
